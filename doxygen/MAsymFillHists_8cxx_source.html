<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cnipol: /direct/eic+u/dsmirnov/cnipol/src/MAsymFillHists.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_e1dca166ec6abb4ef5a7ad269392aef6.html">src</a>
  </div>
</div>
<div class="contents">
<h1>MAsymFillHists.cxx</h1><a href="MAsymFillHists_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;TDirectoryFile.h&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;TGraphErrors.h&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;TH1.h&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;TH2F.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;TStyle.h&quot;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;utils/utils.h&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="MAsymFillHists_8h.html">MAsymFillHists.h</a>&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="MAsymSingleFillHists_8h.html">MAsymSingleFillHists.h</a>&quot;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="MseMeasInfo_8h.html">MseMeasInfo.h</a>&quot;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <a class="code" href="AlphaCalibrator_8cxx.html#a2e4eff40c749ecbebe6e9a0ec9ed6c8d">ClassImp</a>(<a class="code" href="classMAsymFillHists.html">MAsymFillHists</a>)
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 using namespace std;
<a name="l00018"></a>00018 
<a name="l00020"></a><a class="code" href="classMAsymFillHists.html#a20ed4ff69376dbfeef2587e2b82ed976">00020</a> <a class="code" href="classMAsymFillHists.html">MAsymFillHists</a>::<a class="code" href="classMAsymFillHists.html">MAsymFillHists</a>() : <a class="code" href="classDrawObjContainer.html">DrawObjContainer</a>(), fHTargetVsRun(), fVTargetVsRun()
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022    BookHists();
<a name="l00023"></a>00023 }
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00026"></a><a class="code" href="classMAsymFillHists.html#a648f206a94964b4779b410bc600a5df2">00026</a> <a class="code" href="classMAsymFillHists.html#a20ed4ff69376dbfeef2587e2b82ed976" title="Default constructor.">MAsymFillHists::MAsymFillHists</a>(TDirectory *dir) : <a class="code" href="classDrawObjContainer.html">DrawObjContainer</a>(dir), fHTargetVsRun(), fVTargetVsRun()
<a name="l00027"></a>00027 {
<a name="l00028"></a>00028    <a class="code" href="classMAsymFillHists.html#a43e0494d0804de7e969338a67c1a3a4f">BookHists</a>();
<a name="l00029"></a>00029 }
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00033"></a><a class="code" href="classMAsymFillHists.html#a095fc98b1f7d0f7a73a1510215715e52">00033</a> <a class="code" href="classMAsymFillHists.html#a095fc98b1f7d0f7a73a1510215715e52" title="Default destructor.">MAsymFillHists::~MAsymFillHists</a>()
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035    <span class="comment">//delete grHTargetVsMeas;</span>
<a name="l00036"></a>00036    <span class="comment">//delete grVTargetVsMeas;</span>
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="classMAsymFillHists.html#a43e0494d0804de7e969338a67c1a3a4f">00041</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#a43e0494d0804de7e969338a67c1a3a4f">MAsymFillHists::BookHists</a>()
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043    <a class="code" href="classDrawObjContainer.html#a5bb4cfe27d6dbcc02627507a96f852df">fDir</a>-&gt;cd();
<a name="l00044"></a>00044 
<a name="l00045"></a>00045    <span class="comment">// By polarimeter</span>
<a name="l00046"></a>00046    <a class="code" href="AsymCommon_8h.html#a42226acde2fbb79137d009606b8abfba">PolarimeterIdSetIter</a> iPolId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.begin();
<a name="l00047"></a>00047    <span class="keywordflow">for</span> ( ; iPolId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.end(); ++iPolId)
<a name="l00048"></a>00048    {
<a name="l00049"></a>00049       <a class="code" href="classMAsymFillHists.html#a6da7b0eb766fb42b7c5b6a1affcc7494">BookHistsByPolarimeter</a>(*iPolId);
<a name="l00050"></a>00050    }
<a name="l00051"></a>00051 
<a name="l00052"></a>00052    <span class="comment">// By ring</span>
<a name="l00053"></a>00053    <a class="code" href="AsymCommon_8h.html#a98aec11a4c2226bca69b7e48bdc9ad48">RingIdSetIter</a> iRingId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.begin();
<a name="l00054"></a>00054    <span class="keywordflow">for</span> ( ; iRingId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.end(); ++iRingId)
<a name="l00055"></a>00055    {
<a name="l00056"></a>00056       <a class="code" href="classMAsymFillHists.html#a915e6d4f4dfc2c68f4e5f945ca8f25e6">BookHistsByRing</a>(*iRingId);
<a name="l00057"></a>00057    }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00063"></a><a class="code" href="classMAsymFillHists.html#a6da7b0eb766fb42b7c5b6a1affcc7494">00063</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#a6da7b0eb766fb42b7c5b6a1affcc7494">MAsymFillHists::BookHistsByPolarimeter</a>(<a class="code" href="AsymCommon_8h.html#ad8de1322331b8e5692418ef9a97f683c">EPolarimeterId</a> polId)
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065    <span class="keywordtype">char</span>    hName[256];
<a name="l00066"></a>00066    <span class="keywordtype">string</span>  shName;
<a name="l00067"></a>00067    TH1    *hist;
<a name="l00068"></a>00068    <span class="keywordtype">string</span>  sPolId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(polId);
<a name="l00069"></a>00069    <span class="comment">//string  strBeamE = RunConfig::AsString(beamE);</span>
<a name="l00070"></a>00070    Color_t color  = <a class="code" href="classRunConfig.html#a53cc5296e4bc66ab2a2dc83098bf337a">RunConfig::AsColor</a>(polId);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072    <span class="comment">//TStyle  styleMarker;</span>
<a name="l00073"></a>00073    TAttMarker  styleMarker;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075    styleMarker.SetMarkerStyle(kFullCircle);
<a name="l00076"></a>00076    styleMarker.SetMarkerSize(1);
<a name="l00077"></a>00077    styleMarker.SetMarkerColor(color);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 
<a name="l00080"></a>00080    <span class="comment">// Asymmetry</span>
<a name="l00081"></a>00081    sprintf(hName, <span class="stringliteral">&quot;grAsymVsEnergy&quot;</span>);
<a name="l00082"></a>00082    TGraphErrors *grAsymVsEnergy = <span class="keyword">new</span> TGraphErrors();
<a name="l00083"></a>00083    grAsymVsEnergy-&gt;SetName(hName);
<a name="l00084"></a>00084    grAsymVsEnergy-&gt;SetMarkerStyle(kFullCircle);
<a name="l00085"></a>00085    grAsymVsEnergy-&gt;SetMarkerSize(1);
<a name="l00086"></a>00086    grAsymVsEnergy-&gt;SetMarkerColor(color);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088    sprintf(hName, <span class="stringliteral">&quot;hAsymVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00089"></a>00089    <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName] = <span class="keyword">new</span> TH2F(hName, hName, 1, 0, 450, 1, 0, 0.01);
<a name="l00090"></a>00090    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;; Beam Energy; Asymmetry;&quot;</span>);
<a name="l00091"></a>00091    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;NOIMG&quot;</span>);
<a name="l00092"></a>00092    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grAsymVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094    <span class="comment">// Analyzing power</span>
<a name="l00095"></a>00095    sprintf(hName, <span class="stringliteral">&quot;grAnaPowerVsEnergy&quot;</span>);
<a name="l00096"></a>00096    TGraphErrors *grAnaPowerVsEnergy = <span class="keyword">new</span> TGraphErrors();
<a name="l00097"></a>00097    grAnaPowerVsEnergy-&gt;SetName(hName);
<a name="l00098"></a>00098    grAnaPowerVsEnergy-&gt;SetMarkerStyle(kFullCircle);
<a name="l00099"></a>00099    grAnaPowerVsEnergy-&gt;SetMarkerSize(1);
<a name="l00100"></a>00100    grAnaPowerVsEnergy-&gt;SetMarkerColor(color);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102    sprintf(hName, <span class="stringliteral">&quot;hAnaPowerVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00103"></a>00103    o[hName] = <span class="keyword">new</span> TH2F(hName, hName, 1, 0, 450, 1, 0, 0.02);
<a name="l00104"></a>00104    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;; Beam Energy; A_{N};&quot;</span>);
<a name="l00105"></a>00105    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;NOIMG&quot;</span>);
<a name="l00106"></a>00106    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grAnaPowerVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108    sprintf(hName, <span class="stringliteral">&quot;hAnaPowerVsEnergyBinned_%s&quot;</span>, sPolId.c_str());
<a name="l00109"></a>00109    Float_t energyBins[10] = {0, 14, 34, 90, 110, 240, 260, 390, 410, 450};
<a name="l00110"></a>00110    o[hName] = <span class="keyword">new</span> TH1F(hName, hName, 9, energyBins);
<a name="l00111"></a>00111    ((TH1*) o[hName])-&gt;GetYaxis()-&gt;SetRangeUser(0.00, 0.02);
<a name="l00112"></a>00112    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;; Beam Energy; A_{N};&quot;</span>);
<a name="l00113"></a>00113    ((TH1*) o[hName])-&gt;SetMarkerStyle(kFullCircle);
<a name="l00114"></a>00114    ((TH1*) o[hName])-&gt;SetMarkerSize(1);
<a name="l00115"></a>00115    ((TH1*) o[hName])-&gt;SetMarkerColor(color);
<a name="l00116"></a>00116    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;E1&quot;</span>);
<a name="l00117"></a>00117    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grAnaPowerVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00118"></a>00118 
<a name="l00119"></a>00119    <span class="comment">// Polarization</span>
<a name="l00120"></a>00120    TGraphErrors *grPolarVsEnergy = <span class="keyword">new</span> TGraphErrors();
<a name="l00121"></a>00121    grPolarVsEnergy-&gt;SetName(<span class="stringliteral">&quot;grPolarVsEnergy&quot;</span>);
<a name="l00122"></a>00122    grPolarVsEnergy-&gt;SetMarkerStyle(kFullCircle);
<a name="l00123"></a>00123    grPolarVsEnergy-&gt;SetMarkerSize(1);
<a name="l00124"></a>00124    grPolarVsEnergy-&gt;SetMarkerColor(color);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126    sprintf(hName, <span class="stringliteral">&quot;hPolarVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00127"></a>00127    o[hName] = <span class="keyword">new</span> TH2F(hName, hName, 1, 0, 450, 1, 0, 100);
<a name="l00128"></a>00128    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;; Beam Energy; Polarization, %;&quot;</span>);
<a name="l00129"></a>00129    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grPolarVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131    TGraphErrors *grPolarVsFillTime = <span class="keyword">new</span> TGraphErrors();
<a name="l00132"></a>00132    grPolarVsFillTime-&gt;SetName(<span class="stringliteral">&quot;grPolarVsFillTime&quot;</span>);
<a name="l00133"></a>00133    grPolarVsFillTime-&gt;SetMarkerStyle(kFullCircle);
<a name="l00134"></a>00134    grPolarVsFillTime-&gt;SetMarkerSize(1);
<a name="l00135"></a>00135    grPolarVsFillTime-&gt;SetMarkerColor(color);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137    sprintf(hName, <span class="stringliteral">&quot;hPolarVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00138"></a>00138    <span class="comment">//o[hName] = new TH2F(hName, hName, 12, 0, 12*3600, 60, 20, 80);</span>
<a name="l00139"></a>00139    o[hName] = <span class="keyword">new</span> TH2F(hName, hName, 12, 0, 12*3600, 100, 20, 100);
<a name="l00140"></a>00140    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;; Time in Fill, hours; Polarization, %;&quot;</span>);
<a name="l00141"></a>00141    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grPolarVsFillTime, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00142"></a>00142    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeOffset(3600*6, <span class="stringliteral">&quot;gmt&quot;</span>);
<a name="l00143"></a>00143    <span class="comment">//((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeOffset(0, &quot;local&quot;);</span>
<a name="l00144"></a>00144    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeDisplay(1);
<a name="l00145"></a>00145    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeFormat(<span class="stringliteral">&quot;%H&quot;</span>);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147    <span class="comment">// Polarization per measurement number (first five measurements)</span>
<a name="l00148"></a>00148    shName = <span class="stringliteral">&quot;hPolarVsMeasId_&quot;</span> + sPolId;
<a name="l00149"></a>00149    hist = <span class="keyword">new</span> TH1D(shName.c_str(), shName.c_str(), 10, 0.5, 10.5);
<a name="l00150"></a>00150    hist-&gt;GetYaxis()-&gt;SetRangeUser(0.7, 1.3);
<a name="l00151"></a>00151    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Measurement Id; P/P_{first meas.};&quot;</span>);
<a name="l00152"></a>00152    hist-&gt;SetOption(<span class="stringliteral">&quot;E1&quot;</span>);
<a name="l00153"></a>00153    styleMarker.Copy(*hist); o[shName] = hist;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155    <span class="comment">// Polarization per measurement number (first five measurements)</span>
<a name="l00156"></a>00156    shName = <span class="stringliteral">&quot;hProfilePolarMaxVsMeasId_&quot;</span> + sPolId;
<a name="l00157"></a>00157    o[shName] = <span class="keyword">new</span> TH1D(shName.c_str(), shName.c_str(), 10, 0.5, 10.5);
<a name="l00158"></a>00158    ((TH1*) o[shName])-&gt;GetYaxis()-&gt;SetRangeUser(0.7, 1.3);
<a name="l00159"></a>00159    ((TH1*) o[shName])-&gt;SetTitle(<span class="stringliteral">&quot;; Measurement Id; P_{0}/P_{0, first meas.};&quot;</span>);
<a name="l00160"></a>00160    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;NOIMG&quot;</span>);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162    <span class="comment">// Profile r</span>
<a name="l00163"></a>00163    TGraphErrors *grRVsEnergy = <span class="keyword">new</span> TGraphErrors();
<a name="l00164"></a>00164    grRVsEnergy-&gt;SetName(<span class="stringliteral">&quot;grRVsEnergy&quot;</span>);
<a name="l00165"></a>00165    grRVsEnergy-&gt;SetMarkerStyle(kFullCircle);
<a name="l00166"></a>00166    grRVsEnergy-&gt;SetMarkerSize(1);
<a name="l00167"></a>00167    grRVsEnergy-&gt;SetMarkerColor(color);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169    sprintf(hName, <span class="stringliteral">&quot;hRVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00170"></a>00170    o[hName] = <span class="keyword">new</span> TH2F(hName, hName, 1, 0, 450, 1, -0.1, 1);
<a name="l00171"></a>00171    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;;Beam Energy;r;&quot;</span>);
<a name="l00172"></a>00172    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grRVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00173"></a>00173    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;NOIMG&quot;</span>);
<a name="l00174"></a>00174 
<a name="l00175"></a>00175    sprintf(hName, <span class="stringliteral">&quot;hRVsEnergyBinned_%s&quot;</span>, sPolId.c_str());
<a name="l00176"></a>00176    o[hName] = <span class="keyword">new</span> TH1F(hName, hName, 50, 0, 450);
<a name="l00177"></a>00177    ((TH1*) o[hName])-&gt;GetYaxis()-&gt;SetRangeUser(-0.1, 1);
<a name="l00178"></a>00178    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;;Beam Energy;r;&quot;</span>);
<a name="l00179"></a>00179    ((TH1*) o[hName])-&gt;SetMarkerStyle(kFullCircle);
<a name="l00180"></a>00180    ((TH1*) o[hName])-&gt;SetMarkerSize(1);
<a name="l00181"></a>00181    ((TH1*) o[hName])-&gt;SetMarkerColor(color);
<a name="l00182"></a>00182    ((TH1*) o[hName])-&gt;SetOption(<span class="stringliteral">&quot;E1 NOIMG&quot;</span>);
<a name="l00183"></a>00183    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grRVsEnergy, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185    TGraphErrors *grRVsFillTime = <span class="keyword">new</span> TGraphErrors();
<a name="l00186"></a>00186    grRVsFillTime-&gt;SetName(<span class="stringliteral">&quot;grRVsFillTime&quot;</span>);
<a name="l00187"></a>00187    grRVsFillTime-&gt;SetMarkerStyle(kFullCircle);
<a name="l00188"></a>00188    grRVsFillTime-&gt;SetMarkerSize(1);
<a name="l00189"></a>00189    grRVsFillTime-&gt;SetMarkerColor(color);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191    sprintf(hName, <span class="stringliteral">&quot;hRVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00192"></a>00192    o[hName] = <span class="keyword">new</span> TH2F(hName, hName, 12, 0, 12*3600, 100, -0.1, 1);
<a name="l00193"></a>00193    ((TH1*) o[hName])-&gt;SetTitle(<span class="stringliteral">&quot;;Time in Fill, hours;r;&quot;</span>);
<a name="l00194"></a>00194    ((TH1*) o[hName])-&gt;GetListOfFunctions()-&gt;Add(grRVsFillTime, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00195"></a>00195    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeOffset(3600*6, <span class="stringliteral">&quot;gmt&quot;</span>);
<a name="l00196"></a>00196    <span class="comment">//((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeOffset(0, &quot;local&quot;);</span>
<a name="l00197"></a>00197    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeDisplay(1);
<a name="l00198"></a>00198    ((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeFormat(<span class="stringliteral">&quot;%H&quot;</span>);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200    <span class="comment">// Profile R</span>
<a name="l00201"></a>00201    shName = <span class="stringliteral">&quot;hProfileRVsMeasId_&quot;</span> + sPolId;
<a name="l00202"></a>00202    hist = <span class="keyword">new</span> TH1D(shName.c_str(), shName.c_str(), 10, 0.5, 10.5);
<a name="l00203"></a>00203    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Measurement Id; R;&quot;</span>);
<a name="l00204"></a>00204    hist-&gt;SetOption(<span class="stringliteral">&quot;E1 NOIMG&quot;</span>);
<a name="l00205"></a>00205    hist-&gt;GetYaxis()-&gt;SetRangeUser(-0.5, 0.5);
<a name="l00206"></a>00206    styleMarker.Copy(*hist);
<a name="l00207"></a>00207    o[shName] = hist;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209    TGraphErrors *grRotatorPCPolarRatio = <span class="keyword">new</span> TGraphErrors();
<a name="l00210"></a>00210    grRotatorPCPolarRatio-&gt;SetName(<span class="stringliteral">&quot;grRotatorPCPolarRatio&quot;</span>);
<a name="l00211"></a>00211    styleMarker.Copy(*grRotatorPCPolarRatio);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213    shName = <span class="stringliteral">&quot;hRotatorPCPolarRatio_&quot;</span> + sPolId;
<a name="l00214"></a>00214    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 1, 0, 1);
<a name="l00215"></a>00215    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; After/Before Rotator Pol. Ratio;&quot;</span>);
<a name="l00216"></a>00216    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00217"></a>00217    hist-&gt;GetListOfFunctions()-&gt;Add(grRotatorPCPolarRatio, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00218"></a>00218    hist-&gt;GetListOfFunctions()-&gt;SetOwner(kTRUE);
<a name="l00219"></a>00219    o[shName] = hist;
<a name="l00220"></a>00220    hRotatorPCPolarRatiosByPol[polId]  = hist;
<a name="l00221"></a>00221    grRotatorPCPolarRatiosByPol[polId] = grRotatorPCPolarRatio;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223    TGraphErrors *grRampPCPolarRatio = <span class="keyword">new</span> TGraphErrors();
<a name="l00224"></a>00224    grRampPCPolarRatio-&gt;SetName(<span class="stringliteral">&quot;grRampPCPolarRatio&quot;</span>);
<a name="l00225"></a>00225    styleMarker.Copy(*grRampPCPolarRatio);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227    shName = <span class="stringliteral">&quot;hRampPCPolarRatio_&quot;</span> + sPolId;
<a name="l00228"></a>00228    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 1, 0, 1);
<a name="l00229"></a>00229    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; Flattop/Injection Pol. Ratio;&quot;</span>);
<a name="l00230"></a>00230    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00231"></a>00231    hist-&gt;GetListOfFunctions()-&gt;Add(grRampPCPolarRatio, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00232"></a>00232    hist-&gt;GetListOfFunctions()-&gt;SetOwner(kTRUE);
<a name="l00233"></a>00233    o[shName] = hist;
<a name="l00234"></a>00234    hRampPCPolarRatiosByPol[polId]  = hist;
<a name="l00235"></a>00235    grRampPCPolarRatiosByPol[polId] = grRampPCPolarRatio;
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 
<a name="l00240"></a><a class="code" href="classMAsymFillHists.html#a915e6d4f4dfc2c68f4e5f945ca8f25e6">00240</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#a915e6d4f4dfc2c68f4e5f945ca8f25e6">MAsymFillHists::BookHistsByRing</a>(<a class="code" href="AsymCommon_8h.html#a36f5097aa057912ce1fd10ae3c8970f2">ERingId</a> ringId)
<a name="l00241"></a>00241 {
<a name="l00242"></a>00242    <span class="keywordtype">string</span>  sRingId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(ringId);
<a name="l00243"></a>00243    Color_t color   = <a class="code" href="classRunConfig.html#a53cc5296e4bc66ab2a2dc83098bf337a">RunConfig::AsColor</a>(ringId);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245    TAttMarker styleMarker;
<a name="l00246"></a>00246    styleMarker.SetMarkerStyle(kFullCircle);
<a name="l00247"></a>00247    styleMarker.SetMarkerSize(1);
<a name="l00248"></a>00248    styleMarker.SetMarkerColor(color);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250    <span class="keywordtype">string</span>   shName;
<a name="l00251"></a>00251    TH1     *hist;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253    TGraphErrors *grRotatorPCPolarRatio = <span class="keyword">new</span> TGraphErrors();
<a name="l00254"></a>00254    grRotatorPCPolarRatio-&gt;SetName(<span class="stringliteral">&quot;grRotatorPCPolarRatio&quot;</span>);
<a name="l00255"></a>00255    styleMarker.Copy(*grRotatorPCPolarRatio);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257    shName = <span class="stringliteral">&quot;hRotatorPCPolarRatio_&quot;</span> + sRingId;
<a name="l00258"></a>00258    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 1, 0, 1);
<a name="l00259"></a>00259    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; After/Before Rotator Pol. Ratio;&quot;</span>);
<a name="l00260"></a>00260    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00261"></a>00261    hist-&gt;GetListOfFunctions()-&gt;Add(grRotatorPCPolarRatio, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00262"></a>00262    hist-&gt;GetListOfFunctions()-&gt;SetOwner(kTRUE);
<a name="l00263"></a>00263    <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[shName] = hist;
<a name="l00264"></a>00264    hRotatorPCPolarRatiosByRing[ringId]  = hist;
<a name="l00265"></a>00265    grRotatorPCPolarRatiosByRing[ringId] = grRotatorPCPolarRatio;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00268"></a>00268    TGraphErrors *grRampPCPolarRatio = <span class="keyword">new</span> TGraphErrors();
<a name="l00269"></a>00269    grRampPCPolarRatio-&gt;SetName(<span class="stringliteral">&quot;grRampPCPolarRatio&quot;</span>);
<a name="l00270"></a>00270    styleMarker.Copy(*grRampPCPolarRatio);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272    shName = <span class="stringliteral">&quot;hRampPCPolarRatio_&quot;</span> + sRingId;
<a name="l00273"></a>00273    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 1, 0, 1);
<a name="l00274"></a>00274    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; Flattop/Injection Pol. Ratio;&quot;</span>);
<a name="l00275"></a>00275    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00276"></a>00276    hist-&gt;GetListOfFunctions()-&gt;Add(grRampPCPolarRatio, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00277"></a>00277    hist-&gt;GetListOfFunctions()-&gt;SetOwner(kTRUE);
<a name="l00278"></a>00278    <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[shName] = hist;
<a name="l00279"></a>00279    hRampPCPolarRatiosByRing[ringId]  = hist;
<a name="l00280"></a>00280    grRampPCPolarRatiosByRing[ringId] = grRampPCPolarRatio;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 
<a name="l00283"></a>00283    <span class="comment">// Chi2 of bunch asym</span>
<a name="l00284"></a>00284    shName = <span class="stringliteral">&quot;hBunchAsymChi2_&quot;</span> + sRingId;
<a name="l00285"></a>00285    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 1, 0, 1);
<a name="l00286"></a>00286    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; Bunch Asym. #chi^{2};&quot;</span>);
<a name="l00287"></a>00287    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00288"></a>00288    <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[shName] = hist;
<a name="l00289"></a>00289 
<a name="l00290"></a>00290    <span class="comment">// </span>
<a name="l00291"></a>00291    shName = <span class="stringliteral">&quot;hBunchAsymSigma_&quot;</span> + sRingId;
<a name="l00292"></a>00292    hist = <span class="keyword">new</span> TH2C(shName.c_str(), shName.c_str(), 1, 0, 1, 100, 0, 1);
<a name="l00293"></a>00293    hist-&gt;SetTitle(<span class="stringliteral">&quot;; Fill Id; Bunch Asym. #sigma_{Y};&quot;</span>);
<a name="l00294"></a>00294    hist-&gt;SetOption(<span class="stringliteral">&quot;DUMMY GRIDX GRIDY&quot;</span>);
<a name="l00295"></a>00295    <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[shName] = hist;
<a name="l00296"></a>00296    
<a name="l00297"></a>00297    <a class="code" href="AsymCommon_8h.html#a476f28c3bd1b6b05ce8f4fad493e9288">SpinStateSetIter</a> iSS = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a465209582030356173119bfddf1cceed">fSpinStates</a>.begin();
<a name="l00298"></a>00298    
<a name="l00299"></a>00299    <span class="keywordflow">for</span> (; iSS!=<a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a465209582030356173119bfddf1cceed">fSpinStates</a>.end(); ++iSS)
<a name="l00300"></a>00300    {
<a name="l00301"></a>00301       <span class="keywordtype">string</span>  sSS   = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">AsString</a>(*iSS);
<a name="l00302"></a>00302       Color_t color = <a class="code" href="classRunConfig.html#a53cc5296e4bc66ab2a2dc83098bf337a">RunConfig::AsColor</a>(*iSS);
<a name="l00303"></a>00303    
<a name="l00304"></a>00304       styleMarker.SetMarkerColor(color);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306       <span class="comment">// Create graphs for different spin states</span>
<a name="l00307"></a>00307       TGraph *grBunchAsymChi2_ = <span class="keyword">new</span> TGraph();
<a name="l00308"></a>00308       grBunchAsymChi2_-&gt;SetName(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;grBunchAsymChi2_&quot;</span> + sSS).c_str());
<a name="l00309"></a>00309       styleMarker.Copy(*grBunchAsymChi2_);
<a name="l00310"></a>00310    
<a name="l00311"></a>00311       <span class="comment">// Add graph to hist</span>
<a name="l00312"></a>00312       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymChi2_&quot;</span> + sRingId])-&gt;GetListOfFunctions()-&gt;Add(grBunchAsymChi2_, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314       <span class="comment">// Create graphs for different spin states</span>
<a name="l00315"></a>00315       TGraph *grBunchAsymSigma_ = <span class="keyword">new</span> TGraph();
<a name="l00316"></a>00316       grBunchAsymSigma_-&gt;SetName(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;grBunchAsymSigma_&quot;</span> + sSS).c_str());
<a name="l00317"></a>00317       styleMarker.Copy(*grBunchAsymSigma_);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319       <span class="comment">// Add graph to hist</span>
<a name="l00320"></a>00320       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymSigma_&quot;</span> + sRingId])-&gt;GetListOfFunctions()-&gt;Add(grBunchAsymSigma_, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00321"></a>00321    }
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 
<a name="l00326"></a><a class="code" href="classMAsymFillHists.html#afb5b42e59f4fca58835c8d204085b635">00326</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#afb5b42e59f4fca58835c8d204085b635">MAsymFillHists::Fill</a>(<span class="keyword">const</span> <a class="code" href="classEventConfig.html">EventConfig</a> &amp;rc)
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328    Double_t runId              = rc.<a class="code" href="classEventConfig.html#a7bf834061486f136edebaed1346a192d">fMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a94c293ac6ed17f3a2c76fd30088c1ab6">RUNID</a>;
<a name="l00329"></a>00329    UInt_t   fillId             = (UInt_t) runId;
<a name="l00330"></a>00330    UInt_t   beamEnergy         = rc.<a class="code" href="classEventConfig.html#a7bf834061486f136edebaed1346a192d">fMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a41415c151cc2df84cef2407f6e1f5e49">GetBeamEnergy</a>();
<a name="l00331"></a>00331    Short_t  polId              = rc.<a class="code" href="classEventConfig.html#a7bf834061486f136edebaed1346a192d">fMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a39f8897fec12136fab2ad6e95937bf1e">fPolId</a>;
<a name="l00332"></a>00332    time_t   measStartTime       = rc.<a class="code" href="classEventConfig.html#a7bf834061486f136edebaed1346a192d">fMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aa7860fd7d752b2f63cf7eec5860ef0c9">fStartTime</a>;
<a name="l00333"></a>00333    Float_t  anaPower           = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3e908565210653f125f98aeae4371162">A_N</a>[1];
<a name="l00334"></a>00334    Float_t  asymmetry          = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3b3146847c406dd983d7c9bb59856aab">sinphi</a>[0].<a class="code" href="structStructSinPhi.html#a13e16335d1f1482b6166dcdebe7e658a">P</a>[0] * rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3e908565210653f125f98aeae4371162">A_N</a>[1];
<a name="l00335"></a>00335    Float_t  asymmetryErr       = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3b3146847c406dd983d7c9bb59856aab">sinphi</a>[0].<a class="code" href="structStructSinPhi.html#a13e16335d1f1482b6166dcdebe7e658a">P</a>[1] * rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3e908565210653f125f98aeae4371162">A_N</a>[1];
<a name="l00336"></a>00336    Float_t  polar              = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3b3146847c406dd983d7c9bb59856aab">sinphi</a>[0].<a class="code" href="structStructSinPhi.html#a13e16335d1f1482b6166dcdebe7e658a">P</a>[0] * 100.;
<a name="l00337"></a>00337    Float_t  polarErr           = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3b3146847c406dd983d7c9bb59856aab">sinphi</a>[0].<a class="code" href="structStructSinPhi.html#a13e16335d1f1482b6166dcdebe7e658a">P</a>[1] * 100.;
<a name="l00338"></a>00338    Float_t  profileRatio       = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#afbaa36d85eb91c7fde8fdc207af64659">fProfilePolarR</a>.first;
<a name="l00339"></a>00339    Float_t  profileRatioErr    = rc.<a class="code" href="classEventConfig.html#ae9a2dd5008bac29f322bc376838b9c91">fAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#afbaa36d85eb91c7fde8fdc207af64659">fProfilePolarR</a>.second;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341    <span class="comment">// Process common histograms</span>
<a name="l00342"></a>00342    <span class="keywordtype">char</span> hName[256];
<a name="l00343"></a>00343 
<a name="l00344"></a>00344    <span class="keywordtype">string</span> sPolId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>((<a class="code" href="AsymCommon_8h.html#ad8de1322331b8e5692418ef9a97f683c">EPolarimeterId</a>) polId);
<a name="l00345"></a>00345 
<a name="l00346"></a>00346    TGraphErrors *graphErrs = 0;
<a name="l00347"></a>00347    UInt_t        graphNEntries;
<a name="l00348"></a>00348 
<a name="l00349"></a>00349    <span class="comment">// Asymmetry</span>
<a name="l00350"></a>00350    sprintf(hName, <span class="stringliteral">&quot;hAsymVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00351"></a>00351    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grAsymVsEnergy&quot;</span>);
<a name="l00352"></a>00352    graphNEntries = graphErrs-&gt;GetN();
<a name="l00353"></a>00353    graphErrs-&gt;SetPoint(graphNEntries, beamEnergy, asymmetry);
<a name="l00354"></a>00354    graphErrs-&gt;SetPointError(graphNEntries, 0, asymmetryErr);
<a name="l00355"></a>00355 
<a name="l00356"></a>00356    <span class="comment">// Analyzing power</span>
<a name="l00357"></a>00357    sprintf(hName, <span class="stringliteral">&quot;hAnaPowerVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00358"></a>00358    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grAnaPowerVsEnergy&quot;</span>);
<a name="l00359"></a>00359    graphNEntries = graphErrs-&gt;GetN();
<a name="l00360"></a>00360    graphErrs-&gt;SetPoint(graphNEntries, beamEnergy, anaPower);
<a name="l00361"></a>00361    graphErrs-&gt;SetPointError(graphNEntries, 0, 0.05*anaPower); <span class="comment">// This error is fake</span>
<a name="l00362"></a>00362 
<a name="l00363"></a>00363    <span class="comment">// Polarization</span>
<a name="l00364"></a>00364    sprintf(hName, <span class="stringliteral">&quot;hPolarVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00365"></a>00365    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grPolarVsEnergy&quot;</span>);
<a name="l00366"></a>00366    graphNEntries = graphErrs-&gt;GetN();
<a name="l00367"></a>00367    graphErrs-&gt;SetPoint(graphNEntries, beamEnergy, polar);
<a name="l00368"></a>00368    graphErrs-&gt;SetPointError(graphNEntries, 0, polarErr);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370    <span class="comment">// polarization vs fill time</span>
<a name="l00371"></a>00371    <span class="keywordtype">char</span> grName[256];
<a name="l00372"></a>00372    sprintf(hName, <span class="stringliteral">&quot;hPolarVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00373"></a>00373    sprintf(grName, <span class="stringliteral">&quot;grPolarVsFillTime_%05d_%s&quot;</span>, fillId, sPolId.c_str());
<a name="l00374"></a>00374    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(grName);
<a name="l00375"></a>00375 
<a name="l00376"></a>00376    <span class="comment">// Each histogram of this type contains a graph for each fill</span>
<a name="l00377"></a>00377    <span class="keywordflow">if</span> (!graphErrs) {
<a name="l00378"></a>00378       TGraphErrors *graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grPolarVsFillTime&quot;</span>);
<a name="l00379"></a>00379       <span class="comment">// Create new graph for this fill</span>
<a name="l00380"></a>00380       TGraphErrors *graphFill = <span class="keyword">new</span> TGraphErrors(*graph); <span class="comment">// Copy the default graph and its properties, style, colors, ...</span>
<a name="l00381"></a>00381       graphFill-&gt;SetName(grName);
<a name="l00382"></a>00382       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Add(graphFill, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00383"></a>00383       graphErrs = graphFill;
<a name="l00384"></a>00384    }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386    <span class="comment">//if ((EBeamEnergy) beamEnergy == kBEAM_ENERGY_255)</span>
<a name="l00387"></a>00387    <span class="comment">//if ((EBeamEnergy) beamEnergy == kBEAM_ENERGY_100) {</span>
<a name="l00388"></a>00388       graphNEntries = graphErrs-&gt;GetN();
<a name="l00389"></a>00389       graphErrs-&gt;SetPoint(graphNEntries, measStartTime, polar);
<a name="l00390"></a>00390       graphErrs-&gt;SetPointError(graphNEntries, 0, polarErr);
<a name="l00391"></a>00391    <span class="comment">//}</span>
<a name="l00392"></a>00392 
<a name="l00393"></a>00393    <span class="comment">// Profiles r</span>
<a name="l00394"></a>00394    sprintf(hName, <span class="stringliteral">&quot;hRVsEnergy_%s&quot;</span>, sPolId.c_str());
<a name="l00395"></a>00395    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grRVsEnergy&quot;</span>);
<a name="l00396"></a>00396    graphNEntries = graphErrs-&gt;GetN();
<a name="l00397"></a>00397    graphErrs-&gt;SetPoint(graphNEntries, beamEnergy, profileRatio);
<a name="l00398"></a>00398    graphErrs-&gt;SetPointError(graphNEntries, 0, profileRatioErr);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401    <span class="comment">// r vs fill time</span>
<a name="l00402"></a>00402    sprintf(hName, <span class="stringliteral">&quot;hRVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00403"></a>00403    sprintf(grName, <span class="stringliteral">&quot;grRVsFillTime_%05d_%s&quot;</span>, fillId, sPolId.c_str());
<a name="l00404"></a>00404    graphErrs = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(grName);
<a name="l00405"></a>00405 
<a name="l00406"></a>00406    <span class="comment">// Each histogram of this type contains multiple graphs for each fill</span>
<a name="l00407"></a>00407    <span class="keywordflow">if</span> (!graphErrs) {
<a name="l00408"></a>00408       TGraphErrors *graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grRVsFillTime&quot;</span>);
<a name="l00409"></a>00409       TGraphErrors *graphFill = <span class="keyword">new</span> TGraphErrors(*graph); <span class="comment">// Copy the default graph and its properties, style, colors, ...</span>
<a name="l00410"></a>00410       graphFill-&gt;SetName(grName);
<a name="l00411"></a>00411       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Add(graphFill, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00412"></a>00412       graphErrs = graphFill;
<a name="l00413"></a>00413    }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415    <span class="comment">//if ((EBeamEnergy) beamEnergy == kBEAM_ENERGY_250)</span>
<a name="l00416"></a>00416    <span class="keywordflow">if</span> ((<a class="code" href="AsymCommon_8h.html#a27fa7e1c3dafe1ff85fce6d38d8af11c">EBeamEnergy</a>) beamEnergy == <a class="code" href="AsymCommon_8h.html#a27fa7e1c3dafe1ff85fce6d38d8af11ca871dd12377d2ad7236945e164a288ecf">kBEAM_ENERGY_100</a>) {
<a name="l00417"></a>00417       graphNEntries = graphErrs-&gt;GetN();
<a name="l00418"></a>00418       graphErrs-&gt;SetPoint(graphNEntries, measStartTime, profileRatio);
<a name="l00419"></a>00419       graphErrs-&gt;SetPointError(graphNEntries, 0, profileRatioErr);
<a name="l00420"></a>00420    }
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00425"></a><a class="code" href="classMAsymFillHists.html#adb8d7beda7d20a2718f77728de84eb93">00425</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#adb8d7beda7d20a2718f77728de84eb93">MAsymFillHists::PostFill</a>()
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427    <span class="keywordtype">char</span> hName[256];
<a name="l00428"></a>00428 
<a name="l00429"></a>00429    <span class="keywordflow">for</span> (UInt_t i=0; i!=<a class="code" href="AsymHeader_8h.html#af5366ded8d77fb5b67396f92459caa13">N_POLARIMETERS</a>; i++) {
<a name="l00430"></a>00430 
<a name="l00431"></a>00431       <span class="keywordtype">string</span> sPolId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>((<a class="code" href="AsymCommon_8h.html#ad8de1322331b8e5692418ef9a97f683c">EPolarimeterId</a>) i);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433       TGraphErrors *graph;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435       <span class="comment">// Analyzing power</span>
<a name="l00436"></a>00436       sprintf(hName, <span class="stringliteral">&quot;hAnaPowerVsEnergyBinned_%s&quot;</span>, sPolId.c_str());
<a name="l00437"></a>00437       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grAnaPowerVsEnergy&quot;</span>);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439       utils::BinGraph(graph, (TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName]);
<a name="l00440"></a>00440 
<a name="l00441"></a>00441       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Remove(graph);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443       <span class="comment">// Profiles r</span>
<a name="l00444"></a>00444       sprintf(hName, <span class="stringliteral">&quot;hRVsEnergyBinned_%s&quot;</span>, sPolId.c_str());
<a name="l00445"></a>00445       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grRVsEnergy&quot;</span>);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447       <span class="comment">//utils::RemoveOutliers(graph, 2, 3);</span>
<a name="l00448"></a>00448       utils::BinGraph(graph, (TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName]);
<a name="l00449"></a>00449 
<a name="l00450"></a>00450       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Remove(graph);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452       TF1 *funcRVsEnergy = <span class="keyword">new</span> TF1(<span class="stringliteral">&quot;funcRVsEnergy&quot;</span>, <span class="stringliteral">&quot;[0] + [1]*x&quot;</span>);
<a name="l00453"></a>00453       funcRVsEnergy-&gt;SetParameters(0, 0);
<a name="l00454"></a>00454       funcRVsEnergy-&gt;SetParNames(<span class="stringliteral">&quot;offset&quot;</span>, <span class="stringliteral">&quot;slope&quot;</span>);
<a name="l00455"></a>00455       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;Fit(<span class="stringliteral">&quot;funcRVsEnergy&quot;</span>);
<a name="l00456"></a>00456       <span class="keyword">delete</span> funcRVsEnergy;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458       <span class="comment">// Polarization vs fill time</span>
<a name="l00459"></a>00459       sprintf(hName, <span class="stringliteral">&quot;hPolarVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00460"></a>00460       TList* list = ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions();
<a name="l00461"></a>00461 
<a name="l00462"></a>00462       <span class="comment">// For each fill subtract the minimum time from all graph values</span>
<a name="l00463"></a>00463       TIter next(list);
<a name="l00464"></a>00464       <span class="keywordflow">while</span> ( TGraphErrors *graphErrs = (TGraphErrors*) next() ) {
<a name="l00465"></a>00465          utils::SubtractMinimum(graphErrs);
<a name="l00466"></a>00466       }
<a name="l00467"></a>00467 
<a name="l00468"></a>00468       <span class="comment">// Fill a histogram with values per consequent measurement number</span>
<a name="l00469"></a>00469       utils::BinGraphsByMeasId(list, (TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hPolarVsMeasId_&quot;</span> + sPolId], kTRUE);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471       <span class="comment">// Create a single graph from graphs for individual fills and fit it</span>
<a name="l00472"></a>00472       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grPolarVsFillTime&quot;</span>);
<a name="l00473"></a>00473       <span class="comment">//graph-&gt;Merge(list);</span>
<a name="l00474"></a>00474       TGraphErrors *graphMerged = <span class="keyword">new</span> TGraphErrors(*graph);
<a name="l00475"></a>00475       utils::MergeGraphs(graphMerged, list);
<a name="l00476"></a>00476       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Clear();
<a name="l00477"></a>00477       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Add(graphMerged, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00478"></a>00478       <span class="comment">//delete graphMerged;</span>
<a name="l00479"></a>00479 
<a name="l00480"></a>00480       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grPolarVsFillTime&quot;</span>);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482       TF1 *funcPolarVsFillTime = <span class="keyword">new</span> TF1(<span class="stringliteral">&quot;funcPolarVsFillTime&quot;</span>, <span class="stringliteral">&quot;[0] + [1]*x&quot;</span>, 3600, 11*3600);
<a name="l00483"></a>00483       funcPolarVsFillTime-&gt;SetParNames(<span class="stringliteral">&quot;offset&quot;</span>, <span class="stringliteral">&quot;slope&quot;</span>);
<a name="l00484"></a>00484       graph-&gt;Fit(<span class="stringliteral">&quot;funcPolarVsFillTime&quot;</span>, <span class="stringliteral">&quot;R&quot;</span>);
<a name="l00485"></a>00485       <span class="keyword">delete</span> funcPolarVsFillTime;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487       <span class="comment">// r vs fill time</span>
<a name="l00488"></a>00488       sprintf(hName, <span class="stringliteral">&quot;hRVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00489"></a>00489       list = ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions();
<a name="l00490"></a>00490 
<a name="l00491"></a>00491       <span class="comment">// For each fill subtract the minimum time from all graph values</span>
<a name="l00492"></a>00492       TIter nextRlist(list);
<a name="l00493"></a>00493       <span class="keywordflow">while</span> ( TGraphErrors *graphErrs = (TGraphErrors*) nextRlist() ) {
<a name="l00494"></a>00494          utils::SubtractMinimum(graphErrs);
<a name="l00495"></a>00495       }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497       <span class="comment">// Fill a histogram with values per consequent measurement number</span>
<a name="l00498"></a>00498       utils::BinGraphsByMeasId(list, (TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hProfileRVsMeasId_&quot;</span> + sPolId], kFALSE);
<a name="l00499"></a>00499 
<a name="l00500"></a>00500       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grRVsFillTime&quot;</span>);
<a name="l00501"></a>00501       <span class="comment">//graph-&gt;Merge(list);</span>
<a name="l00502"></a>00502       graphMerged = <span class="keyword">new</span> TGraphErrors(*graph);
<a name="l00503"></a>00503       utils::MergeGraphs(graphMerged, list);
<a name="l00504"></a>00504       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Clear();
<a name="l00505"></a>00505       ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;Add(graphMerged, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l00506"></a>00506       <span class="comment">//*graph = *graphMerged;</span>
<a name="l00507"></a>00507       <span class="comment">//delete graphMerged;</span>
<a name="l00508"></a>00508 
<a name="l00509"></a>00509       graph = (TGraphErrors*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;grRVsFillTime&quot;</span>);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511       TF1 funcRVsFillTime(<span class="stringliteral">&quot;funcRVsFillTime&quot;</span>, <span class="stringliteral">&quot;[0] + [1]*x&quot;</span>);
<a name="l00512"></a>00512       funcRVsFillTime.SetParNames(<span class="stringliteral">&quot;offset&quot;</span>, <span class="stringliteral">&quot;slope&quot;</span>);
<a name="l00513"></a>00513       graph-&gt;Fit(&amp;funcRVsFillTime);
<a name="l00514"></a>00514    }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516    <span class="comment">//DrawObjContainer::PostFill();</span>
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 
<a name="l00521"></a><a class="code" href="classMAsymFillHists.html#a95af130f426ee570ebf710ba0fb5f9fa">00521</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#adb8d7beda7d20a2718f77728de84eb93">MAsymFillHists::PostFill</a>(<a class="code" href="classAnaGlobResult.html">AnaGlobResult</a> &amp;agr)
<a name="l00522"></a>00522 {
<a name="l00523"></a>00523    <span class="comment">// Should be moved to a new function</span>
<a name="l00524"></a>00524    <a class="code" href="AsymCommon_8h.html#a98aec11a4c2226bca69b7e48bdc9ad48">RingIdSetIter</a> iRingId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.begin();
<a name="l00525"></a>00525    <span class="keywordflow">for</span> ( ; iRingId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.end(); ++iRingId)
<a name="l00526"></a>00526    {
<a name="l00527"></a>00527       <a class="code" href="AsymCommon_8h.html#a36f5097aa057912ce1fd10ae3c8970f2">ERingId</a> ringId  = *iRingId;
<a name="l00528"></a>00528       <span class="keywordtype">string</span>  sRingId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(ringId);
<a name="l00529"></a>00529 
<a name="l00530"></a>00530       utils::SetXAxisIntBinsLabels((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymChi2_&quot;</span>  + sRingId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00531"></a>00531       utils::SetXAxisIntBinsLabels((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymSigma_&quot;</span> + sRingId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00532"></a>00532 
<a name="l00533"></a>00533       utils::SetXAxisIntBinsLabels(hRotatorPCPolarRatiosByRing[ringId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00534"></a>00534       utils::SetXAxisIntBinsLabels(hRampPCPolarRatiosByRing[ringId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00535"></a>00535    }
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00538"></a>00538    <a class="code" href="AsymCommon_8h.html#a42226acde2fbb79137d009606b8abfba">PolarimeterIdSetIter</a> iPolId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.begin();
<a name="l00539"></a>00539    <span class="keywordflow">for</span> ( ; iPolId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.end(); ++iPolId)
<a name="l00540"></a>00540    {
<a name="l00541"></a>00541       <a class="code" href="AsymCommon_8h.html#ad8de1322331b8e5692418ef9a97f683c">EPolarimeterId</a> polId  = *iPolId;
<a name="l00542"></a>00542       <span class="keywordtype">string</span>         sPolId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(polId);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544       utils::SetXAxisIntBinsLabels(hRotatorPCPolarRatiosByPol[polId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00545"></a>00545       utils::SetXAxisIntBinsLabels(hRampPCPolarRatiosByPol[polId], agr.<a class="code" href="classAnaGlobResult.html#ad21d971b386ddc9cbae5d4c496194c85">GetMinFill</a>(), agr.<a class="code" href="classAnaGlobResult.html#ad4366255aa59070ff11516b9b0866135">GetMaxFill</a>());
<a name="l00546"></a>00546    }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 
<a name="l00549"></a>00549    <span class="comment">// Now loop over fills</span>
<a name="l00550"></a>00550    <a class="code" href="AnaFillResult_8h.html#a8eae77de9adeedcf14a8802ec2040567">AnaFillResultMapIter</a> iafr = agr.<a class="code" href="classAnaGlobResult.html#a522fd4d0e650068423257985118b4598">fAnaFillResults</a>.begin();
<a name="l00551"></a>00551 
<a name="l00552"></a>00552    <span class="keywordflow">for</span> ( ; iafr != agr.<a class="code" href="classAnaGlobResult.html#a522fd4d0e650068423257985118b4598">fAnaFillResults</a>.end(); ++iafr)
<a name="l00553"></a>00553    {
<a name="l00554"></a>00554       UInt_t fillId      = iafr-&gt;first;
<a name="l00555"></a>00555       <a class="code" href="classAnaFillResult.html">AnaFillResult</a> &amp;afr = iafr-&gt;second;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557       <span class="comment">// Set individual fill sub dirs</span>
<a name="l00558"></a>00558       <span class="keywordtype">string</span> sFillId(5, <span class="charliteral">&apos; &apos;</span>);
<a name="l00559"></a>00559       sprintf(&amp;sFillId[0], <span class="stringliteral">&quot;%05d&quot;</span>, fillId);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561       <a class="code" href="classDrawObjContainer.html">DrawObjContainer</a> *oc = <a class="code" href="classMAsymFillHists.html#a56843801b9e887982348f4ee36307fe3">GetSingleFillHists</a>(afr);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563       ((<a class="code" href="classMAsymSingleFillHists.html">MAsymSingleFillHists</a>*) oc)-&gt;PostFill(afr);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565       <span class="comment">// By polarimeter</span>
<a name="l00566"></a>00566       <a class="code" href="AsymCommon_8h.html#a42226acde2fbb79137d009606b8abfba">PolarimeterIdSetIter</a> iPolId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.begin();
<a name="l00567"></a>00567 
<a name="l00568"></a>00568       <span class="keywordflow">for</span> ( ; iPolId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.end(); ++iPolId)
<a name="l00569"></a>00569       {
<a name="l00570"></a>00570          <a class="code" href="AsymCommon_8h.html#ad8de1322331b8e5692418ef9a97f683c">EPolarimeterId</a> polId  = *iPolId;
<a name="l00571"></a>00571          <a class="code" href="AsymCommon_8h.html#a36f5097aa057912ce1fd10ae3c8970f2">ERingId</a>        ringId = <a class="code" href="classRunConfig.html#a0602da2d5b3818688501e98147a3e8ee">RunConfig::GetRingId</a>(polId);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573          <span class="keywordflow">if</span> (afr.<a class="code" href="classAnaFillResult.html#a6083bc42d3f01d933772bcdb7df9322c">fRotatorPCPolarRatio</a>[polId].second &gt;= 0)
<a name="l00574"></a>00574          {
<a name="l00575"></a>00575             utils::AppendToGraph(grRotatorPCPolarRatiosByPol[polId], fillId, afr.<a class="code" href="classAnaFillResult.html#a6083bc42d3f01d933772bcdb7df9322c">fRotatorPCPolarRatio</a>[polId].first, 0, afr.<a class="code" href="classAnaFillResult.html#a6083bc42d3f01d933772bcdb7df9322c">fRotatorPCPolarRatio</a>[polId].second);
<a name="l00576"></a>00576             utils::AppendToGraph(grRotatorPCPolarRatiosByRing[ringId], fillId, afr.<a class="code" href="classAnaFillResult.html#a6083bc42d3f01d933772bcdb7df9322c">fRotatorPCPolarRatio</a>[polId].first, 0, afr.<a class="code" href="classAnaFillResult.html#a6083bc42d3f01d933772bcdb7df9322c">fRotatorPCPolarRatio</a>[polId].second);
<a name="l00577"></a>00577          }
<a name="l00578"></a>00578 
<a name="l00579"></a>00579          <span class="keywordflow">if</span> (afr.<a class="code" href="classAnaFillResult.html#af38311f8fb2eec13c08517bd3e4e346e">fRampPCPolarRatio</a>[polId].second &gt;= 0)
<a name="l00580"></a>00580          {
<a name="l00581"></a>00581             utils::AppendToGraph(grRampPCPolarRatiosByPol[polId], fillId, afr.<a class="code" href="classAnaFillResult.html#af38311f8fb2eec13c08517bd3e4e346e">fRampPCPolarRatio</a>[polId].first, 0, afr.<a class="code" href="classAnaFillResult.html#af38311f8fb2eec13c08517bd3e4e346e">fRampPCPolarRatio</a>[polId].second);
<a name="l00582"></a>00582             utils::AppendToGraph(grRampPCPolarRatiosByRing[ringId], fillId, afr.<a class="code" href="classAnaFillResult.html#af38311f8fb2eec13c08517bd3e4e346e">fRampPCPolarRatio</a>[polId].first, 0, afr.<a class="code" href="classAnaFillResult.html#af38311f8fb2eec13c08517bd3e4e346e">fRampPCPolarRatio</a>[polId].second);
<a name="l00583"></a>00583          }
<a name="l00584"></a>00584       }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586       <span class="comment">// now fill histograms using the above results</span>
<a name="l00587"></a>00587       <a class="code" href="AsymCommon_8h.html#a98aec11a4c2226bca69b7e48bdc9ad48">RingIdSetIter</a> iRingId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.begin();
<a name="l00588"></a>00588 
<a name="l00589"></a>00589       <span class="keywordflow">for</span> ( ; iRingId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.end(); ++iRingId)
<a name="l00590"></a>00590       {
<a name="l00591"></a>00591          <a class="code" href="AsymCommon_8h.html#a36f5097aa057912ce1fd10ae3c8970f2">ERingId</a> ringId  = *iRingId;
<a name="l00592"></a>00592          <span class="keywordtype">string</span>  sRingId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(ringId);
<a name="l00593"></a>00593 
<a name="l00594"></a>00594          <a class="code" href="AsymCommon_8h.html#a476f28c3bd1b6b05ce8f4fad493e9288">SpinStateSetIter</a> iSS = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a465209582030356173119bfddf1cceed">fSpinStates</a>.begin();
<a name="l00595"></a>00595 
<a name="l00596"></a>00596          <span class="keywordflow">for</span> (; iSS!=<a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a465209582030356173119bfddf1cceed">fSpinStates</a>.end(); ++iSS)
<a name="l00597"></a>00597          {
<a name="l00598"></a>00598             <span class="keywordflow">if</span> (*iSS == <a class="code" href="AsymCommon_8h.html#a75033b5922ab0415151b966a3334e9c0a6ca91ae39817248c553eb78fc2f826b9">kSPIN_NULL</a>) <span class="keywordflow">continue</span>;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600             <span class="keywordtype">string</span> sSS = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">AsString</a>(*iSS);
<a name="l00601"></a>00601 
<a name="l00602"></a>00602             <span class="keywordtype">string</span> grName = <span class="stringliteral">&quot;grBunchAsymChi2_&quot;</span> + sSS;
<a name="l00603"></a>00603             TGraph* grBunchAsymChi2_ = (TGraph*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymChi2_&quot;</span> + sRingId])-&gt;GetListOfFunctions()-&gt;FindObject(grName.c_str());
<a name="l00604"></a>00604 
<a name="l00605"></a>00605             grName = <span class="stringliteral">&quot;grBunchAsymSigma_&quot;</span> + sSS;
<a name="l00606"></a>00606             TGraph* grBunchAsymSigma_ = (TGraph*) ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymSigma_&quot;</span> + sRingId])-&gt;GetListOfFunctions()-&gt;FindObject(grName.c_str());
<a name="l00607"></a>00607 
<a name="l00608"></a>00608             <span class="comment">// now extract the chi2 from single fill hist</span>
<a name="l00609"></a>00609             TH1*    hAsymVsBunchId_X_  = (TH1*) ((<a class="code" href="classMAsymSingleFillHists.html">MAsymSingleFillHists</a>*) oc)-&gt;<a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hAsymVsBunchId_X_&quot;</span> + sFillId + <span class="stringliteral">&quot;_&quot;</span> + sRingId];
<a name="l00610"></a>00610             grName = <span class="stringliteral">&quot;grAsymVsBunchId_X_&quot;</span> + sSS;
<a name="l00611"></a>00611             TGraph* grAsymVsBunchId_X_ = (TGraph*) hAsymVsBunchId_X_-&gt;GetListOfFunctions()-&gt;FindObject(grName.c_str());
<a name="l00612"></a>00612 
<a name="l00613"></a>00613             <span class="keywordflow">if</span> (grAsymVsBunchId_X_-&gt;GetN() &lt;= 0) <span class="keywordflow">continue</span>;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615             TF1* fitFunc   = (TF1*) grAsymVsBunchId_X_-&gt;GetListOfFunctions()-&gt;FindObject(<span class="stringliteral">&quot;fitFunc&quot;</span>);
<a name="l00616"></a>00616             Double_t chi2ndf = fitFunc-&gt;GetNDF() &gt; 0 ? fitFunc-&gt;GetChisquare()/fitFunc-&gt;GetNDF() : -1;
<a name="l00617"></a>00617             Double_t sigma_y = fitFunc-&gt;GetParameter(1); <span class="comment">// extract sigma_y, parameter 1</span>
<a name="l00618"></a>00618 
<a name="l00619"></a>00619             utils::AppendToGraph(grBunchAsymChi2_,  fillId, chi2ndf);
<a name="l00620"></a>00620             utils::AppendToGraph(grBunchAsymSigma_, fillId, sigma_y);
<a name="l00621"></a>00621          }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623          utils::UpdateLimitsFromGraphs((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymChi2_&quot;</span>  + sRingId], 2);
<a name="l00624"></a>00624          utils::UpdateLimitsFromGraphs((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[<span class="stringliteral">&quot;hBunchAsymSigma_&quot;</span> + sRingId], 2);
<a name="l00625"></a>00625       }
<a name="l00626"></a>00626    }
<a name="l00627"></a>00627 }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 
<a name="l00631"></a><a class="code" href="classMAsymFillHists.html#a4915ac04a5663d8e2fe0367253f6dd22">00631</a> <span class="keywordtype">void</span> <a class="code" href="classMAsymFillHists.html#a4915ac04a5663d8e2fe0367253f6dd22">MAsymFillHists::UpdateLimits</a>()
<a name="l00632"></a>00632 {
<a name="l00633"></a>00633    <span class="keywordtype">char</span> hName[256];
<a name="l00634"></a>00634 
<a name="l00635"></a>00635    <a class="code" href="AsymCommon_8h.html#a42226acde2fbb79137d009606b8abfba">PolarimeterIdSetIter</a> iPolId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.begin();
<a name="l00636"></a>00636 
<a name="l00637"></a>00637    <span class="keywordflow">for</span> ( ; iPolId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#aa9056de0f9dd9d62006ed7e1388a0b90">fPolarimeters</a>.end(); ++iPolId)
<a name="l00638"></a>00638    {
<a name="l00639"></a>00639       <span class="comment">//for (BeamEnergySetIter iBE=gRunConfig.fBeamEnergies.begin(); iBE!=gRunConfig.fBeamEnergies.end(); ++iBE)</span>
<a name="l00640"></a>00640       <span class="comment">//{</span>
<a name="l00641"></a>00641          <span class="keywordtype">string</span> sPolId = <a class="code" href="classRunConfig.html#addc30f5997de7f4267c442a285434fb2">RunConfig::AsString</a>(*iPolId);
<a name="l00642"></a>00642          <span class="comment">//string strBeamE = RunConfig::AsString(*iBE);</span>
<a name="l00643"></a>00643 
<a name="l00644"></a>00644          sprintf(hName, <span class="stringliteral">&quot;hPolarVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00645"></a>00645          TList* list = ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions();
<a name="l00646"></a>00646          TIter  next(list);
<a name="l00647"></a>00647 
<a name="l00648"></a>00648          <span class="keywordflow">while</span> ( TGraphErrors *graphErrs = (TGraphErrors*) next() ) {
<a name="l00649"></a>00649             utils::SubtractMinimum(graphErrs);
<a name="l00650"></a>00650          }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652          <span class="comment">// Profile r</span>
<a name="l00653"></a>00653          sprintf(hName, <span class="stringliteral">&quot;hRVsFillTime_%s&quot;</span>, sPolId.c_str());
<a name="l00654"></a>00654          list = ((TH1*) <a class="code" href="classDrawObjContainer.html#ae288a17ad6e0151b408beaf77f3e69d9">o</a>[hName])-&gt;GetListOfFunctions();
<a name="l00655"></a>00655          TIter nextRlist(list);
<a name="l00656"></a>00656 
<a name="l00657"></a>00657          <span class="keywordflow">while</span> ( TGraphErrors *graphErrs = (TGraphErrors*) nextRlist() ) {
<a name="l00658"></a>00658             utils::SubtractMinimum(graphErrs);
<a name="l00659"></a>00659          }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661          <span class="comment">//((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetTimeOffset(xmin, &quot;gmt&quot;);</span>
<a name="l00662"></a>00662          <span class="comment">//((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetLimits(xmin, xmax);</span>
<a name="l00663"></a>00663 
<a name="l00664"></a>00664          <span class="comment">//sprintf(grName, &quot;grPolarVsFillTime_%05d_%s&quot;, fillId, sPolId.c_str());</span>
<a name="l00665"></a>00665          <span class="comment">//sprintf(hName, &quot;hPolarVsTime_%s_%s&quot;, sPolId.c_str(), strBeamE.c_str());</span>
<a name="l00666"></a>00666 
<a name="l00667"></a>00667          <span class="comment">//((TH1*) o[hName])-&gt;GetXaxis()-&gt;SetLimits(fMinTime, fMaxTime);</span>
<a name="l00668"></a>00668 
<a name="l00669"></a>00669          grRotatorPCPolarRatiosByPol[*iPolId]-&gt;Fit(<span class="stringliteral">&quot;pol0&quot;</span>);
<a name="l00670"></a>00670          utils::UpdateLimitsFromGraphs(hRotatorPCPolarRatiosByPol[*iPolId], 2);
<a name="l00671"></a>00671 
<a name="l00672"></a>00672          grRampPCPolarRatiosByPol[*iPolId]-&gt;Fit(<span class="stringliteral">&quot;pol0&quot;</span>);
<a name="l00673"></a>00673          utils::UpdateLimitsFromGraphs(hRampPCPolarRatiosByPol[*iPolId], 2);
<a name="l00674"></a>00674       <span class="comment">//}</span>
<a name="l00675"></a>00675    }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677    <a class="code" href="AsymCommon_8h.html#a98aec11a4c2226bca69b7e48bdc9ad48">RingIdSetIter</a> iRingId = <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.begin();
<a name="l00678"></a>00678    <span class="keywordflow">for</span> ( ; iRingId != <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>.<a class="code" href="classRunConfig.html#a96b920a13109475b311eb8e3cffdeccb">fRings</a>.end(); ++iRingId)
<a name="l00679"></a>00679    {
<a name="l00680"></a>00680       <a class="code" href="AsymCommon_8h.html#a36f5097aa057912ce1fd10ae3c8970f2">ERingId</a> ringId  = *iRingId;
<a name="l00681"></a>00681 
<a name="l00682"></a>00682       TF1 fitFunc(<span class="stringliteral">&quot;fitFunc&quot;</span>, <span class="stringliteral">&quot;[0] + [1]*0&quot;</span>);
<a name="l00683"></a>00683       fitFunc.SetParNames(<span class="stringliteral">&quot;const&quot;</span>, <span class="stringliteral">&quot;#sigma_{Y}&quot;</span>);
<a name="l00684"></a>00684       Double_t sigma;
<a name="l00685"></a>00685 
<a name="l00686"></a>00686       sigma = grRotatorPCPolarRatiosByRing[ringId]-&gt;GetRMS(2);
<a name="l00687"></a>00687       fitFunc.FixParameter(1, sigma);
<a name="l00688"></a>00688       grRotatorPCPolarRatiosByRing[ringId]-&gt;Fit(&amp;fitFunc);
<a name="l00689"></a>00689       utils::UpdateLimitsFromGraphs(hRotatorPCPolarRatiosByRing[ringId], 2);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691       sigma = grRampPCPolarRatiosByRing[ringId]-&gt;GetRMS(2);
<a name="l00692"></a>00692       fitFunc.FixParameter(1, sigma);
<a name="l00693"></a>00693       grRampPCPolarRatiosByRing[ringId]-&gt;Fit(&amp;fitFunc);
<a name="l00694"></a>00694       utils::UpdateLimitsFromGraphs(hRampPCPolarRatiosByRing[ringId], 2);
<a name="l00695"></a>00695    }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697    <a class="code" href="classMAsymFillHists.html#a4915ac04a5663d8e2fe0367253f6dd22">DrawObjContainer::UpdateLimits</a>();
<a name="l00698"></a>00698 }
<a name="l00699"></a>00699 
<a name="l00700"></a>00700 
<a name="l00702"></a><a class="code" href="classMAsymFillHists.html#a56843801b9e887982348f4ee36307fe3">00702</a> <a class="code" href="classDrawObjContainer.html">DrawObjContainer</a> *<a class="code" href="classMAsymFillHists.html#a56843801b9e887982348f4ee36307fe3">MAsymFillHists::GetSingleFillHists</a>(<span class="keyword">const</span> <a class="code" href="classAnaFillResult.html">AnaFillResult</a> &amp;afr)
<a name="l00703"></a>00703 {
<a name="l00704"></a>00704    UInt_t fillId = afr.<a class="code" href="classAnaFillResult.html#a54583c31d836df17115fdebc797f19bf">GetFillId</a>();
<a name="l00705"></a>00705 
<a name="l00706"></a>00706    <span class="comment">// Set individual fill sub dirs</span>
<a name="l00707"></a>00707    <span class="keywordtype">string</span> sFillId(5, <span class="charliteral">&apos; &apos;</span>);
<a name="l00708"></a>00708    sprintf(&amp;sFillId[0], <span class="stringliteral">&quot;%05d&quot;</span>, fillId);
<a name="l00709"></a>00709    <span class="keywordtype">string</span> dName = sFillId;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711    <a class="code" href="classDrawObjContainer.html">DrawObjContainer</a>        *oc;
<a name="l00712"></a>00712    <a class="code" href="DrawObjContainer_8h.html#a53d71acb33befd2346b6b51a1b1cb597">DrawObjContainerMapIter</a>  isubdir = <a class="code" href="classDrawObjContainer.html#ae762b02a32ea3f1684da098342b93149">d</a>.find(dName);
<a name="l00713"></a>00713 
<a name="l00714"></a>00714    <span class="keywordflow">if</span> ( isubdir == <a class="code" href="classDrawObjContainer.html#ae762b02a32ea3f1684da098342b93149">d</a>.end()) { <span class="comment">// if dir not found</span>
<a name="l00715"></a>00715       TDirectoryFile *tdir = <span class="keyword">new</span> TDirectoryFile(dName.c_str(), dName.c_str(), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="classDrawObjContainer.html#a5bb4cfe27d6dbcc02627507a96f852df">fDir</a>);
<a name="l00716"></a>00716       oc = <span class="keyword">new</span> <a class="code" href="classMAsymSingleFillHists.html">MAsymSingleFillHists</a>(tdir, &amp;afr);
<a name="l00717"></a>00717       <a class="code" href="classDrawObjContainer.html#ae762b02a32ea3f1684da098342b93149">d</a>[dName] = oc;
<a name="l00718"></a>00718    } <span class="keywordflow">else</span> {
<a name="l00719"></a>00719       oc = isubdir-&gt;second;
<a name="l00720"></a>00720    }
<a name="l00721"></a>00721 
<a name="l00722"></a>00722    <span class="keywordflow">return</span> oc;
<a name="l00723"></a>00723 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 3 Dec 2014 for cnipol by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
