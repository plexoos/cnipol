<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cnipol: /direct/eic+u/dsmirnov/cnipol/src/RawDataReader.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_e1dca166ec6abb4ef5a7ad269392aef6.html">src</a>
  </div>
</div>
<div class="contents">
<h1>RawDataReader.cxx</h1><a href="RawDataReader_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="RawDataReader_8h.html">RawDataReader.h</a>&quot;</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;mysql++.h&quot;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;TRandom.h&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="AsymCalculator_8h.html">AsymCalculator.h</a>&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="AsymRecover_8h.html">AsymRecover.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="AsymRoot_8h.html">AsymRoot.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="AsymAnaInfo_8h.html">AsymAnaInfo.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="TargetInfo_8h.html">TargetInfo.h</a>&quot;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keyword">using namespace </span>std;
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordATPassOne(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader);
<a name="l00018"></a>00018 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordATPassTwo(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader);
<a name="l00019"></a>00019 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordLongPassOne(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader);
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 
<a name="l00025"></a>00025 <a class="code" href="classRawDataReader.html#af6f0ce3477133033001f9df5aac34f87">RawDataReader::RawDataReader</a>(<span class="keywordtype">string</span> fname) : fFileName(fname), fFile(0),
<a name="l00026"></a>00026    fMem(0), fMemSize(0),
<a name="l00027"></a>00027    fFileStream(fFileName.c_str(), ios::binary), fSeenRecords()
<a name="l00028"></a>00028 {
<a name="l00029"></a>00029    fFile = fopen(fFileName.c_str(), <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00030"></a>00030 
<a name="l00031"></a>00031    <span class="comment">// Make sure the file exists</span>
<a name="l00032"></a>00032    <span class="keywordflow">if</span> (!fFile) {
<a name="l00033"></a>00033       Fatal(<span class="stringliteral">&quot;RawDataReader&quot;</span>, <span class="stringliteral">&quot;File \&quot;%s\&quot; not found. Cannot proceed&quot;</span>, fFileName.c_str());
<a name="l00034"></a>00034    } <span class="keywordflow">else</span>
<a name="l00035"></a>00035       Info(<span class="stringliteral">&quot;RawDataReader&quot;</span>, <span class="stringliteral">&quot;Found file \&quot;%s\&quot;&quot;</span>, fFileName.c_str());
<a name="l00036"></a>00036 
<a name="l00037"></a>00037    <span class="comment">// Create a BLOB on the heap with the file content</span>
<a name="l00038"></a>00038    Info(<span class="stringliteral">&quot;RawDataReader&quot;</span>, <span class="stringliteral">&quot;Reading into memory...&quot;</span>);
<a name="l00039"></a>00039 
<a name="l00040"></a>00040    fFileStream.seekg(0, ios::end);
<a name="l00041"></a>00041    fMemSize = fFileStream.tellg(); <span class="comment">// in bytes</span>
<a name="l00042"></a>00042    Info(<span class="stringliteral">&quot;RawDataReader&quot;</span>, <span class="stringliteral">&quot;Input file size: %d bytes&quot;</span>, fMemSize);
<a name="l00043"></a>00043    fFileStream.seekg(0, ios::beg);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045    fMem = <span class="keyword">new</span> <span class="keywordtype">char</span>[fMemSize];
<a name="l00046"></a>00046    fFileStream.read(fMem, fMemSize);
<a name="l00047"></a>00047    fFileStream.close();
<a name="l00048"></a>00048 
<a name="l00049"></a>00049    RecordHeaderStruct *mHeader = (RecordHeaderStruct*) fMem;
<a name="l00050"></a>00050    cout &lt;&lt; <span class="stringliteral">&quot;Currently consider record: fMem: &quot;</span> &lt;&lt; hex &lt;&lt; fMem
<a name="l00051"></a>00051         &lt;&lt; <span class="stringliteral">&quot;, type: &quot;</span> &lt;&lt; hex &lt;&lt; mHeader-&gt;type &lt;&lt; <span class="stringliteral">&quot;, len: &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00052"></a>00052    cout &lt;&lt; <span class="stringliteral">&quot;size RecordHeaderStruct: &quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(RecordHeaderStruct) &lt;&lt; endl;
<a name="l00053"></a>00053    cout &lt;&lt; <span class="stringliteral">&quot;size recordHeaderStruct: &quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(recordHeaderStruct) &lt;&lt; endl;
<a name="l00054"></a>00054 }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 
<a name="l00058"></a><a class="code" href="classRawDataReader.html#aa7851dccd50e0e68dd4f0940076d8709">00058</a> <a class="code" href="classRawDataReader.html#aa7851dccd50e0e68dd4f0940076d8709">RawDataReader::~RawDataReader</a>()
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060    <span class="keywordflow">if</span> (fFile) fclose(fFile);
<a name="l00061"></a>00061    <span class="keyword">delete</span>[] fMem;
<a name="l00062"></a>00062 }
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00066"></a><a class="code" href="classRawDataReader.html#ae4a944a5181e8124fdbc896e4ca85342">00066</a> <span class="keywordtype">void</span> <a class="code" href="classRawDataReader.html#ae4a944a5181e8124fdbc896e4ca85342">RawDataReader::ReadRecBegin</a>(MseMeasInfoX &amp;mseMeasInfo)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068    cout &lt;&lt; endl;
<a name="l00069"></a>00069    Info(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Start reading begin record from data file...&quot;</span>);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071    <span class="keywordtype">char</span> *mSeek = fMem;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073    RecordHeaderStruct *mHeader = (RecordHeaderStruct*) mSeek;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075    cout &lt;&lt; <span class="stringliteral">&quot;Currently consider record: &quot;</span> &lt;&lt; hex &lt;&lt; mHeader-&gt;type &lt;&lt; <span class="stringliteral">&quot;, len: &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; <span class="stringliteral">&quot; (MEM)&quot;</span> &lt;&lt; endl;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077    <span class="comment">// Take the very first record from the raw data file</span>
<a name="l00078"></a>00078    recordBeginStruct *recBegin = (recordBeginStruct*) fMem;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080    <span class="comment">// We&apos;d better check the record type...</span>
<a name="l00081"></a>00081    <span class="keywordflow">if</span> ( (recBegin-&gt;header.type &amp; REC_TYPEMASK) == REC_BEGIN) {
<a name="l00082"></a>00082       Info(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Found REC_BEGIN record... size: %i&quot;</span>, recBegin-&gt;header.len);
<a name="l00083"></a>00083    } <span class="keywordflow">else</span> {
<a name="l00084"></a>00084       Fatal(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Could not find REC_BEGIN record&quot;</span>);
<a name="l00085"></a>00085    }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087    cout &lt;&lt; <span class="stringliteral">&quot;Begin of data stream version: &quot;</span> &lt;&lt; recBegin-&gt;version &lt;&lt; endl;
<a name="l00088"></a>00088    cout &lt;&lt; <span class="stringliteral">&quot;Comment: &quot;</span>                      &lt;&lt; recBegin-&gt;comment &lt;&lt; endl;
<a name="l00089"></a>00089    time_t       time  = recBegin-&gt;header.timestamp.time;
<a name="l00090"></a>00090    cout &lt;&lt; <span class="stringliteral">&quot;Time Stamp: &quot;</span>                   &lt;&lt; ctime(&amp;time);
<a name="l00091"></a>00091    cout &lt;&lt; <span class="stringliteral">&quot;Unix Time Stamp: &quot;</span>              &lt;&lt; recBegin-&gt;header.timestamp.time &lt;&lt; endl;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aa7860fd7d752b2f63cf7eec5860ef0c9">fStartTime</a>         = recBegin-&gt;header.timestamp.time;
<a name="l00094"></a>00094    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aef4d653f3719267cfe3caf0624b44eb4">fDataFormatVersion</a> = recBegin-&gt;version;
<a name="l00095"></a>00095    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aece8171210d99fe7929a403436b39783">fPolBeam</a>           = (recBegin-&gt;header.type &amp; REC_MASK_BEAM)   &gt;&gt; 16;
<a name="l00096"></a>00096    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a3a4e1ccb2791a251c3c13153978528b3">fPolStream</a>         = (recBegin-&gt;header.type &amp; REC_MASK_STREAM) &gt;&gt; 20;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098    <span class="keywordtype">int</span> polId = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aab2f78996176ec6efc704bdad5a7ec54">GetPolarimeterId</a>(<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aece8171210d99fe7929a403436b39783">fPolBeam</a>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a3a4e1ccb2791a251c3c13153978528b3">fPolStream</a>);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100    <span class="keywordflow">if</span> (polId &lt; 0)
<a name="l00101"></a>00101       Warning(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Cannot read polarimeter ID from data record. Will guess it from file name or user option&quot;</span>);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00104"></a>00104    <span class="comment">// First, try to get polarimeter id from the data</span>
<a name="l00105"></a>00105    <span class="keywordflow">if</span> (polId &gt;= 0) {
<a name="l00106"></a>00106       <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#a249c2a572855179db92ef0cc73c489dd">fPolId</a> = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a39f8897fec12136fab2ad6e95937bf1e">fPolId</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108    <span class="comment">// if failed, get id from the file name</span>
<a name="l00109"></a>00109    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aab2f78996176ec6efc704bdad5a7ec54">GetPolarimeterId</a>() &gt;= 0) {
<a name="l00110"></a>00110       <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#a249c2a572855179db92ef0cc73c489dd">fPolId</a> = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a39f8897fec12136fab2ad6e95937bf1e">fPolId</a>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112    <span class="comment">// see if the polarimeter id was set by command line argument</span>
<a name="l00113"></a>00113    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a39f8897fec12136fab2ad6e95937bf1e">fPolId</a> &gt;= 0) {
<a name="l00114"></a>00114       <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#a249c2a572855179db92ef0cc73c489dd">fPolId</a> = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a39f8897fec12136fab2ad6e95937bf1e">fPolId</a>;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116    } <span class="keywordflow">else</span> { <span class="comment">// cannot proceed</span>
<a name="l00117"></a>00117       Fatal(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Unknown polarimeter ID&quot;</span>);
<a name="l00118"></a>00118    }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120    <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#aa4e8afe9cdf6f8985dfb2ff62d4f50fe">timeStamp</a> = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aa7860fd7d752b2f63cf7eec5860ef0c9">fStartTime</a>; <span class="comment">// should be always defined in raw data</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122    mseMeasInfo.polarimeter_id = <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#a249c2a572855179db92ef0cc73c489dd">fPolId</a>;
<a name="l00123"></a>00123    mysqlpp::DateTime dt(<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aa7860fd7d752b2f63cf7eec5860ef0c9">fStartTime</a>);
<a name="l00124"></a>00124    mseMeasInfo.start_time     = dt;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126    Info(<span class="stringliteral">&quot;ReadRecBegin&quot;</span>, <span class="stringliteral">&quot;Finished reading begin record from data file&quot;</span>);
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00134"></a><a class="code" href="classRawDataReader.html#a177595f3e53e2a498dc04a6c9ca7a376">00134</a> <span class="keywordtype">void</span> <a class="code" href="classRawDataReader.html#a177595f3e53e2a498dc04a6c9ca7a376" title="This method is supposed to read all information about the measurement from raw data...">RawDataReader::ReadMeasInfo</a>(MseMeasInfoX &amp;mseMeasInfo)
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136    cout &lt;&lt; endl;
<a name="l00137"></a>00137    Info(<span class="stringliteral">&quot;ReadMeasInfo&quot;</span>, <span class="stringliteral">&quot;Start reading run info from data file...&quot;</span>);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139    RecordHeaderStruct *mHeader;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141    <span class="keywordtype">char</span> *mSeek = fMem;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143    <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00144"></a>00144    {
<a name="l00145"></a>00145       <span class="keywordflow">if</span> (mSeek &gt; fMem + fMemSize - 1) <span class="keywordflow">break</span>;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147       mHeader = (RecordHeaderStruct*) mSeek;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149       <span class="keywordflow">switch</span>(mHeader-&gt;type &amp; REC_TYPEMASK)
<a name="l00150"></a>00150       {
<a name="l00151"></a>00151       <span class="keywordflow">case</span> REC_BEAMADO:
<a name="l00152"></a>00152       {
<a name="l00153"></a>00153          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_BEAMADO record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155          recordBeamAdoStruct *rec = (recordBeamAdoStruct*) mHeader;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157          <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8b6be1e3dfb4ea4121d1a71c81dd7b94">SetBeamEnergy</a>(rec-&gt;data.beamEnergyM);
<a name="l00158"></a>00158          printf(<span class="stringliteral">&quot;Beam energy: %8.2f\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#ac37cb777d666300244ee463f4192ba9d">GetBeamEnergyReal</a>());
<a name="l00159"></a>00159          printf(<span class="stringliteral">&quot;RHIC beam:   %8d\n&quot;</span>,   <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#aece8171210d99fe7929a403436b39783">fPolBeam</a>);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordBeamAdoStruct&amp;) *rec);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163          <span class="keywordflow">break</span>;
<a name="l00164"></a>00164       }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166       <span class="keywordflow">case</span> REC_MACHINEPARAMS:
<a name="l00167"></a>00167       {
<a name="l00168"></a>00168          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_MACHINEPARAMS record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170          <span class="comment">// Extract voltages, currents, etc</span>
<a name="l00171"></a>00171          RecordMachineParams *rec = (RecordMachineParams*) mHeader;
<a name="l00172"></a>00172          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (RecordMachineParams&amp;) *rec);
<a name="l00173"></a>00173 
<a name="l00174"></a>00174          <span class="keywordflow">break</span>;
<a name="l00175"></a>00175       }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177       <span class="keywordflow">case</span> REC_TARGETPARAMS:
<a name="l00178"></a>00178       {
<a name="l00179"></a>00179          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_TARGETPARAMS record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181          <span class="comment">// Extract target info</span>
<a name="l00182"></a>00182          RecordTargetParams *rec = (RecordTargetParams*) mHeader;
<a name="l00183"></a>00183          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (RecordTargetParams&amp;) *rec);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185          <span class="keywordflow">break</span>;
<a name="l00186"></a>00186       }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188       <span class="keywordflow">case</span> REC_MEASTYPE:
<a name="l00189"></a>00189       {
<a name="l00190"></a>00190          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_MEASTYPE record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192          recordMeasTypeStruct *rec = (recordMeasTypeStruct*) mHeader;
<a name="l00193"></a>00193          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordMeasTypeStruct&amp;) *rec);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195          <span class="keywordflow">break</span>;
<a name="l00196"></a>00196       }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198       <span class="keywordflow">case</span> REC_POLADO:
<a name="l00199"></a>00199       {
<a name="l00200"></a>00200          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_POLADO record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202          recordPolAdoStruct *rec = (recordPolAdoStruct*) mHeader;
<a name="l00203"></a>00203          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordPolAdoStruct&amp;) *rec, mseMeasInfo);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205          <span class="keywordflow">break</span>;
<a name="l00206"></a>00206       }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208       <span class="keywordflow">case</span> REC_PCTARGET:
<a name="l00209"></a>00209       {
<a name="l00210"></a>00210          <span class="comment">// Do not process this record for calibration runs. May contain</span>
<a name="l00211"></a>00211          <span class="comment">// invalid ndelim info</span>
<a name="l00212"></a>00212          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_PCTARGET record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214          recordpCTagAdoStruct *rec = (recordpCTagAdoStruct*) mHeader;
<a name="l00215"></a>00215          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordpCTagAdoStruct&amp;) *rec, mseMeasInfo);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217          <span class="keywordflow">break</span>;
<a name="l00218"></a>00218       }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220       <span class="keywordflow">case</span> REC_WCMADO:
<a name="l00221"></a>00221       {
<a name="l00222"></a>00222          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_WCMADO record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00223"></a>00223 
<a name="l00224"></a>00224          recordWcmAdoStruct *rec = (recordWcmAdoStruct*) mHeader;
<a name="l00225"></a>00225          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordWcmAdoStruct &amp;) *rec);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227          <span class="keywordflow">break</span>;
<a name="l00228"></a>00228       }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230       <span class="keywordflow">case</span> REC_WCM_NEW:
<a name="l00231"></a>00231       {
<a name="l00232"></a>00232          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_WCM_NEW record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234          RecordWcm *rec = (RecordWcm*) mHeader;
<a name="l00235"></a>00235          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (RecordWcm &amp;) *rec);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237          <span class="keywordflow">break</span>;
<a name="l00238"></a>00238       }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240       <span class="keywordflow">case</span> REC_WFDV8SCAL:
<a name="l00241"></a>00241       {
<a name="l00242"></a>00242          <span class="keywordflow">if</span> (fSeenRecords.find(REC_WFDV8SCAL) == fSeenRecords.end())
<a name="l00243"></a>00243          {
<a name="l00244"></a>00244             cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_WFDV8SCAL record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246             recordWFDV8ArrayStruct *rec = (recordWFDV8ArrayStruct*) mHeader;
<a name="l00247"></a>00247             <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordWFDV8ArrayStruct &amp;) *rec);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249             fSeenRecords.insert(REC_WFDV8SCAL);
<a name="l00250"></a>00250          }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252          <span class="keywordflow">break</span>;
<a name="l00253"></a>00253       }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255       <span class="keywordflow">case</span> REC_COUNTRATE:
<a name="l00256"></a>00256       {
<a name="l00257"></a>00257          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_COUNTRATE record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259          recordCountRate *rec = (recordCountRate*) mHeader;
<a name="l00260"></a>00260          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordCountRate &amp;) *rec);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262          <span class="keywordflow">break</span>;
<a name="l00263"></a>00263       }
<a name="l00264"></a>00264 
<a name="l00265"></a>00265       <span class="keywordflow">case</span> REC_RHIC_CONF:
<a name="l00266"></a>00266       {
<a name="l00267"></a>00267          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_RHIC_CONF record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269          recordConfigRhicStruct *rec = (recordConfigRhicStruct*) mHeader;
<a name="l00270"></a>00270          <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>( (recordConfigRhicStruct &amp;) *rec);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272          <span class="keywordflow">break</span>;
<a name="l00273"></a>00273       }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275       <span class="keywordflow">case</span> REC_TAGADO:
<a name="l00276"></a>00276       {
<a name="l00277"></a>00277          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_TAGADO record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279          <span class="keywordflow">break</span>;
<a name="l00280"></a>00280       }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282       <span class="keywordflow">case</span> REC_SCALERS:
<a name="l00283"></a>00283       {
<a name="l00284"></a>00284          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_SCALERS record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00285"></a>00285          <span class="comment">//recordScalersStruct *rec = (recordScalersStruct*) mHeader;</span>
<a name="l00286"></a>00286          <span class="comment">//ProcessRecord( (recordScalersStruct &amp;) *rec);</span>
<a name="l00287"></a>00287          Info(<span class="stringliteral">&quot;ReadMeasInfo&quot;</span>, <span class="stringliteral">&quot;Not implemented yet&quot;</span>);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289          <span class="keywordflow">break</span>;
<a name="l00290"></a>00290       }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292       <span class="keywordflow">case</span> REC_READRAW:
<a name="l00293"></a>00293       {
<a name="l00294"></a>00294          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_READRAW record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00295"></a>00295          Info(<span class="stringliteral">&quot;ReadMeasInfo&quot;</span>, <span class="stringliteral">&quot;Not implemented yet&quot;</span>);
<a name="l00296"></a>00296 
<a name="l00297"></a>00297          <span class="keywordflow">break</span>;
<a name="l00298"></a>00298       }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300       <span class="keywordflow">case</span> REC_END:
<a name="l00301"></a>00301       {
<a name="l00302"></a>00302          cout &lt;&lt; <span class="stringliteral">&quot;Reading REC_END record... size = &quot;</span> &lt;&lt; mHeader-&gt;len &lt;&lt; endl;
<a name="l00303"></a>00303          recordEndStruct *rec = (recordEndStruct*) mHeader;
<a name="l00304"></a>00304          <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a447535b14613b582a8df97b130d9076d">fStopTime</a> = rec-&gt;header.timestamp.time;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306          <span class="keywordflow">break</span>;
<a name="l00307"></a>00307       }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309       <span class="keywordflow">case</span> REC_READSUB:
<a name="l00310"></a>00310       <span class="keywordflow">case</span> REC_READALL:
<a name="l00311"></a>00311       <span class="keywordflow">default</span>:
<a name="l00312"></a>00312          <span class="keywordflow">break</span>;
<a name="l00313"></a>00313       }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315       mSeek = mSeek + mHeader-&gt;len;
<a name="l00316"></a>00316    }
<a name="l00317"></a>00317 }
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 
<a name="l00321"></a><a class="code" href="classRawDataReader.html#a36e409b169bb4e355fa5ea0d665a4613">00321</a> <span class="keywordtype">void</span> <a class="code" href="classRawDataReader.html#a36e409b169bb4e355fa5ea0d665a4613">RawDataReader::ReadDataPassOne</a>(MseMeasInfoX &amp;mseMeasInfo)
<a name="l00322"></a>00322 {
<a name="l00323"></a>00323    cout &lt;&lt; endl;
<a name="l00324"></a>00324    Info(<span class="stringliteral">&quot;ReadDataPassOne&quot;</span>, <span class="stringliteral">&quot;Start reading events from data file...&quot;</span>);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a> = 0;
<a name="l00327"></a>00327    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>     = 0;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329    RecordHeaderStruct *mHeader;
<a name="l00330"></a>00330    <span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek = fMem;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
<a name="l00333"></a>00333 
<a name="l00334"></a>00334       <span class="keywordflow">if</span> (mSeek &gt; fMem + fMemSize - 1) <span class="keywordflow">break</span>;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336       mHeader = (RecordHeaderStruct*) mSeek;
<a name="l00337"></a>00337 
<a name="l00338"></a>00338       <span class="keywordflow">if</span> ((mHeader-&gt;type &amp; REC_TYPEMASK) == REC_READAT)
<a name="l00339"></a>00339       {
<a name="l00340"></a>00340          ProcessRecordATPassOne(mSeek, mHeader);
<a name="l00341"></a>00341       }
<a name="l00342"></a>00342       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((mHeader-&gt;type &amp; REC_TYPEMASK) == REC_READLONG)
<a name="l00343"></a>00343       {
<a name="l00344"></a>00344          ProcessRecordLongPassOne(mSeek, mHeader);
<a name="l00345"></a>00345       }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347       mSeek = mSeek + mHeader-&gt;len;
<a name="l00348"></a>00348    }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350    printf(<span class="stringliteral">&quot;Total events read:      %12u\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>);
<a name="l00351"></a>00351    printf(<span class="stringliteral">&quot;Total events processed: %12u\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a361d70474063287981041b71370780de" title="Calculates the phase of the AC dipole marker in the data with respect to the first...">CalcSpinFlipperPhase</a>();
<a name="l00354"></a>00354 
<a name="l00355"></a>00355    <span class="comment">// Save info into database global object</span>
<a name="l00356"></a>00356    mseMeasInfo.stop_time         = mysqlpp::DateTime(<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a447535b14613b582a8df97b130d9076d">fStopTime</a>);
<a name="l00357"></a>00357    mseMeasInfo.nevents_total     = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>;
<a name="l00358"></a>00358    mseMeasInfo.nevents_processed = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>;
<a name="l00359"></a>00359 }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 
<a name="l00363"></a><a class="code" href="classRawDataReader.html#a3d087f8080c2a8346083af4933ca26d8">00363</a> <span class="keywordtype">void</span> <a class="code" href="classRawDataReader.html#a3d087f8080c2a8346083af4933ca26d8" title="Read loop routine.">RawDataReader::ReadDataPassTwo</a>(MseMeasInfoX &amp;mseMeasInfo)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365    cout &lt;&lt; endl;
<a name="l00366"></a>00366    Info(<span class="stringliteral">&quot;ReadDataPassTwo&quot;</span>, <span class="stringliteral">&quot;Start reading events from data file...&quot;</span>);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a> = 0;
<a name="l00369"></a>00369    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>     = 0;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371    RecordHeaderStruct *mHeader;
<a name="l00372"></a>00372    <span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek = fMem;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
<a name="l00375"></a>00375 
<a name="l00376"></a>00376       <span class="keywordflow">if</span> (mSeek &gt; fMem + fMemSize - 1) <span class="keywordflow">break</span>;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378       mHeader = (RecordHeaderStruct*) mSeek;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380       <span class="keywordflow">if</span> ((mHeader-&gt;type &amp; REC_TYPEMASK) == REC_READAT)
<a name="l00381"></a>00381       {
<a name="l00382"></a>00382          ProcessRecordATPassTwo(mSeek, mHeader);
<a name="l00383"></a>00383       }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385       mSeek = mSeek + mHeader-&gt;len;
<a name="l00386"></a>00386    }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388    <span class="comment">// Post processing</span>
<a name="l00389"></a>00389    <span class="keywordflow">if</span> ( <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a913d1d1e1f03608a77aeff566366426e">HasNormalBit</a>() )
<a name="l00390"></a>00390    {
<a name="l00391"></a>00391       <a class="code" href="classAsymCalculator.html#a2ec492f97f25ed5a57680e198373e939">AsymCalculator::CalcStatistics</a>();
<a name="l00392"></a>00392 
<a name="l00393"></a>00393       <span class="comment">// Energy Yeild Weighted Average Analyzing Power</span>
<a name="l00394"></a>00394       <a class="code" href="AsymCommon_8cxx.html#a3cac8aa10cf34ae7bf0818af15ce3c4a">gAnaMeasResult</a>-&gt;<a class="code" href="classAnaMeasResult.html#a3e908565210653f125f98aeae4371162">A_N</a>[1] = <a class="code" href="classAsymCalculator.html#a7f5a4206f6096a4c163cc4b93b140c90">AsymCalculator::WeightAnalyzingPower</a>(10050); <span class="comment">// banana cut in energy spectra</span>
<a name="l00395"></a>00395 
<a name="l00396"></a>00396       <a class="code" href="classAsymCalculator.html#a59a6dd96adc7487eea4ea3a7b5984142">AsymCalculator::PrintWarning</a>();
<a name="l00397"></a>00397       <a class="code" href="classAsymCalculator.html#a9b93df23a1297c633a521b3d26a50abf">AsymCalculator::PrintRunResults</a>();
<a name="l00398"></a>00398    }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400    printf(<span class="stringliteral">&quot;End of data stream \n&quot;</span>);
<a name="l00401"></a>00401    printf(<span class="stringliteral">&quot;End time: %s\n&quot;</span>, ctime(&amp;<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a447535b14613b582a8df97b130d9076d">fStopTime</a>));
<a name="l00402"></a>00402    printf(<span class="stringliteral">&quot;Total events read:      %12u\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>);
<a name="l00403"></a>00403    printf(<span class="stringliteral">&quot;Total events processed: %12u\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>);
<a name="l00404"></a>00404 
<a name="l00405"></a>00405    <span class="comment">// Save info into database global object</span>
<a name="l00406"></a>00406    mseMeasInfo.stop_time         = mysqlpp::DateTime(<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a447535b14613b582a8df97b130d9076d">fStopTime</a>);
<a name="l00407"></a>00407    mseMeasInfo.nevents_total     = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a>;
<a name="l00408"></a>00408    mseMeasInfo.nevents_processed = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410    <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#ab8eddaa7b7eeae958f2b69d2cf5e6a45">HasAlphaBit</a>())
<a name="l00411"></a>00411       mseMeasInfo.beam_energy = 0;
<a name="l00412"></a>00412    <span class="keywordflow">else</span>
<a name="l00413"></a>00413       mseMeasInfo.beam_energy = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#ac37cb777d666300244ee463f4192ba9d">GetBeamEnergyReal</a>();
<a name="l00414"></a>00414 }
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 
<a name="l00418"></a><a class="code" href="RawDataReader_8h.html#a9766258abe4acf62ac6c5dd523509e0a">00418</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a9766258abe4acf62ac6c5dd523509e0a">UpdateRunConst</a>(TRecordConfigRhicStruct *ci)
<a name="l00419"></a>00419 {
<a name="l00420"></a>00420    <span class="keywordflow">if</span> (!ci) <span class="keywordflow">return</span>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422    <span class="keywordtype">float</span> Ct = ci-&gt;data.WFDTUnit/2.; <span class="comment">// Determine the TDC count unit (ns/channel)</span>
<a name="l00423"></a>00423    <span class="keywordtype">float</span> L  = ci-&gt;data.TOFLength;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425    <span class="keywordflow">for</span> (UShort_t i=1; i&lt;=ci-&gt;data.NumChannels; i++) {
<a name="l00426"></a>00426 
<a name="l00427"></a>00427       <span class="comment">// XXX  It is wrong to comment the next 4 lines but it is better to be stable</span>
<a name="l00428"></a>00428       <span class="comment">// We are covering mistake made at the begining of the run 13 by using the default distance of 18 cm</span>
<a name="l00429"></a>00429       <span class="comment">// Change back for final analysis of run 13 data !!!</span>
<a name="l00430"></a>00430       <span class="comment">//if (gMeasInfo-&gt;fDataFormatVersion == 40200 ) // &gt;= Run 11 version</span>
<a name="l00431"></a>00431       <span class="comment">//{</span>
<a name="l00432"></a>00432       <span class="comment">//   L = ci-&gt;data.chan[i-1].TOFLength;</span>
<a name="l00433"></a>00433       <span class="comment">//} else</span>
<a name="l00434"></a>00434          L = <a class="code" href="AsymHeader_8h.html#a267051c04bff7f77fa83116ac1327853">CARBON_PATH_DISTANCE</a>;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436       <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>[i] = <a class="code" href="classRunConst.html">RunConst</a>(L, Ct);
<a name="l00437"></a>00437    }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439    <span class="comment">// Set values for 0th channel to the average ones</span>
<a name="l00440"></a>00440    Float_t sumL      = 0;
<a name="l00441"></a>00441    UInt_t  nChannels = 0;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443    map&lt;UShort_t, RunConst&gt;::iterator irc = <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>.begin();
<a name="l00444"></a>00444 
<a name="l00445"></a>00445    <span class="keywordflow">for</span> (; irc!=<a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>.end(); ++irc) {
<a name="l00446"></a>00446       <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#af75df2eac2c44ebf9ba6ad13b5794c09">IsSiliconChannel</a>(irc-&gt;first)) {
<a name="l00447"></a>00447          sumL += irc-&gt;second.L;
<a name="l00448"></a>00448          nChannels++;
<a name="l00449"></a>00449       }
<a name="l00450"></a>00450    }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452    <span class="keywordtype">float</span> avrgL = nChannels &gt; 0 ? sumL / nChannels : <a class="code" href="AsymHeader_8h.html#a267051c04bff7f77fa83116ac1327853">CARBON_PATH_DISTANCE</a>;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454    <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>[0] = <a class="code" href="classRunConst.html">RunConst</a>(avrgL, Ct);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456    printf(<span class="stringliteral">&quot;\nAverage RunConst:\n&quot;</span>);
<a name="l00457"></a>00457    <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>[0].Print();
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 
<a name="l00465"></a><a class="code" href="RawDataReader_8h.html#a832e4ba05dbb29eca8114d60edaaf025">00465</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a3c6ecf8b548aab4250c3a2bfc847eb71" title="Decorde target infomation.">DecodeTargetID</a>(<span class="keyword">const</span> polDataStruct &amp;poldat, MseMeasInfoX &amp;mseMeasInfo)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467    cout &lt;&lt; endl;
<a name="l00468"></a>00468    cout &lt;&lt; <span class="stringliteral">&quot;target ID = &quot;</span> &lt;&lt; poldat.targetIdS &lt;&lt; endl;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470    <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>.<a class="code" href="classDbEntry.html#a4d11ef188d3919633985228506a9b516">fFields</a>[<span class="stringliteral">&quot;TARGET_ID&quot;</span>] = poldat.targetIdS;
<a name="l00471"></a>00471 
<a name="l00472"></a>00472    <span class="comment">// initiarization</span>
<a name="l00473"></a>00473    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;-&apos;</span>;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475    <span class="keywordtype">string</span> str(poldat.targetIdS);
<a name="l00476"></a>00476 
<a name="l00477"></a>00477    <span class="keywordflow">if</span> (str.find(<span class="stringliteral">&quot;Background&quot;</span>) &lt; str.size())   <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;B&apos;</span>;
<a name="l00478"></a>00478    if (str.find(<span class="stringliteral">&quot;1&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;1&apos;</span>;
<a name="l00479"></a>00479    if (str.find(<span class="stringliteral">&quot;2&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;2&apos;</span>;
<a name="l00480"></a>00480    if (str.find(<span class="stringliteral">&quot;3&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;3&apos;</span>;
<a name="l00481"></a>00481    if (str.find(<span class="stringliteral">&quot;4&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;4&apos;</span>;
<a name="l00482"></a>00482    if (str.find(<span class="stringliteral">&quot;5&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;5&apos;</span>;
<a name="l00483"></a>00483    if (str.find(<span class="stringliteral">&quot;6&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;6&apos;</span>;
<a name="l00484"></a>00484    if (str.find(<span class="stringliteral">&quot;7&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;7&apos;</span>;
<a name="l00485"></a>00485    if (str.find(<span class="stringliteral">&quot;8&quot;</span>)         == str.size()-1) <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a> = <span class="charliteral">&apos;-&apos;</span>;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487    if (str.find(<span class="charliteral">&apos;V&apos;</span>) != string::npos) {
<a name="l00488"></a>00488       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a27f916722c16f6887ccb26c0d7027c89">fTargetOrient</a> = <span class="charliteral">&apos;V&apos;</span>;
<a name="l00489"></a>00489       mseMeasInfo.target_orient       = <span class="charliteral">&apos;V&apos;</span>;
<a name="l00490"></a>00490    }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492    <span class="keywordflow">if</span> (str.find(<span class="charliteral">&apos;H&apos;</span>) != string::npos) {
<a name="l00493"></a>00493       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a27f916722c16f6887ccb26c0d7027c89">fTargetOrient</a> = <span class="charliteral">&apos;H&apos;</span>;
<a name="l00494"></a>00494       mseMeasInfo.target_orient       = <span class="charliteral">&apos;H&apos;</span>;
<a name="l00495"></a>00495    }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497    stringstream sstr;
<a name="l00498"></a>00498    sstr &lt;&lt; <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8980ad2badcaa4b372a65e16f47c9a30">fTargetId</a>;
<a name="l00499"></a>00499    sstr &gt;&gt; mseMeasInfo.target_id;
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordLongPassOne(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504    <span class="comment">// This function does very basic processing of the HJet full waveform from REC_READLONG record.</span>
<a name="l00505"></a>00505 
<a name="l00506"></a>00506    <span class="keyword">const</span> <span class="keywordtype">char</span> *p = mSeek + <span class="keyword">sizeof</span>(RecordHeaderStruct);
<a name="l00507"></a>00507 
<a name="l00508"></a>00508    <span class="keywordtype">unsigned</span>  wfLen = (<a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>-&gt;data.JetDelay &amp; 0xFF) * 6; <span class="comment">// waveform length in points</span>
<a name="l00509"></a>00509    <span class="keywordtype">unsigned</span>  evLen = <span class="keyword">sizeof</span>(longWaveStruct) - 1 + wfLen;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511    <span class="keywordflow">while</span>(p != mSeek + mHeader-&gt;len)
<a name="l00512"></a>00512    {
<a name="l00513"></a>00513       <span class="keyword">const</span>     recordLongWaveStruct      *longWave = (<span class="keyword">const</span> recordLongWaveStruct*)p;
<a name="l00514"></a>00514       <span class="keywordtype">unsigned</span>  chId = longWave-&gt;subhead.siNum;
<a name="l00515"></a>00515       <span class="keywordtype">unsigned</span>  nEvents = longWave-&gt;subhead.Events + 1;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517       <span class="comment">// cnipol has number of strips hardcoded in many places</span>
<a name="l00518"></a>00518       <span class="comment">// HJet has more strips so will have to drop some</span>
<a name="l00519"></a>00519       <span class="keywordflow">if</span> (chId &lt; <a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>)
<a name="l00520"></a>00520       {
<a name="l00521"></a>00521          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iEvent = 0; iEvent &lt; nEvents; iEvent++)
<a name="l00522"></a>00522          {
<a name="l00523"></a>00523             <span class="keyword">const</span> longWaveStruct *<span class="keyword">event</span> = (<span class="keyword">const</span> longWaveStruct*)&amp;longWave-&gt;data[evLen * iEvent];
<a name="l00524"></a>00524             ATStruct       atEmu;
<a name="l00525"></a>00525 
<a name="l00526"></a>00526             <span class="comment">// Here we only fill in amplitude value. This will be enough to do alpha calib&apos;s.</span>
<a name="l00527"></a>00527             <span class="keywordtype">long</span> delim = 0;
<a name="l00528"></a>00528             atEmu.rev = 0;
<a name="l00529"></a>00529             atEmu.rev0 = 0;
<a name="l00530"></a>00530             atEmu.b = 0;
<a name="l00531"></a>00531             atEmu.a = 0;
<a name="l00532"></a>00532             atEmu.s = 0;
<a name="l00533"></a>00533             atEmu.t = 0;
<a name="l00534"></a>00534             atEmu.tmax = 0;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536             <span class="keywordtype">int</span> amp = 0;
<a name="l00537"></a>00537             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i = 0; i &lt; wfLen; i++)
<a name="l00538"></a>00538             {
<a name="l00539"></a>00539                <span class="keywordtype">int</span> val = <span class="keyword">event</span>-&gt;d[i] - V10BASELINE;
<a name="l00540"></a>00540                <span class="keywordflow">if</span> (val &gt; amp)
<a name="l00541"></a>00541                {
<a name="l00542"></a>00542                   amp = val;
<a name="l00543"></a>00543                }
<a name="l00544"></a>00544             }
<a name="l00545"></a>00545             atEmu.a = amp;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547             <span class="comment">// Now feed our emulated structure into cnipol&apos;s data flow.</span>
<a name="l00548"></a>00548             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a21b41e8cc022c2618c724f37c31b1e38" title="Sets current event with data from raw file.">SetChannelEvent</a>(atEmu, delim, chId);
<a name="l00549"></a>00549             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a3affa9a9a8bff0c71e461503c432f39e">UpdateFromChannelEvent</a>();
<a name="l00550"></a>00550             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a05c313b6cf9c0e0ebf0aa7706d8e91dc">FillPassOne</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a667c52502c589b0b0854efbe768e667b">kCUT_PASSONE</a>);
<a name="l00551"></a>00551          }
<a name="l00552"></a>00552       }
<a name="l00553"></a>00553 
<a name="l00554"></a>00554       p += <span class="keyword">sizeof</span>(subheadStruct) + nEvents * evLen;
<a name="l00555"></a>00555       <span class="keywordflow">if</span> (p &gt; mSeek + mHeader-&gt;len)
<a name="l00556"></a>00556       {
<a name="l00557"></a>00557          Error(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;corrupted record&quot;</span>);
<a name="l00558"></a>00558       }
<a name="l00559"></a>00559    }
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordATPassOne(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader)
<a name="l00563"></a>00563 {
<a name="l00564"></a>00564    <span class="comment">// We are here if rec type is REC_READAT</span>
<a name="l00565"></a>00565    <span class="keywordtype">long</span>    delim   = mHeader-&gt;timestamp.delim;
<a name="l00566"></a>00566    <span class="keywordtype">size_t</span>  recSize = mHeader-&gt;len - <span class="keyword">sizeof</span>(RecordHeaderStruct);
<a name="l00567"></a>00567    <span class="keyword">const</span> <span class="keywordtype">char</span> *mSeekAT = mSeek + <span class="keyword">sizeof</span>(RecordHeaderStruct);
<a name="l00568"></a>00568 
<a name="l00569"></a>00569    <span class="keywordflow">for</span> (UInt_t i=0; i&lt;recSize; )
<a name="l00570"></a>00570    {
<a name="l00571"></a>00571       recordReadATStruct *ATPtr   = (recordReadATStruct*) (mSeekAT + i);
<a name="l00572"></a>00572       <span class="keywordtype">unsigned</span> chId    = ATPtr-&gt;subhead.siNum; <span class="comment">// si number</span>
<a name="l00573"></a>00573       <span class="keywordtype">unsigned</span> nEvents = ATPtr-&gt;subhead.Events + 1;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575       <span class="comment">// count the total number of event records in raw file</span>
<a name="l00576"></a>00576       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a> += nEvents;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578       i += <span class="keyword">sizeof</span>(subheadStruct) + nEvents*<span class="keyword">sizeof</span>(ATStruct);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iEvent=0; iEvent&lt;nEvents; iEvent++)
<a name="l00581"></a>00581       {
<a name="l00582"></a>00582          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afbd371d36fb322376601a4ae6f444285">fMaxEventsUser</a> &gt; 0 &amp;&amp; <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a> &gt;= <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afbd371d36fb322376601a4ae6f444285">fMaxEventsUser</a>) <span class="keywordflow">break</span>;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584          <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a21b41e8cc022c2618c724f37c31b1e38" title="Sets current event with data from raw file.">SetChannelEvent</a>(ATPtr-&gt;data[iEvent], delim, chId);
<a name="l00585"></a>00585          <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a3affa9a9a8bff0c71e461503c432f39e">UpdateFromChannelEvent</a>();
<a name="l00586"></a>00586 
<a name="l00587"></a>00587          <span class="comment">// Use only a fraction of events</span>
<a name="l00588"></a>00588          <span class="keywordflow">if</span> (gRandom-&gt;Rndm() &gt; <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afc018711f4a2d24482bd211bcdeeabee">fThinout</a>) <span class="keywordflow">continue</span>;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590          <span class="keywordflow">if</span> ( <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a0bd0ba99bd90db90e40f4180d42c9ee9" title="Returns true for silicon channels.">PassCutSiliconChannel</a>() )
<a name="l00591"></a>00591          {
<a name="l00592"></a>00592             <span class="comment">// Fill hists with raw data</span>
<a name="l00593"></a>00593             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a05c313b6cf9c0e0ebf0aa7706d8e91dc">FillPassOne</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a667c52502c589b0b0854efbe768e667b">kCUT_PASSONE</a>);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595             <span class="comment">// Use data from empty bunches to fill corresponding histograms</span>
<a name="l00596"></a>00596             <span class="keywordflow">if</span> ( <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a26aa0853e45f8f925e7d9aef15b32c13">PassCutEmptyBunch</a>() )
<a name="l00597"></a>00597                <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a05c313b6cf9c0e0ebf0aa7706d8e91dc">FillPassOne</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a2da4100339efca237209db8884ef0059">kCUT_PASSONE_RAW_EB</a>);
<a name="l00598"></a>00598          }
<a name="l00599"></a>00599 
<a name="l00600"></a>00600          <span class="keywordflow">if</span> ( <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a4ad3ea8e383e4ce4a2d49d2d1b424ec6">HasPmtBit</a>() &amp;&amp; <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#ad1198cb35281780a5c32794c91394177">PassCutPmtChannel</a>() )
<a name="l00601"></a>00601          {
<a name="l00602"></a>00602             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a05c313b6cf9c0e0ebf0aa7706d8e91dc">FillPassOne</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a063e5cfb0ac26251c80cf8c19f1df068">kCUT_PASSONE_PMT</a>);
<a name="l00603"></a>00603          }
<a name="l00604"></a>00604 
<a name="l00605"></a>00605          <span class="keywordflow">if</span> ( <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#ada1a7a4fea531b19a0986376e7c81c24">HasStudiesBit</a>() &amp;&amp; <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a075271be169758268abca80cc1e72ec3">IsSpinFlipperMarkerChannel</a>() )
<a name="l00606"></a>00606          {
<a name="l00607"></a>00607             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a16edbd15c0020213075f27c91c4899ef">AddSpinFlipperMarker</a>();
<a name="l00608"></a>00608          }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610          <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>++;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>%50000 == 0)
<a name="l00613"></a>00613          {
<a name="l00614"></a>00614             printf(<span class="stringliteral">&quot;%s: Pass 1: Processed events %u\r&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a3c1f76ce727f78fba9259e8d4c4de1df">GetRunName</a>().c_str(), <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>);
<a name="l00615"></a>00615             fflush(stdout);
<a name="l00616"></a>00616          }
<a name="l00617"></a>00617       }
<a name="l00618"></a>00618    }
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="keyword">static</span> <span class="keywordtype">void</span> ProcessRecordATPassTwo(<span class="keyword">const</span> <span class="keywordtype">char</span> *mSeek, RecordHeaderStruct *mHeader)
<a name="l00622"></a>00622 {
<a name="l00623"></a>00623    <span class="comment">// We are here if rec type is REC_READAT</span>
<a name="l00624"></a>00624    <span class="keywordtype">long</span>    delim   = mHeader-&gt;timestamp.delim;
<a name="l00625"></a>00625    <span class="keywordtype">size_t</span>  recSize = mHeader-&gt;len - <span class="keyword">sizeof</span>(RecordHeaderStruct);
<a name="l00626"></a>00626    <span class="keyword">const</span> <span class="keywordtype">char</span> *mSeekAT = mSeek + <span class="keyword">sizeof</span>(RecordHeaderStruct);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628    <span class="keywordflow">for</span> (UInt_t i=0; i&lt;recSize; )
<a name="l00629"></a>00629    {
<a name="l00630"></a>00630       recordReadATStruct *ATPtr   = (recordReadATStruct*) (mSeekAT + i);
<a name="l00631"></a>00631       <span class="keywordtype">unsigned</span> chId    = ATPtr-&gt;subhead.siNum; <span class="comment">// si number</span>
<a name="l00632"></a>00632       <span class="keywordtype">unsigned</span> nEvents = ATPtr-&gt;subhead.Events + 1;
<a name="l00633"></a>00633 
<a name="l00634"></a>00634       <span class="comment">// count the total number of event records in raw file</span>
<a name="l00635"></a>00635       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a4e901940e886805ce44a561cd042d35e">fNEventsTotal</a> += nEvents;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637       i += <span class="keyword">sizeof</span>(subheadStruct) + nEvents*<span class="keyword">sizeof</span>(ATStruct);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iEvent=0; iEvent&lt;nEvents; iEvent++)
<a name="l00640"></a>00640       {
<a name="l00641"></a>00641          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afbd371d36fb322376601a4ae6f444285">fMaxEventsUser</a> &gt; 0 &amp;&amp; <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a> &gt;= <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afbd371d36fb322376601a4ae6f444285">fMaxEventsUser</a>) <span class="keywordflow">break</span>;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643          <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a21b41e8cc022c2618c724f37c31b1e38" title="Sets current event with data from raw file.">SetChannelEvent</a>(ATPtr-&gt;data[iEvent], delim, chId);
<a name="l00644"></a>00644 
<a name="l00645"></a>00645          <span class="comment">// Use only a fraction of events</span>
<a name="l00646"></a>00646          <span class="keywordflow">if</span> (gRandom-&gt;Rndm() &gt; <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afc018711f4a2d24482bd211bcdeeabee">fThinout</a>) <span class="keywordflow">continue</span>;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648          <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>++;
<a name="l00649"></a>00649 
<a name="l00650"></a>00650          <span class="comment">// Finer Target Position Resolution by counting stepping moter</span>
<a name="l00651"></a>00651          <span class="comment">// This feature became available after Run06</span>
<a name="l00652"></a>00652          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a0bbbc6dd205f8d4adda4cf80996686f5" title="AC dipole magnet period in revolutions.">fRunId</a> &gt;= 6) {
<a name="l00653"></a>00653             <a class="code" href="AsymCommon_8cxx.html#a00270720a6e768db4d7fb23dd4626626">cntr</a>.<a class="code" href="structStructCounter.html#a0b14eae72e244c7b096be2edf045bb95">revolution</a> = <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a3a9fef14ca278137cf2ecb6e0fe12ae6">GetRevolutionId</a>();
<a name="l00654"></a>00654 
<a name="l00655"></a>00655             <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a00270720a6e768db4d7fb23dd4626626">cntr</a>.<a class="code" href="structStructCounter.html#a0b14eae72e244c7b096be2edf045bb95">revolution</a> &gt; <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#ac64aa06ebd3e5bfe619aa5eecd856dd2">MaxRevolution</a>)
<a name="l00656"></a>00656                <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#ac64aa06ebd3e5bfe619aa5eecd856dd2">MaxRevolution</a> = <a class="code" href="AsymCommon_8cxx.html#a00270720a6e768db4d7fb23dd4626626">cntr</a>.<a class="code" href="structStructCounter.html#a0b14eae72e244c7b096be2edf045bb95">revolution</a>;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658             <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a9af7b7152cf14feb4183e7552cd31513">GetChannelId</a>() == 73 &amp;&amp; delim != <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a362c82529d3e7edbe78035318911ee9b">eventID</a>) {
<a name="l00659"></a>00659                <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#acf9769ee588990e328c3f9c806f9b92c">x</a> += <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a> * (float) <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ab1f53982c82c4ab40b2fa933491cf5d0">vector</a>;
<a name="l00660"></a>00660                <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ab1f53982c82c4ab40b2fa933491cf5d0">vector</a>=-1;
<a name="l00661"></a>00661             }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663             <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a9af7b7152cf14feb4183e7552cd31513">GetChannelId</a>() == 73 || <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a9af7b7152cf14feb4183e7552cd31513">GetChannelId</a>() == 74) {
<a name="l00664"></a>00664                 <span class="keywordflow">switch</span> (<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a9af7b7152cf14feb4183e7552cd31513">GetChannelId</a>()) {
<a name="l00665"></a>00665                 <span class="keywordflow">case</span> 73:
<a name="l00666"></a>00666                     <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a362c82529d3e7edbe78035318911ee9b">eventID</a> = delim;
<a name="l00667"></a>00667                     ++<a class="code" href="AsymCommon_8cxx.html#a00270720a6e768db4d7fb23dd4626626">cntr</a>.<a class="code" href="structStructCounter.html#afd687e48a7a307bc7f6324ab46c85e38">tgtMotion</a>;
<a name="l00668"></a>00668                     <span class="keywordflow">break</span>;
<a name="l00669"></a>00669                 <span class="keywordflow">case</span> 74:
<a name="l00670"></a>00670                     <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ab1f53982c82c4ab40b2fa933491cf5d0">vector</a> = 1;
<a name="l00671"></a>00671                     <span class="keywordflow">break</span>;
<a name="l00672"></a>00672                 }
<a name="l00673"></a>00673             }
<a name="l00674"></a>00674          }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#afc055eace8e7d1f04a4b4a3faaeaae12">fSaveTrees</a>.any()) { <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a8e5c81c1325c41d808c78127c40310ba">AddChannelEvent</a>(); }
<a name="l00677"></a>00677 
<a name="l00678"></a>00678          <span class="comment">// Fill target histograms</span>
<a name="l00679"></a>00679          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#aad68a1018b9590d3cf820b3388cd9c19">HasTargetBit</a>() &amp;&amp; <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#accf3cbfbb590009b11db9a1bad50b1b0">PassCutTargetChannel</a>())
<a name="l00680"></a>00680          {
<a name="l00681"></a>00681             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a30e2a1071c81fc207e74743e27d4f771">fHists</a>-&gt;<a class="code" href="classDrawObjContainer.html#ae762b02a32ea3f1684da098342b93149">d</a>[<span class="stringliteral">&quot;targets&quot;</span>]-&gt;Fill(<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>);
<a name="l00682"></a>00682          }
<a name="l00683"></a>00683 
<a name="l00684"></a>00684          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a913d1d1e1f03608a77aeff566366426e">HasNormalBit</a>() &amp;&amp;
<a name="l00685"></a>00685              <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a0bd0ba99bd90db90e40f4180d42c9ee9" title="Returns true for silicon channels.">PassCutSiliconChannel</a>() &amp;&amp;
<a name="l00686"></a>00686              <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a84207afd5dfe7adfad44012405525c40">PassCutKinEnergyAEDepend</a>() &amp;&amp;
<a name="l00687"></a>00687              <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a5de8f34eafd7910ada057b0348066f93">PassCutEnabledChannel</a>() )
<a name="l00688"></a>00688          {
<a name="l00689"></a>00689             <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ac3b09be7513e527875c27541d66e8b61">Fill</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a05f8bf7cb92b44ea11d92f96c89c40aa">kCUT_NOISE</a>);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691             <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad2c8972e4325a77b435dd22698d8a00d">fChannelEvent</a>-&gt;<a class="code" href="classChannelEvent.html#a034312dee3d5dbdb67a75f0e1d9c3562">PassCutCarbonMass</a>())
<a name="l00692"></a>00692                <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ac3b09be7513e527875c27541d66e8b61">Fill</a>(<a class="code" href="AsymRoot_8h.html#a262fef3e8d06e598e6dbf6ffb6c02540a782ab3519049ae887a76abe4e6cc879f">kCUT_CARBON</a>);
<a name="l00693"></a>00693          }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>%50000 == 0)
<a name="l00696"></a>00696          {
<a name="l00697"></a>00697             printf(<span class="stringliteral">&quot;%s: Pass 2: Processed events %u\r&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a3c1f76ce727f78fba9259e8d4c4de1df">GetRunName</a>().c_str(), <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a6c1c95bf0b355415a3f1e8746d9e277a">fNEventsProcessed</a>);
<a name="l00698"></a>00698             fflush(stdout);
<a name="l00699"></a>00699          }
<a name="l00700"></a>00700       }
<a name="l00701"></a>00701    }
<a name="l00702"></a>00702 }
<a name="l00703"></a>00703 
<a name="l00705"></a><a class="code" href="RawDataReader_8cxx.html#aad58fcf342cad0923d0f260c198fa816">00705</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#aad58fcf342cad0923d0f260c198fa816">ProcessRecordPCTarget</a>(<span class="keyword">const</span> pCTargetStruct *rec, MseMeasInfoX &amp;mseMeasInfo)
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707    <span class="keyword">const</span> pCTargetStruct* <a class="code" href="AsymCommon_8cxx.html#a011ee8c5bd42d608ae617226320053ab">pointer</a> = rec;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709    <span class="comment">// copy data to a linear array</span>
<a name="l00710"></a>00710    Double_t* linRec = <span class="keyword">new</span> Double_t[<a class="code" href="AsymCommon_8cxx.html#a43303003e8062befcb962e491ea64985">gNDelimeters</a>*4 + 8]; <span class="comment">// there 2 under and ooverflow bins</span>
<a name="l00711"></a>00711 
<a name="l00712"></a>00712    <span class="keywordflow">for</span> (Int_t k=0; k&lt;<a class="code" href="AsymCommon_8cxx.html#a43303003e8062befcb962e491ea64985">gNDelimeters</a>; k++) {
<a name="l00713"></a>00713       *(linRec + k + 1                 ) = pointer-&gt;VertLinear;
<a name="l00714"></a>00714       *(linRec + k + (gNDelimeters+2)  ) = pointer-&gt;VertRotary;
<a name="l00715"></a>00715       *(linRec + k + (gNDelimeters+2)*2) = pointer-&gt;HorLinear;
<a name="l00716"></a>00716       *(linRec + k + (gNDelimeters+2)*3) = pointer-&gt;HorRotary;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718       pointer++;
<a name="l00719"></a>00719    }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721    <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a8456474a3eeef47e3e9255af0f4c682a">FillTargetHists</a>(gNDelimeters, linRec);
<a name="l00722"></a>00722 
<a name="l00723"></a>00723    <span class="keyword">delete</span> [] linRec;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725    <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ac31940d02a7803248740e0ef60acba9e">fNDelim</a> = gNDelimeters;
<a name="l00726"></a>00726 
<a name="l00727"></a>00727    UShort_t i = 0;
<a name="l00728"></a>00728 
<a name="l00729"></a>00729    printf(<span class="stringliteral">&quot;   index    total        x-pos        y-pos\n&quot;</span>);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731    pointer = rec;
<a name="l00732"></a>00732 
<a name="l00733"></a>00733    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;gNDelimeters; k++) {
<a name="l00734"></a>00734 
<a name="l00735"></a>00735       <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ac50070c11578c0f3c337a67f06104cbd">Linear</a>[k][1] = pointer-&gt;VertLinear;
<a name="l00736"></a>00736       <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] = pointer-&gt;VertRotary;
<a name="l00737"></a>00737       <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ac50070c11578c0f3c337a67f06104cbd">Linear</a>[k][0] = pointer-&gt;HorLinear;
<a name="l00738"></a>00738       <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0] = pointer-&gt;HorRotary;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740       pointer++;
<a name="l00741"></a>00741 
<a name="l00742"></a>00742       <span class="comment">// force 0 for +/-1 tiny readout as target position.</span>
<a name="l00743"></a>00743       <span class="keywordflow">if</span> (abs(<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1]) &lt;= 1) <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] = 0;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745       <span class="comment">// identify Horizontal or Vertical target from the first target</span>
<a name="l00746"></a>00746       <span class="comment">// rotary position readout.</span>
<a name="l00747"></a>00747       <span class="keywordflow">if</span> (k == 0) {
<a name="l00748"></a>00748          <span class="comment">// From Run09 on, the horizontal/vertical targets are</span>
<a name="l00749"></a>00749          <span class="comment">// identified by linear motion</span>
<a name="l00750"></a>00750          <span class="keywordtype">long</span> <span class="keywordtype">int</span> tgt_identifyV = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a94c293ac6ed17f3a2c76fd30088c1ab6">RUNID</a> &lt; 10040 ? <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0] : <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ac50070c11578c0f3c337a67f06104cbd">Linear</a>[k][0];
<a name="l00751"></a>00751          <span class="keywordtype">long</span> <span class="keywordtype">int</span> tgt_identifyH = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a94c293ac6ed17f3a2c76fd30088c1ab6">RUNID</a> &lt; 10040 ? <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] : <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ac50070c11578c0f3c337a67f06104cbd">Linear</a>[k][1];
<a name="l00752"></a>00752 
<a name="l00753"></a>00753          <span class="keywordflow">if</span> ( ( !<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0] &amp;&amp; !<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] ) ||
<a name="l00754"></a>00754               (  <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0] &amp;&amp;  <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] ) )
<a name="l00755"></a>00755          {
<a name="l00756"></a>00756             cout &lt;&lt; <span class="stringliteral">&quot;ERROR: no target rotary info. Don&apos;t know H/V target&quot;</span> &lt;&lt; endl;
<a name="l00757"></a>00757          }
<a name="l00758"></a>00758 
<a name="l00759"></a>00759          <span class="keywordflow">if</span> (tgt_identifyV) {
<a name="l00760"></a>00760             <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8ecd9c24195a3951e95bfe9d8fe0cc4a">VHtarget</a>           = 0;
<a name="l00761"></a>00761             cout &lt;&lt; <span class="stringliteral">&quot;Vertical Target in finite position - ???&quot;</span> &lt;&lt; endl;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tgt_identifyH) {
<a name="l00764"></a>00764             <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8ecd9c24195a3951e95bfe9d8fe0cc4a">VHtarget</a>           = 1;
<a name="l00765"></a>00765             cout &lt;&lt; <span class="stringliteral">&quot;Horizontal Target in finite position - ???&quot;</span> &lt;&lt; endl;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767          } <span class="keywordflow">else</span> {
<a name="l00768"></a>00768             cout &lt;&lt; <span class="stringliteral">&quot;Warning: Target infomation cannot be recognized - ???&quot;</span> &lt;&lt; endl;
<a name="l00769"></a>00769          }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771          <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#acf9769ee588990e328c3f9c806f9b92c">x</a>       = <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8ecd9c24195a3951e95bfe9d8fe0cc4a">VHtarget</a>] * <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>;
<a name="l00772"></a>00772          <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8a8c2940e21d948381c791f45587def9">Time</a>[i] = k;
<a name="l00773"></a>00773          <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a00198edcfc53c3dceb1717cb6e39bfe5">X</a>[i]    = <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#acf9769ee588990e328c3f9c806f9b92c">x</a>;
<a name="l00774"></a>00774 
<a name="l00775"></a>00775          printf(<span class="stringliteral">&quot;%8d %8d %8d %8d %12.3f %12.3f %12.3f\n&quot;</span>, i, k, <a class="code" href="AsymCommon_8cxx.html#a328414bc2201e28637913ec6a6b2a3f8">nTgtIndex</a>,
<a name="l00776"></a>00776                  <a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k], <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a00198edcfc53c3dceb1717cb6e39bfe5">X</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]],
<a name="l00777"></a>00777                  <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0]*<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>,
<a name="l00778"></a>00778                  <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1]*<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>);
<a name="l00779"></a>00779       } <span class="keywordflow">else</span> {
<a name="l00780"></a>00780 
<a name="l00781"></a>00781          <a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k] = i;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783          <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1] != <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k-1][1] ||
<a name="l00784"></a>00784              <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0] != <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k-1][0] )
<a name="l00785"></a>00785          {
<a name="l00786"></a>00786             <a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]                 = ++i;
<a name="l00787"></a>00787             <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a00198edcfc53c3dceb1717cb6e39bfe5">X</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]]          = <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8ecd9c24195a3951e95bfe9d8fe0cc4a">VHtarget</a>] * <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>;
<a name="l00788"></a>00788             <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8a8c2940e21d948381c791f45587def9">Time</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]]       = float(k);
<a name="l00789"></a>00789             <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#ada1bcf135e9bb9bbb253d5f032677606">Interval</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k-1]] = <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8a8c2940e21d948381c791f45587def9">Time</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]] - <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8a8c2940e21d948381c791f45587def9">Time</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k-1]];
<a name="l00790"></a>00790             ++<a class="code" href="AsymCommon_8cxx.html#a328414bc2201e28637913ec6a6b2a3f8">nTgtIndex</a>;
<a name="l00791"></a>00791 
<a name="l00792"></a>00792             printf(<span class="stringliteral">&quot;%8d %8d %8d %8d %12.3f %12.3f %12.3f\n&quot;</span>, i, k, <a class="code" href="AsymCommon_8cxx.html#a328414bc2201e28637913ec6a6b2a3f8">nTgtIndex</a>,
<a name="l00793"></a>00793                <a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k], <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a00198edcfc53c3dceb1717cb6e39bfe5">X</a>[<a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[k]],
<a name="l00794"></a>00794                <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][0]*<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>,
<a name="l00795"></a>00795                <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][1]*<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a>);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797          }
<a name="l00798"></a>00798       }
<a name="l00799"></a>00799 
<a name="l00800"></a>00800       <span class="comment">// target position array including static target motion</span>
<a name="l00801"></a>00801       <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a9e3b1b9286f49180027fd9659c979591">all</a>.<a class="code" href="structTargetInfo_1_1StructAll.html#ac98aa922c407f80d58e4a9b2baf7c6cb">x</a>[k] = <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a1fa150045cf8cbd3d5cb7a0a091786d1">Rotary</a>[k][<a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#a8ecd9c24195a3951e95bfe9d8fe0cc4a">VHtarget</a>] * <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#a3113d05efd80640b9a819867a86d056a">target_count_mm</a> ;
<a name="l00802"></a>00802    }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804    printf(<span class="stringliteral">&quot;Number of delimiters: %4d\n&quot;</span>, gNDelimeters);
<a name="l00805"></a>00805    printf(<span class="stringliteral">&quot;nTgtIndex: %d\n&quot;</span>, <a class="code" href="AsymCommon_8cxx.html#a328414bc2201e28637913ec6a6b2a3f8">nTgtIndex</a>);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807    <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>.<a class="code" href="classTargetInfo.html#aa8b8f405eaf3015828bbd59d47c7f298">Print</a>();
<a name="l00808"></a>00808 }
<a name="l00809"></a>00809 
<a name="l00810"></a>00810 
<a name="l00812"></a><a class="code" href="RawDataReader_8h.html#a8d5dde99c4654e62832bb25765d56e68">00812</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordConfigRhicStruct &amp;rec)
<a name="l00813"></a>00813 {
<a name="l00814"></a>00814    <a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a> = (recordConfigRhicStruct *) malloc(<span class="keyword">sizeof</span>(recordConfigRhicStruct) +
<a name="l00815"></a>00815                  (rec.data.NumChannels - 1) * <span class="keyword">sizeof</span>(SiChanStruct));
<a name="l00816"></a>00816 
<a name="l00817"></a>00817    memcpy(<a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>, &amp;rec, <span class="keyword">sizeof</span>(recordConfigRhicStruct) + (rec.data.NumChannels - 1) * <span class="keyword">sizeof</span>(SiChanStruct));
<a name="l00818"></a>00818 
<a name="l00819"></a>00819    <span class="comment">// Recalculate Run constants</span>
<a name="l00820"></a>00820    <a class="code" href="RawDataReader_8cxx.html#a9766258abe4acf62ac6c5dd523509e0a">UpdateRunConst</a>(<a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>);
<a name="l00821"></a>00821 }
<a name="l00822"></a>00822 
<a name="l00823"></a>00823 
<a name="l00825"></a><a class="code" href="RawDataReader_8h.html#a314a9bcc226177cd2f1d1a5d672698c2">00825</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordMeasTypeStruct &amp;rec)
<a name="l00826"></a>00826 {
<a name="l00827"></a>00827    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a597d721b47a7f0a0e9aa667df28cee3c">SetMeasType</a>(rec.type);
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a>00830 
<a name="l00832"></a><a class="code" href="RawDataReader_8h.html#abaa01d7d80ef4b60980a0367513ebac7">00832</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordPolAdoStruct &amp;rec, MseMeasInfoX &amp;mseMeasInfo)
<a name="l00833"></a>00833 {
<a name="l00834"></a>00834    <span class="keywordflow">if</span> (!<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#ab8eddaa7b7eeae958f2b69d2cf5e6a45">HasAlphaBit</a>()) <a class="code" href="RawDataReader_8cxx.html#a3c6ecf8b548aab4250c3a2bfc847eb71" title="Decorde target infomation.">DecodeTargetID</a>( (polDataStruct &amp;) rec.data, mseMeasInfo);
<a name="l00835"></a>00835 }
<a name="l00836"></a>00836 
<a name="l00837"></a>00837 
<a name="l00839"></a><a class="code" href="RawDataReader_8h.html#a65aac541a329dd93a16554545b352815">00839</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordpCTagAdoStruct &amp;rec, MseMeasInfoX &amp;mseMeasInfo)
<a name="l00840"></a>00840 {
<a name="l00841"></a>00841    <span class="keywordflow">if</span> (!<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#aad68a1018b9590d3cf820b3388cd9c19">HasTargetBit</a>() || <a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>-&gt;<a class="code" href="classAsymAnaInfo.html#ab8eddaa7b7eeae958f2b69d2cf5e6a45">HasAlphaBit</a>()) <span class="keywordflow">return</span>;
<a name="l00842"></a>00842 
<a name="l00843"></a>00843    <a class="code" href="AsymCommon_8cxx.html#a43303003e8062befcb962e491ea64985">gNDelimeters</a>  = (rec.header.len - <span class="keyword">sizeof</span>(rec.header)) / <span class="keyword">sizeof</span>(pCTargetStruct);
<a name="l00844"></a>00844 
<a name="l00845"></a>00845    <a class="code" href="RawDataReader_8cxx.html#aad58fcf342cad0923d0f260c198fa816">ProcessRecordPCTarget</a>((<span class="keyword">const</span> pCTargetStruct *) rec.data, mseMeasInfo);
<a name="l00846"></a>00846 }
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 
<a name="l00850"></a><a class="code" href="RawDataReader_8h.html#ac29b294df08cdccb85997073bacd8313">00850</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordWFDV8ArrayStruct &amp;rec)
<a name="l00851"></a>00851 {
<a name="l00852"></a>00852    Int_t s1=0, s2=0, s3=0, s4=0;
<a name="l00853"></a>00853 
<a name="l00854"></a>00854    UShort_t chId = rec.siNum + 1;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856    <span class="comment">// Consider only silicon channels</span>
<a name="l00857"></a>00857    <span class="keywordflow">if</span> (chId &gt; <a class="code" href="AsymHeader_8h.html#ae9fa17313b48e29ce4515451cc7c6e9e">NSTRIP</a>) <span class="keywordflow">return</span>;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; 128; i++) s1 += rec.hist[i];        <span class="comment">// bunch hist</span>
<a name="l00860"></a>00860    for (<span class="keywordtype">int</span> i=0; i&lt; 128; i++) s2 += rec.hist[i+128];    <span class="comment">// unpol energy</span>
<a name="l00861"></a>00861    for (<span class="keywordtype">int</span> i=0; i&lt; 128; i++) s3 += rec.hist[i+256];    <span class="comment">// pol+ energy</span>
<a name="l00862"></a>00862    for (<span class="keywordtype">int</span> i=0; i&lt; 128; i++) s4 += rec.hist[i+384];    <span class="comment">// pol- energy</span>
<a name="l00863"></a>00863 
<a name="l00864"></a>00864    printf(<span class="stringliteral">&quot;Si%02d : %12d %12d %12d %12d %12d    %12d  %12d  %12d  %12d&quot;</span>,
<a name="l00865"></a>00865           rec.siNum + 1, rec.scalers[0], rec.scalers[1],
<a name="l00866"></a>00866           rec.scalers[2], rec.scalers[3], rec.scalers[4],
<a name="l00867"></a>00867           s1, s2, s3, s4);
<a name="l00868"></a>00868 
<a name="l00869"></a>00869    <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad32c0bc3b7c87726b277848ff3c117c6">FillScallerHists</a>((int32_t*) rec.hist, chId);
<a name="l00870"></a>00870 
<a name="l00871"></a>00871    <span class="comment">// Check for hardware counts compatibility. Mark channel as bad if something is wrong</span>
<a name="l00872"></a>00872    <span class="keywordflow">if</span> (s2 &lt; rec.scalers[2] || s3 != rec.scalers[0] ||
<a name="l00873"></a>00873        s4 != rec.scalers[1] || s1 &lt; s2 + s3 + s4)
<a name="l00874"></a>00874    {
<a name="l00875"></a>00875       printf(<span class="stringliteral">&quot; &lt;- !!!&quot;</span>);
<a name="l00876"></a>00876    }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878    printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00879"></a>00879 
<a name="l00880"></a>00880    Int_t cnt = 0;
<a name="l00881"></a>00881 
<a name="l00882"></a>00882    cnt += rec.scalers[0] + rec.scalers[1] + rec.scalers[2];
<a name="l00883"></a>00883 }
<a name="l00884"></a>00884 
<a name="l00885"></a>00885 
<a name="l00887"></a><a class="code" href="RawDataReader_8h.html#a12eb5d10df3bb5cddd25d073e571b0c4">00887</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordCountRate &amp;rec)
<a name="l00888"></a>00888 {
<a name="l00889"></a>00889    UInt_t size = (rec.header.len - <span class="keyword">sizeof</span>(rec.header))/(<span class="keyword">sizeof</span>(int32_t));
<a name="l00890"></a>00890    int32_t *<a class="code" href="AsymCommon_8cxx.html#a011ee8c5bd42d608ae617226320053ab">pointer</a> = (int32_t *) rec.data;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892    cout &lt;&lt; <span class="stringliteral">&quot;len, size: &quot;</span> &lt;&lt; rec.header.len &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; size &lt;&lt; endl;
<a name="l00893"></a>00893 
<a name="l00894"></a>00894    <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#a6e1c70d15f29fdb2ecbfff679e3107cd">FillProfileHists</a>(size, pointer);
<a name="l00895"></a>00895 }
<a name="l00896"></a>00896 
<a name="l00897"></a>00897 
<a name="l00899"></a><a class="code" href="RawDataReader_8h.html#aded1bc3ae993ca6810f83bb738c1d8ad">00899</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> RecordMachineParams &amp;rec)
<a name="l00900"></a>00900 {
<a name="l00901"></a>00901     <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a676676b178ab7a60493b629378e74997">SetMachineParams</a>(rec);
<a name="l00902"></a>00902 }
<a name="l00903"></a>00903 
<a name="l00904"></a>00904 
<a name="l00906"></a><a class="code" href="RawDataReader_8h.html#a751ac4da2095676f0794c4300a4213f6">00906</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> RecordTargetParams &amp;rec)
<a name="l00907"></a>00907 {
<a name="l00908"></a>00908     <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a8721217488663944ce9176f4b4501831">SetTargetParams</a>(rec);
<a name="l00909"></a>00909 }
<a name="l00910"></a>00910 
<a name="l00911"></a>00911 
<a name="l00913"></a><a class="code" href="RawDataReader_8h.html#acca692f1a5e700b5f77336c98a2896a7">00913</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordWcmAdoStruct &amp;rec)
<a name="l00914"></a>00914 {
<a name="l00915"></a>00915    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bid=1; bid&lt;=<a class="code" href="AsymHeader_8h.html#ac4b53acef18e1843e977aafd41a1ee89">N_BUNCHES</a>; bid++) {
<a name="l00916"></a>00916 
<a name="l00917"></a>00917       <span class="keywordtype">float</span> data = rec.data.fillDataM[(bid-1)*3];
<a name="l00918"></a>00918 
<a name="l00919"></a>00919       <span class="comment">// save non-zero bunches only</span>
<a name="l00920"></a>00920       <span class="keywordflow">if</span> (!data) <span class="keywordflow">continue</span>;
<a name="l00921"></a>00921 
<a name="l00922"></a>00922       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a24f2a13f5e637ff9ef90cafabb8e847d">fWallCurMon</a>[bid] = data;
<a name="l00923"></a>00923       <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a2a1f0376eeae97839503ff268002beb1">fWallCurMonSum</a> += <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a24f2a13f5e637ff9ef90cafabb8e847d">fWallCurMon</a>[bid];
<a name="l00924"></a>00924    }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a29799e17975d49dea70ff293f91f972d">fWallCurMonAve</a> = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a2a1f0376eeae97839503ff268002beb1">fWallCurMonSum</a> / <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a24f2a13f5e637ff9ef90cafabb8e847d">fWallCurMon</a>.size();
<a name="l00927"></a>00927 
<a name="l00928"></a>00928    <a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>-&gt;<a class="code" href="classAsymRoot.html#ad1843596290ce21ac886b59962208cd8">FillRunHists</a>();
<a name="l00929"></a>00929 }
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 
<a name="l00933"></a><a class="code" href="RawDataReader_8h.html#a351857e128e377de567a5ca921a750a9">00933</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> RecordWcm &amp;rec)
<a name="l00934"></a>00934 {
<a name="l00935"></a>00935    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bid=1; bid&lt;=<a class="code" href="AsymHeader_8h.html#ac4b53acef18e1843e977aafd41a1ee89">N_BUNCHES</a>; bid++)
<a name="l00936"></a>00936    {
<a name="l00937"></a>00937       <a class="code" href="BeamBunch_8h.html#adb3963b4d8329b834bdb1e7444c9f716">BeamBunchIter</a>  ibb = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a17a3e6bf59642d7bf6b358abc657164c">fBeamBunches</a>.find(bid);
<a name="l00938"></a>00938       <a class="code" href="classBeamBunch.html">BeamBunch</a>     &amp;bb  = ibb-&gt;second;
<a name="l00939"></a>00939 
<a name="l00940"></a>00940       bb.<a class="code" href="classBeamBunch.html#a4ec50d51feddf634cbbc8decaf3f3072">SetLength</a>((Float_t) rec.fBunchDataM[(bid-1)*3]);
<a name="l00941"></a>00941    }
<a name="l00942"></a>00942 }
<a name="l00943"></a>00943 
<a name="l00944"></a>00944 
<a name="l00946"></a><a class="code" href="RawDataReader_8h.html#aaea136b5441bfb62687aabdb8f434ef1">00946</a> <span class="keywordtype">void</span> <a class="code" href="RawDataReader_8cxx.html#a8d5dde99c4654e62832bb25765d56e68">ProcessRecord</a>(<span class="keyword">const</span> recordBeamAdoStruct &amp;rec)
<a name="l00947"></a>00947 {
<a name="l00948"></a>00948    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bid=0; bid&lt;<a class="code" href="AsymHeader_8h.html#ac4b53acef18e1843e977aafd41a1ee89">N_BUNCHES</a>; bid++) {
<a name="l00949"></a>00949 
<a name="l00950"></a>00950       <a class="code" href="BeamBunch_8h.html#adb3963b4d8329b834bdb1e7444c9f716">BeamBunchIter</a>  ibb = <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a17a3e6bf59642d7bf6b358abc657164c">fBeamBunches</a>.find(bid+1);
<a name="l00951"></a>00951       <a class="code" href="classBeamBunch.html">BeamBunch</a>     &amp;bb  = ibb-&gt;second;
<a name="l00952"></a>00952 
<a name="l00953"></a>00953       <span class="keywordtype">int</span> pat = rec.data.polarizationFillPatternS[bid*3];
<a name="l00954"></a>00954 
<a name="l00955"></a>00955       <span class="keywordflow">if</span> (pat &gt; 0) {
<a name="l00956"></a>00956          bb.<a class="code" href="classBeamBunch.html#a0244c6624f150875829da4fd11053c02">SetBunchSpin</a>(<a class="code" href="AsymCommon_8h.html#a75033b5922ab0415151b966a3334e9c0aaeee63ba279b1c5c39df56b19eb5f7da">kSPIN_UP</a>);
<a name="l00957"></a>00957       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pat &lt; 0) {
<a name="l00958"></a>00958          bb.<a class="code" href="classBeamBunch.html#a0244c6624f150875829da4fd11053c02">SetBunchSpin</a>(<a class="code" href="AsymCommon_8h.html#a75033b5922ab0415151b966a3334e9c0ace9f88edc10eee4abe193cc7e956c27d">kSPIN_DOWN</a>);
<a name="l00959"></a>00959       } <span class="keywordflow">else</span> {
<a name="l00960"></a>00960          bb.<a class="code" href="classBeamBunch.html#a0244c6624f150875829da4fd11053c02">SetBunchSpin</a>(<a class="code" href="AsymCommon_8h.html#a75033b5922ab0415151b966a3334e9c0a6ca91ae39817248c553eb78fc2f826b9">kSPIN_NULL</a>);
<a name="l00961"></a>00961       }
<a name="l00962"></a>00962 
<a name="l00963"></a>00963       pat = rec.data.measuredFillPatternM[bid*3];
<a name="l00964"></a>00964 
<a name="l00965"></a>00965       <span class="keywordflow">if</span> (pat &gt; 0) {
<a name="l00966"></a>00966          bb.<a class="code" href="classBeamBunch.html#afec098c5b8aa6e7c7acb93f0fe92a5b0">SetFilled</a>(kTRUE);
<a name="l00967"></a>00967       } <span class="keywordflow">else</span> {
<a name="l00968"></a>00968          bb.<a class="code" href="classBeamBunch.html#afec098c5b8aa6e7c7acb93f0fe92a5b0">SetFilled</a>(kFALSE);
<a name="l00969"></a>00969       }
<a name="l00970"></a>00970    }
<a name="l00971"></a>00971 
<a name="l00972"></a>00972    <a class="code" href="classAsymRecover.html">AsymRecover</a> recover;
<a name="l00973"></a>00973 
<a name="l00974"></a>00974    <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a2bc055989519926f3464dccd44b34a71">Flag</a>.<a class="code" href="structStructFlag.html#a9c4506d6faf3e7d9f066424d794c3af3">spin_pattern</a> &gt;= 0) {
<a name="l00975"></a>00975       cout &lt;&lt; <span class="stringliteral">&quot;\nSpin pattern has been overwritten&quot;</span> &lt;&lt; endl;
<a name="l00976"></a>00976       recover.<a class="code" href="classAsymRecover.html#aacb14ecaa256c59442dcdea4f1754413">OverwriteSpinPattern</a>(<a class="code" href="AsymCommon_8cxx.html#a2bc055989519926f3464dccd44b34a71">Flag</a>.<a class="code" href="structStructFlag.html#a9c4506d6faf3e7d9f066424d794c3af3">spin_pattern</a>);
<a name="l00977"></a>00977    }
<a name="l00978"></a>00978 
<a name="l00979"></a>00979    <span class="keywordflow">if</span> (<a class="code" href="AsymCommon_8cxx.html#a2bc055989519926f3464dccd44b34a71">Flag</a>.<a class="code" href="structStructFlag.html#a40184ba8c88cd2d54ffd223c98b2d3e7">fill_pattern</a> &gt;= 0) {
<a name="l00980"></a>00980       cout &lt;&lt; <span class="stringliteral">&quot;\nFill pattern has been overwritten&quot;</span> &lt;&lt; endl;
<a name="l00981"></a>00981       recover.<a class="code" href="classAsymRecover.html#a453146e95cadfad716e0eece98640aaf">OverwriteFillPattern</a>(<a class="code" href="AsymCommon_8cxx.html#a2bc055989519926f3464dccd44b34a71">Flag</a>.<a class="code" href="structStructFlag.html#a40184ba8c88cd2d54ffd223c98b2d3e7">fill_pattern</a>);
<a name="l00982"></a>00982    }
<a name="l00983"></a>00983 
<a name="l00984"></a>00984    <a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>-&gt;<a class="code" href="classMeasInfo.html#a1e11f530a8a8b066de35d6fd3368d2de">PrintBunchPatterns</a>();
<a name="l00985"></a>00985 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 3 Dec 2014 for cnipol by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
