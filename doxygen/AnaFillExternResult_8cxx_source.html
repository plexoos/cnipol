<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cnipol: /direct/eic+u/dsmirnov/cnipol/src/AnaFillExternResult.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_e1dca166ec6abb4ef5a7ad269392aef6.html">src</a>
  </div>
</div>
<div class="contents">
<h1>AnaFillExternResult.cxx</h1><a href="AnaFillExternResult_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;climits&gt;</span>
<a name="l00003"></a>00003 
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;<a class="code" href="AnaFillExternResult_8h.html">AnaFillExternResult.h</a>&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;<a class="code" href="AnaGlobResult_8h.html">AnaGlobResult.h</a>&quot;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="code" href="Target_8h.html">Target.h</a>&quot;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <a class="code" href="AlphaCalibrator_8cxx.html#a2e4eff40c749ecbebe6e9a0ec9ed6c8d">ClassImp</a>(<a class="code" href="classAnaFillExternResult.html">AnaFillExternResult</a>)
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 using namespace std;
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 
<a name="l00014"></a><a class="code" href="classAnaFillExternResult.html#aa04e01ab2126e42659677fc14075dab8">00014</a> <a class="code" href="classAnaFillExternResult.html">AnaFillExternResult</a>::<a class="code" href="classAnaFillExternResult.html">AnaFillExternResult</a>() : TObject(),
<a name="l00015"></a>00015    fBluIntensGraph(0), fYelIntensGraph(0),
<a name="l00016"></a>00016    fBluRotCurStarGraph(0), fYelRotCurStarGraph(0), fBluRotCurPhenixGraph(0),
<a name="l00017"></a>00017    fYelRotCurPhenixGraph(0), fBluSnakeCurGraph(0), fYelSnakeCurGraph(0),
<a name="l00018"></a>00018    fTimeEventLumiOn(LONG_MAX), fTimeEventLumiOff(LONG_MIN)
<a name="l00019"></a>00019 {
<a name="l00020"></a>00020 }
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00024"></a><a class="code" href="classAnaFillExternResult.html#a8882666125c39904562e686a2f7627dc">00024</a> <a class="code" href="classAnaFillExternResult.html#aa04e01ab2126e42659677fc14075dab8">AnaFillExternResult::AnaFillExternResult</a>(std::ifstream &amp;file) : TObject(),
<a name="l00025"></a>00025    fBluIntensGraph(0), fYelIntensGraph(0),
<a name="l00026"></a>00026    fBluRotCurStarGraph(0), fYelRotCurStarGraph(0), fBluRotCurPhenixGraph(0),
<a name="l00027"></a>00027    fYelRotCurPhenixGraph(0), fBluSnakeCurGraph(0), fYelSnakeCurGraph(0),
<a name="l00028"></a>00028    fTimeEventLumiOn(LONG_MAX), fTimeEventLumiOff(LONG_MIN)
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030    <a class="code" href="classAnaFillExternResult.html#a2e2797fc42dec7847690b8af673f6174">ReadInfo</a>(file);
<a name="l00031"></a>00031 }
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00035"></a><a class="code" href="classAnaFillExternResult.html#af53ae57c85aaa7bdf26d597365ca146f">00035</a> <a class="code" href="classAnaFillExternResult.html#af53ae57c85aaa7bdf26d597365ca146f">AnaFillExternResult::~AnaFillExternResult</a>() { }
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="classAnaFillExternResult.html#ae506e1bc1fc37402aced48599f3e8222">00038</a> TGraphErrors* <a class="code" href="classAnaFillExternResult.html#ae506e1bc1fc37402aced48599f3e8222">AnaFillExternResult::GetGrBluIntens</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classAnaFillExternResult.html#a85c0064df14eee38dc6c68da1b1aab0f">fBluIntensGraph</a>; }
<a name="l00039"></a><a class="code" href="classAnaFillExternResult.html#ace9aa2277b163f48a528374b72ff4a0a">00039</a> TGraphErrors* <a class="code" href="classAnaFillExternResult.html#ace9aa2277b163f48a528374b72ff4a0a">AnaFillExternResult::GetGrYelIntens</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classAnaFillExternResult.html#a85f61c3ead467e2d230036f0fa791bf4">fYelIntensGraph</a>; }
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00043"></a><a class="code" href="classAnaFillExternResult.html#a2e2797fc42dec7847690b8af673f6174">00043</a> <span class="keywordtype">void</span> <a class="code" href="classAnaFillExternResult.html#a2e2797fc42dec7847690b8af673f6174">AnaFillExternResult::ReadInfo</a>(std::ifstream &amp;file)
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045    <span class="keywordflow">if</span> (!file.good()) {
<a name="l00046"></a>00046       Error(<span class="stringliteral">&quot;ReadInfo&quot;</span>, <span class="stringliteral">&quot;Invalid file provided with external info&quot;</span>);
<a name="l00047"></a>00047       file.close();
<a name="l00048"></a>00048       <span class="keywordflow">return</span>;
<a name="l00049"></a>00049    }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051    Double_t time;
<a name="l00052"></a>00052    Double_t bluIntens, bluRotatorStar, bluRotatorPhenix, bluSnakeCurrent;
<a name="l00053"></a>00053    Double_t yelIntens, yelRotatorStar, yelRotatorPhenix, yelSnakeCurrent;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055    vector&lt;Double_t&gt; vTimes;
<a name="l00056"></a>00056    vector&lt;Double_t&gt; vBluIntens;
<a name="l00057"></a>00057    vector&lt;Double_t&gt; vYelIntens;
<a name="l00058"></a>00058    vector&lt;Double_t&gt; vBluIntensErr;
<a name="l00059"></a>00059    vector&lt;Double_t&gt; vYelIntensErr;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061    vector&lt;Double_t&gt; vBluRotCurStar;
<a name="l00062"></a>00062    vector&lt;Double_t&gt; vYelRotCurStar;
<a name="l00063"></a>00063    vector&lt;Double_t&gt; vBluRotCurPhenix;
<a name="l00064"></a>00064    vector&lt;Double_t&gt; vYelRotCurPhenix;
<a name="l00065"></a>00065    vector&lt;Double_t&gt; vBluSnakeCur;
<a name="l00066"></a>00066    vector&lt;Double_t&gt; vYelSnakeCur;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068    Int_t iline = 0;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070    <span class="comment">// loop over the entries</span>
<a name="l00071"></a>00071    <span class="keywordflow">while</span> ( file.good() )
<a name="l00072"></a>00072    {
<a name="l00073"></a>00073       iline++;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075       file &gt;&gt; time &gt;&gt; bluIntens &gt;&gt; yelIntens &gt;&gt; bluRotatorStar &gt;&gt;
<a name="l00076"></a>00076               yelRotatorStar &gt;&gt; bluRotatorPhenix &gt;&gt; yelRotatorPhenix &gt;&gt;
<a name="l00077"></a>00077               bluSnakeCurrent &gt;&gt; yelSnakeCurrent;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079       <span class="keywordflow">if</span> (file.eof()) <span class="keywordflow">break</span>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081       <span class="comment">//printf(&quot;file: %s\n&quot;, fileId.c_str());</span>
<a name="l00082"></a>00082       <span class="comment">//cout &lt;&lt; time &lt;&lt; &quot; &quot; &lt;&lt; bluIntens &lt;&lt; &quot; &quot; &lt;&lt; bluRotatorStar &lt;&lt; &quot; &quot; &lt;&lt; bluRotatorPhenix &lt;&lt; &quot; &quot; &lt;&lt; bluSnakeCurrent</span>
<a name="l00083"></a>00083       <span class="comment">//             &lt;&lt; &quot; &quot; &lt;&lt; yelIntens &lt;&lt; &quot; &quot; &lt;&lt; yelRotatorStar &lt;&lt; &quot; &quot; &lt;&lt; yelRotatorPhenix &lt;&lt; &quot; &quot; &lt;&lt; yelSnakeCurrent &lt;&lt; endl;</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085       <span class="comment">// Determine the lumi on/off events</span>
<a name="l00086"></a>00086       <span class="keywordflow">if</span> (time &lt; <a class="code" href="classAnaFillExternResult.html#a711cc2308eb8443739477da9cd0c308d">fTimeEventLumiOn</a>)  <a class="code" href="classAnaFillExternResult.html#a711cc2308eb8443739477da9cd0c308d">fTimeEventLumiOn</a>  = (time_t) time;
<a name="l00087"></a>00087       <span class="keywordflow">if</span> (time &gt; <a class="code" href="classAnaFillExternResult.html#add4f410bfe89d64e2bcd4f649ec692ed">fTimeEventLumiOff</a>) <a class="code" href="classAnaFillExternResult.html#add4f410bfe89d64e2bcd4f649ec692ed">fTimeEventLumiOff</a> = (time_t) time;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089       <span class="keywordflow">if</span> (iline % 5 != 0) <span class="keywordflow">continue</span>; <span class="comment">// every 5 minutes</span>
<a name="l00090"></a>00090       <span class="keywordflow">if</span> (bluIntens &lt; 1 || yelIntens &lt; 1) <span class="keywordflow">continue</span>;
<a name="l00091"></a>00091 
<a name="l00092"></a>00092       vTimes.push_back(time);
<a name="l00093"></a>00093       vBluIntens.push_back(bluIntens);
<a name="l00094"></a>00094       vYelIntens.push_back(yelIntens);
<a name="l00095"></a>00095       vBluIntensErr.push_back(bluIntens &lt; 10 ? 0.1 : bluIntens*0.001); <span class="comment">// 0.001 error according to Wolfram</span>
<a name="l00096"></a>00096       vYelIntensErr.push_back(yelIntens &lt; 10 ? 0.1 : yelIntens*0.001);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098       vBluRotCurStar.push_back(bluRotatorStar);
<a name="l00099"></a>00099       vYelRotCurStar.push_back(yelRotatorStar);
<a name="l00100"></a>00100       vBluRotCurPhenix.push_back(bluRotatorPhenix);
<a name="l00101"></a>00101       vYelRotCurPhenix.push_back(yelRotatorPhenix);
<a name="l00102"></a>00102       vBluSnakeCur.push_back(bluSnakeCurrent);
<a name="l00103"></a>00103       vYelSnakeCur.push_back(yelSnakeCurrent);
<a name="l00104"></a>00104    }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106    <span class="keywordflow">if</span> (vBluIntens.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00107"></a>00107       <a class="code" href="classAnaFillExternResult.html#a85c0064df14eee38dc6c68da1b1aab0f">fBluIntensGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vBluIntens[0], 0, &amp;vBluIntensErr[0]);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109    <span class="keywordflow">if</span> (vYelIntens.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00110"></a>00110       <a class="code" href="classAnaFillExternResult.html#a85f61c3ead467e2d230036f0fa791bf4">fYelIntensGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vYelIntens[0], 0, &amp;vYelIntensErr[0]);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112    <span class="keywordflow">if</span> (vBluRotCurStar.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00113"></a>00113       <a class="code" href="classAnaFillExternResult.html#a95754d115d35ac736f5d4734551c17d0">fBluRotCurStarGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vBluRotCurStar[0], 0, 0);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115    <span class="keywordflow">if</span> (vYelRotCurStar.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00116"></a>00116       <a class="code" href="classAnaFillExternResult.html#a734b712dae1c187de2230aad657832e0">fYelRotCurStarGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vYelRotCurStar[0], 0, 0);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <span class="keywordflow">if</span> (vBluRotCurPhenix.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00119"></a>00119       <a class="code" href="classAnaFillExternResult.html#a383ed2de0d2960d3667b6cb280fb28f8">fBluRotCurPhenixGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vBluRotCurPhenix[0], 0, 0);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121    <span class="keywordflow">if</span> (vYelRotCurPhenix.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00122"></a>00122       <a class="code" href="classAnaFillExternResult.html#a0ae120643cc8e9ae65020f0f04819736">fYelRotCurPhenixGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vYelRotCurPhenix[0], 0, 0);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124    <span class="keywordflow">if</span> (vBluSnakeCur.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00125"></a>00125       <a class="code" href="classAnaFillExternResult.html#a5a7367d1342074d2f80043f9b2167ecf">fBluSnakeCurGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vBluSnakeCur[0], 0, 0);
<a name="l00126"></a>00126 
<a name="l00127"></a>00127    <span class="keywordflow">if</span> (vYelSnakeCur.size() &gt; 2) <span class="comment">// require at least 3 points</span>
<a name="l00128"></a>00128       <a class="code" href="classAnaFillExternResult.html#a12504c274d5b22f171957645e49a7193">fYelSnakeCurGraph</a> = <span class="keyword">new</span> TGraphErrors(vTimes.size(), (<span class="keyword">const</span> Double_t*) &amp;vTimes[0], (<span class="keyword">const</span> Double_t*) &amp;vYelSnakeCur[0], 0, 0);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130    <span class="comment">//fBluIntensGraph-&gt;Print();</span>
<a name="l00131"></a>00131    <span class="comment">//fYelIntensGraph-&gt;Print();</span>
<a name="l00132"></a>00132    <span class="comment">//fBluRotCurStarGraph-&gt;Print();</span>
<a name="l00133"></a>00133    <span class="comment">//fYelRotCurStarGraph-&gt;Print();</span>
<a name="l00134"></a>00134    
<a name="l00135"></a>00135    file.close();
<a name="l00136"></a>00136 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 3 Dec 2014 for cnipol by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
