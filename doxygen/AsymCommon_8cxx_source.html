<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cnipol: /direct/eic+u/dsmirnov/cnipol/src/AsymCommon.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_e1dca166ec6abb4ef5a7ad269392aef6.html">src</a>
  </div>
</div>
<div class="contents">
<h1>AsymCommon.cxx</h1><a href="AsymCommon_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="AsymCommon_8h.html">AsymCommon.h</a>&quot;</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;TMath.h&quot;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;TLatex.h&quot;</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="AsymAnaInfo_8h.html">AsymAnaInfo.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="MAsymAnaInfo_8h.html">MAsymAnaInfo.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="AsymCalculator_8h.html">AsymCalculator.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="AsymRoot_8h.html">AsymRoot.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="RunConfig_8h.html">RunConfig.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="TargetInfo_8h.html">TargetInfo.h</a>&quot;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="keyword">using namespace </span>std;
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="AsymGlobals_8h.html#a40e0996a243504dfec91f1058c107739">00019</a> <span class="keyword">const</span> <span class="keywordtype">int</span>   <a class="code" href="AsymCommon_8cxx.html#a40e0996a243504dfec91f1058c107739">ASYM_DEFAULT</a> = -999;
<a name="l00020"></a><a class="code" href="AsymGlobals_8h.html#a3511e372d4a6eb725d981ec89d547eea">00020</a> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#a3511e372d4a6eb725d981ec89d547eea">MSIZE</a> = 1.2;            <span class="comment">// Marker size</span>
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="AsymGlobals_8h.html#a2db22c7756923809e2e4bea1fb6dd223">00022</a> <span class="keywordtype">int</span>     <a class="code" href="AsymCommon_8cxx.html#a811e1dd61ab9244c149eb24bb9d984c7">wcmfillpat</a>[120];            <span class="comment">// spin pattern 120 bunches (ADO info)</span>
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="AsymGlobals_8h.html#a03464047cb79da400d664c422881736a">00024</a> <span class="keywordtype">long</span>    <a class="code" href="AsymCommon_8cxx.html#a687a7e8a3280e95cc925755d08e844e6">Ncounts</a>[6][120];            <span class="comment">// counts 6detectors 120 bunches</span>
<a name="l00025"></a><a class="code" href="AsymGlobals_8h.html#aa033f0ce63967381bf79b3ea58e91f14">00025</a> <span class="keywordtype">long</span>    <a class="code" href="AsymCommon_8cxx.html#acf99e8840ed8824b5f8bf0bb2c9137fd">NTcounts</a>[6][120][<a class="code" href="AsymHeader_8h.html#adf3ad870e73ecc8e8ff19a6f1182a78f">NTBIN</a>];    <span class="comment">// counts 6detectors 120 bunches 6 tranges</span>
<a name="l00026"></a><a class="code" href="AsymGlobals_8h.html#a92fcd4d389ffb539ae0834af3d22909e">00026</a> <span class="keywordtype">long</span>    <a class="code" href="AsymCommon_8cxx.html#a0cbc23db25f5916744d8dc38bab26c6e">NRcounts</a>[6][120][<a class="code" href="AsymHeader_8h.html#a810afae1a5717908a89374b9695fc274">RAMPTIME</a>]; <span class="comment">// counts for 6det 120bunch RAMPTIME sec</span>
<a name="l00027"></a><a class="code" href="AsymGlobals_8h.html#a538c58544618581ec875e2fd9ceceaab">00027</a> <span class="keywordtype">long</span>    <a class="code" href="AsymCommon_8cxx.html#a794c8dad60522353e050d346ee2e6ef9">NDcounts</a>[6][120][<a class="code" href="AsymHeader_8h.html#aa250b498270e00009806dbd9065287c2">MAXDELIM</a>]; <span class="comment">// counts for 6 det 120 bunch per DELIMiter</span>
<a name="l00028"></a><a class="code" href="AsymGlobals_8h.html#aaa80c8165d9f9868bbe5e980d2a47eba">00028</a> <span class="keywordtype">long</span>    <a class="code" href="AsymCommon_8cxx.html#a49ba4d8ee32b8cb9663a85496414fb27">NStrip</a>[3][<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>];          <span class="comment">// counts 72 strips 3 spin states</span>
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="AsymGlobals_8h.html#ab69cd0a7be707e4de32a0df849ad8a6f">00030</a> <span class="keywordtype">char</span>   *<a class="code" href="AsymCommon_8cxx.html#ab69cd0a7be707e4de32a0df849ad8a6f">calibdir</a>;
<a name="l00031"></a><a class="code" href="AsymGlobals_8h.html#af46c754d30142d9d5d4710cdf11bd416">00031</a> <span class="keywordtype">char</span>    <a class="code" href="AsymCommon_8cxx.html#af46c754d30142d9d5d4710cdf11bd416">reConfFile</a>[256];            <span class="comment">// overwrite configuration for T0 info</span>
<a name="l00032"></a><a class="code" href="AsymGlobals_8h.html#af0083784d768f05d524681607ad0203d">00032</a> <span class="keywordtype">char</span>    <a class="code" href="AsymCommon_8cxx.html#af0083784d768f05d524681607ad0203d">conf_file</a>[256];             <span class="comment">// overwrite configuration file</span>
<a name="l00033"></a><a class="code" href="AsymGlobals_8h.html#a7526ae9e0687ef7d567e1dcac12a7d6c">00033</a> <span class="keywordtype">char</span>    <a class="code" href="AsymCommon_8cxx.html#a7526ae9e0687ef7d567e1dcac12a7d6c">CalibFile</a>[256];             <span class="comment">// energy calibration file</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="AsymGlobals_8h.html#a31c58a9fc72c8586a59c8876197b4f10">00035</a> <span class="keywordtype">float</span>   <a class="code" href="AsymCommon_8cxx.html#a31c58a9fc72c8586a59c8876197b4f10">ramptshift</a>[500];            <span class="comment">// ramp timing shift</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="AsymCommon_8cxx.html#a011ee8c5bd42d608ae617226320053ab">00037</a> <span class="keywordtype">long</span>   *<a class="code" href="AsymCommon_8cxx.html#a011ee8c5bd42d608ae617226320053ab">pointer</a>;
<a name="l00038"></a><a class="code" href="AsymGlobals_8h.html#a43303003e8062befcb962e491ea64985">00038</a> <span class="keywordtype">int</span>     <a class="code" href="AsymCommon_8cxx.html#a43303003e8062befcb962e491ea64985">gNDelimeters</a>;
<a name="l00039"></a><a class="code" href="AsymGlobals_8h.html#a13346dcda7f6f01d779b9f3fa00f2ef2">00039</a> <span class="keywordtype">int</span>     <a class="code" href="AsymCommon_8cxx.html#a13346dcda7f6f01d779b9f3fa00f2ef2">TgtIndex</a>[<a class="code" href="AsymHeader_8h.html#aa250b498270e00009806dbd9065287c2">MAXDELIM</a>];
<a name="l00040"></a><a class="code" href="AsymGlobals_8h.html#a328414bc2201e28637913ec6a6b2a3f8">00040</a> <span class="keywordtype">int</span>     <a class="code" href="AsymCommon_8cxx.html#a328414bc2201e28637913ec6a6b2a3f8">nTgtIndex</a> = 0;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="AsymGlobals_8h.html#add0aca14df56a7b32cd8fec61e4407f0">00043</a> <a class="code" href="structStructMask.html">StructMask</a> <a class="code" href="AsymCommon_8cxx.html#add0aca14df56a7b32cd8fec61e4407f0">mask</a> = {
<a name="l00044"></a>00044    0x3F          <span class="comment">// detector mask 0x3F={11 1111} All detector active</span>
<a name="l00045"></a>00045 };
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="AsymGlobals_8h.html#a5dcaf305129f44771eddab4cada113cd">00047</a> <a class="code" href="structErrorDetector.html">ErrorDetector</a> <a class="code" href="AsymCommon_8cxx.html#a5dcaf305129f44771eddab4cada113cd">errdet</a> = {
<a name="l00048"></a>00048    0.10,         <span class="comment">// MASS_WIDTH_DEV_ALLOWANCE [GeV]</span>
<a name="l00049"></a>00049    0.50,         <span class="comment">// MASS_POSITION_ALLOWANCE [GeV]</span>
<a name="l00050"></a>00050    100,          <span class="comment">// MASS_CHI2_ALLOWANCE [GeV]</span>
<a name="l00051"></a>00051    0.001,        <span class="comment">// MASS_ENERGY_CORR_ALLOWANCE; [GeV/keV]</span>
<a name="l00052"></a>00052    0.2,          <span class="comment">// GOOD_CARBON_EVENTS_ALLOWANCE fabs(events[st]-average)/average&lt;GOOD_CARBON_EVENTS_ALLOWANCE</span>
<a name="l00053"></a>00053    5.,           <span class="comment">// BUNCH_RATE_SIGMA_ALLOWANCE;</span>
<a name="l00054"></a>00054    5.,           <span class="comment">// BUNCH_ASYM_SIGMA_ALLOWANCE;</span>
<a name="l00055"></a>00055    20            <span class="comment">// NBUNCH_REQUIREMENT;</span>
<a name="l00056"></a>00056 };
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="AsymGlobals_8h.html#a401625340245a0b3215a1ef593a70700">00058</a> <a class="code" href="structStructExtInput.html">StructExtInput</a> <a class="code" href="AsymCommon_8cxx.html#a401625340245a0b3215a1ef593a70700">extinput</a> = {
<a name="l00059"></a>00059    0, <span class="comment">// CONFIG</span>
<a name="l00060"></a>00060    0, <span class="comment">// MASSCUT</span>
<a name="l00061"></a>00061    0  <span class="comment">// TSHIFT</span>
<a name="l00062"></a>00062 };
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="AsymGlobals_8h.html#a2bc055989519926f3464dccd44b34a71">00064</a> <a class="code" href="structStructFlag.html">StructFlag</a> <a class="code" href="AsymCommon_8cxx.html#a2bc055989519926f3464dccd44b34a71">Flag</a> = {
<a name="l00065"></a>00065    0,       <span class="comment">// VERBOSE mode</span>
<a name="l00066"></a>00066    0,       <span class="comment">// feedback mode</span>
<a name="l00067"></a>00067    -1,      <span class="comment">// spin_pattern</span>
<a name="l00068"></a>00068    -1,      <span class="comment">// fill_pattern</span>
<a name="l00069"></a>00069    0,       <span class="comment">// mask_bunch</span>
<a name="l00070"></a>00070    0,       <span class="comment">// EXE_ANOMALY_CHECK;</span>
<a name="l00071"></a>00071 };
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="AsymGlobals_8h.html#a00270720a6e768db4d7fb23dd4626626">00073</a> <a class="code" href="structStructCounter.html">StructCounter</a>    <a class="code" href="AsymCommon_8cxx.html#a00270720a6e768db4d7fb23dd4626626">cntr</a>;
<a name="l00074"></a><a class="code" href="AsymGlobals_8h.html#a0b1cede3e59932a7fa91b53bce5190af">00074</a> <a class="code" href="structStructCounterTgt.html">StructCounterTgt</a> <a class="code" href="AsymCommon_8cxx.html#a0b1cede3e59932a7fa91b53bce5190af">cntr_tgt</a>;
<a name="l00075"></a>00075 
<a name="l00082"></a><a class="code" href="AsymGlobals_8h.html#af64ca09c80a1c17100b5db9a004adb06">00082</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#af64ca09c80a1c17100b5db9a004adb06" title="Following arrays correspond to phi angle of each strips.">phiRun5</a>[<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>] = {
<a name="l00083"></a>00083    0.72601,0.73679,0.74758,0.75838,0.76918,0.77999,0.79080,0.80161,0.81242,0.82322,0.83401,0.84479,
<a name="l00084"></a>00084    1.51141,1.52219,1.53298,1.54378,1.55458,1.56539,1.57620,1.58701,1.59782,1.60862,1.61941,1.63019,
<a name="l00085"></a>00085    2.29680,2.30758,2.31837,2.32917,2.33998,2.35079,2.36160,2.37241,2.38321,2.39401,2.40480,2.41558,
<a name="l00086"></a>00086    3.86760,3.87838,3.88917,3.89997,3.91078,3.92159,3.93240,3.94321,3.95401,3.96481,3.97560,3.98638,
<a name="l00087"></a>00087    4.65300,4.66378,4.67457,4.68537,4.69617,4.70698,4.71779,4.72860,4.73941,4.75021,4.76100,4.77178,
<a name="l00088"></a>00088    5.43840,5.44918,5.45997,5.47077,5.48157,5.49238,5.50319,5.51400,5.52481,5.53561,5.54640,5.55718
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">// phi angle of each strips for Run06 (l=18.0cm)</span>
<a name="l00092"></a><a class="code" href="AsymGlobals_8h.html#a91ebe3e2c6254b0e210e35825cdc3348">00092</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#a91ebe3e2c6254b0e210e35825cdc3348">phiRun6</a>[<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>] = {
<a name="l00093"></a>00093    0.72436,0.73544,0.74653,0.75763,0.76873,0.77984,0.79095,0.80206,0.81317,0.82427,0.83536,0.84643,
<a name="l00094"></a>00094    1.50976,1.52084,1.53193,1.54303,1.55413,1.56524,1.57635,1.58746,1.59857,1.60967,1.62075,1.63183,
<a name="l00095"></a>00095    2.29516,2.30624,2.31733,2.32842,2.33953,2.35064,2.36175,2.37286,2.38397,2.39506,2.40615,2.41723,
<a name="l00096"></a>00096    3.86596,3.87703,3.88812,3.89922,3.91033,3.92144,3.93255,3.94366,3.95476,3.96586,3.97695,3.98803,
<a name="l00097"></a>00097    4.65135,4.66243,4.67352,4.68462,4.69572,4.70683,4.71794,4.72905,4.74016,4.75126,4.76235,4.77342,
<a name="l00098"></a>00098    5.43675,5.44783,5.45892,5.47002,5.48112,5.49223,5.50334,5.51445,5.52556,5.53666,5.54775,5.55882
<a name="l00099"></a>00099 } ;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="comment">// phi angle of each strips in trancated angles {45,90,135,225,270,315} deg.</span>
<a name="l00102"></a><a class="code" href="AsymGlobals_8h.html#a62ed7a261a1ce4cd14bb02bcb078ccd4">00102</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#a62ed7a261a1ce4cd14bb02bcb078ccd4">phit</a>[<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>] = {
<a name="l00103"></a>00103    0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,
<a name="l00104"></a>00104    1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,
<a name="l00105"></a>00105    2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,
<a name="l00106"></a>00106    3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,
<a name="l00107"></a>00107    4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,
<a name="l00108"></a>00108    5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779
<a name="l00109"></a>00109 };
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">// default phi is trancated angles phi[st]=phit[st]</span>
<a name="l00112"></a><a class="code" href="AsymGlobals_8h.html#a51c1ad83ec0b3ef104ea6b184b580b75">00112</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#a51c1ad83ec0b3ef104ea6b184b580b75">gPhi</a>[<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>] = {
<a name="l00113"></a>00113    0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,0.78540,
<a name="l00114"></a>00114    1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,1.57080,
<a name="l00115"></a>00115    2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,2.35619,
<a name="l00116"></a>00116    3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,3.92699,
<a name="l00117"></a>00117    4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,4.71239,
<a name="l00118"></a>00118    5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779,5.49779
<a name="l00119"></a>00119 };
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="AsymGlobals_8h.html#adaf5db86c0742b01631b15680c713a2a">00121</a> UShort_t <a class="code" href="AsymCommon_8cxx.html#adaf5db86c0742b01631b15680c713a2a">ch2WfdMap_run13</a>[80] = { 1,  2,  3,  1,  2,  3,  1,  2,  3,  1,  2,  3,
<a name="l00122"></a>00122                                  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,
<a name="l00123"></a>00123                                  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,
<a name="l00124"></a>00124                                  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,
<a name="l00125"></a>00125                                  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,
<a name="l00126"></a>00126                                 16, 17, 18, 16, 17, 18, 16, 17, 18, 16, 17, 18,
<a name="l00127"></a>00127                                 19, 19, 19, 19,
<a name="l00128"></a>00128                                 20, 20, 20, 20 };
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="AsymGlobals_8h.html#add629a4c1a1b85b8c7b6ab8aa305922e">00131</a> <a class="code" href="classAsymAnaInfo.html" title="This class takes care of the command line options specific to the &amp;#39;asym&amp;#39;...">AsymAnaInfo</a>              *<a class="code" href="AsymCommon_8cxx.html#add629a4c1a1b85b8c7b6ab8aa305922e">gAsymAnaInfo</a>;
<a name="l00132"></a><a class="code" href="AsymGlobals_8h.html#a658bc78faf3eb804b201234240205dda">00132</a> <a class="code" href="classMAsymAnaInfo.html" title="This class takes care of the command line options specific to the &amp;#39;masym&amp;#39;...">MAsymAnaInfo</a>             *<a class="code" href="AsymCommon_8cxx.html#a658bc78faf3eb804b201234240205dda">gMAsymAnaInfo</a>;
<a name="l00133"></a><a class="code" href="AsymGlobals_8h.html#a4ea09dca810048da3a6c153c741478c2">00133</a> <a class="code" href="classMeasInfo.html">MeasInfo</a>                 *<a class="code" href="AsymCommon_8cxx.html#a4ea09dca810048da3a6c153c741478c2">gMeasInfo</a>;
<a name="l00134"></a><a class="code" href="AsymGlobals_8h.html#a3cac8aa10cf34ae7bf0818af15ce3c4a">00134</a> <a class="code" href="classAnaMeasResult.html">AnaMeasResult</a>            *<a class="code" href="AsymCommon_8cxx.html#a3cac8aa10cf34ae7bf0818af15ce3c4a">gAnaMeasResult</a>;
<a name="l00135"></a><a class="code" href="AsymGlobals_8h.html#ae26181acb46d02c57996a31d6627e0ee">00135</a> <a class="code" href="classAsymRoot.html">AsymRoot</a>                 *<a class="code" href="AsymCommon_8cxx.html#ae26181acb46d02c57996a31d6627e0ee">gAsymRoot</a>;
<a name="l00136"></a><a class="code" href="AsymGlobals_8h.html#a48bddd3d689c0449251e76d9186a950d">00136</a> UShort_t                 *<a class="code" href="AsymCommon_8cxx.html#a48bddd3d689c0449251e76d9186a950d">gCh2WfdMap</a> = 0;
<a name="l00137"></a><a class="code" href="AsymGlobals_8h.html#a9cea90222a341fa37cd27947b5d8ab8b">00137</a> <a class="code" href="classDbEntry.html">DbEntry</a>                   <a class="code" href="AsymCommon_8cxx.html#a9cea90222a341fa37cd27947b5d8ab8b">gRunDb</a>;
<a name="l00138"></a><a class="code" href="AsymGlobals_8h.html#a1f6d9a5740e1ea08450a3639a1683ab9">00138</a> <a class="code" href="classRunConfig.html">RunConfig</a>                 <a class="code" href="AsymCommon_8cxx.html#a1f6d9a5740e1ea08450a3639a1683ab9">gRunConfig</a>;
<a name="l00139"></a><a class="code" href="AsymGlobals_8h.html#a248095356436f3a0117decec81754303">00139</a> <a class="code" href="structatdata__struct.html">atdata_struct</a>             <a class="code" href="AsymCommon_8cxx.html#a248095356436f3a0117decec81754303">atdata</a>;
<a name="l00140"></a><a class="code" href="AsymGlobals_8h.html#ae37fc920792809b9328cb2b01324b390">00140</a> <a class="code" href="structStructAverage.html">StructAverage</a>             <a class="code" href="AsymCommon_8cxx.html#ae37fc920792809b9328cb2b01324b390">average</a>;
<a name="l00141"></a><a class="code" href="AsymGlobals_8h.html#a76f0473d70c36bc3bb04bbfc6929d332">00141</a> <a class="code" href="structStructFeedBack.html">StructFeedBack</a>            <a class="code" href="AsymCommon_8cxx.html#a76f0473d70c36bc3bb04bbfc6929d332">feedback</a>;
<a name="l00142"></a><a class="code" href="AsymGlobals_8h.html#af7b63b344eb88c5d46ce43b79c3bcd60">00142</a> map&lt;UShort_t, RunConst&gt;   <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>;
<a name="l00143"></a><a class="code" href="AsymGlobals_8h.html#ad45c4e1d8efde494c0fbb8383fca9b0e">00143</a> TRecordConfigRhicStruct  *<a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>;
<a name="l00144"></a><a class="code" href="AsymGlobals_8h.html#ac02ce1a1759ff87c268cc544873e7df4">00144</a> <a class="code" href="classTargetInfo.html">TargetInfo</a>                <a class="code" href="AsymCommon_8cxx.html#ac02ce1a1759ff87c268cc544873e7df4">tgt</a>;
<a name="l00145"></a><a class="code" href="AsymGlobals_8h.html#adc4f77e629006c923cc3be603998d94a">00145</a> <a class="code" href="structBunchAsym.html">BunchAsym</a>                 <a class="code" href="AsymCommon_8cxx.html#adc4f77e629006c923cc3be603998d94a">gBunchAsym</a>;
<a name="l00146"></a><a class="code" href="AsymGlobals_8h.html#a5d61201ee116c4eba94db9ff0d462dd2">00146</a> <a class="code" href="structStructSpeLumi.html">StructSpeLumi</a>             <a class="code" href="AsymCommon_8cxx.html#a5d61201ee116c4eba94db9ff0d462dd2">SpeLumi</a>;
<a name="l00147"></a><a class="code" href="AsymGlobals_8h.html#a0a75b79e83374d9d5ff58b542dbbc8da">00147</a> <a class="code" href="classAsymCalculator.html">AsymCalculator</a>            <a class="code" href="AsymCommon_8cxx.html#a0a75b79e83374d9d5ff58b542dbbc8da">gAsymCalculator</a>;
<a name="l00148"></a><a class="code" href="AsymGlobals_8h.html#aef96dbfb4349447f189f1e7e8b73ea9d">00148</a> <a class="code" href="structStructBunchCheck.html">StructBunchCheck</a>          <a class="code" href="AsymCommon_8cxx.html#aef96dbfb4349447f189f1e7e8b73ea9d">bnchchk</a>;
<a name="l00149"></a><a class="code" href="AsymGlobals_8h.html#ab7f03e63fa09ce32f2b90384d1ad26cc">00149</a> <a class="code" href="structStructStripCheck.html">StructStripCheck</a>          <a class="code" href="AsymCommon_8cxx.html#ab7f03e63fa09ce32f2b90384d1ad26cc">strpchk</a>;
<a name="l00150"></a><a class="code" href="AsymGlobals_8h.html#a3c9b19df1114bf5c1d388d3068e37c81">00150</a> <a class="code" href="structStructHistStat.html">StructHistStat</a>            <a class="code" href="AsymCommon_8cxx.html#a3c9b19df1114bf5c1d388d3068e37c81">gHstat</a>;
<a name="l00151"></a><a class="code" href="AsymGlobals_8h.html#aa5d0c62ca0084ee370fdf87f9fcc9100">00151</a> <a class="code" href="structStructHist.html">StructHist</a>                <a class="code" href="AsymCommon_8cxx.html#aa5d0c62ca0084ee370fdf87f9fcc9100">Eslope</a>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="structStructFeedBack.html#afdd8f381ab0bd6c153534b0c4749cae0">00154</a> <a class="code" href="structStructFeedBack.html#afdd8f381ab0bd6c153534b0c4749cae0">StructFeedBack::StructFeedBack</a>()
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>; i++) {
<a name="l00157"></a>00157       <a class="code" href="structStructFeedBack.html#ac152ed65a24ee1d2ce9d048d753be682">RMS</a>[i]  = <a class="code" href="AsymHeader_8h.html#a1f616a5bef1227ef3ff7f32fde578dc5">CARBON_MASS_PEAK_SIGMA</a>;
<a name="l00158"></a>00158       <a class="code" href="structStructFeedBack.html#aea219e4bb76e0112fc9266fc7872e3b7">mdev</a>[i] = <a class="code" href="structStructFeedBack.html#a9c4a7f4d525a87bff90493f77307d61d">tedev</a>[i] = <a class="code" href="structStructFeedBack.html#a342bd75b0164fde6fc0d5eab7fe7436f">err</a>[i] = <a class="code" href="structStructFeedBack.html#a586daed94fedd94c08014f4855b8b5bd">chi2</a>[i] = <a class="code" href="structStructFeedBack.html#a3f1bf2a978e7c97aa96ea03c6c4894c4">strip</a>[i] = 0;
<a name="l00159"></a>00159    }
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="structStructStripCounter.html#ac2a9ae503ae3705b21abd3c408012223">00163</a> <a class="code" href="structStructStripCounter.html#ac2a9ae503ae3705b21abd3c408012223">StructStripCounter::StructStripCounter</a>()
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="AsymHeader_8h.html#a1018e52d75c6ad09f80957be4bc8b07d">N_SPIN_STATES</a>; i++) {
<a name="l00166"></a>00166       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>; j++) {
<a name="l00167"></a>00167          <a class="code" href="structStructStripCounter.html#a68993663c350376b153e872eb49f0abb">NStrip</a>[i][j] = 0;
<a name="l00168"></a>00168       }
<a name="l00169"></a>00169    }
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="structStructStripCounterTgt.html#a546574aec856f0677e507da19e08e22c">00173</a> <a class="code" href="structStructStripCounterTgt.html#a546574aec856f0677e507da19e08e22c">StructStripCounterTgt::StructStripCounterTgt</a>()
<a name="l00174"></a>00174 {
<a name="l00175"></a>00175    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="AsymHeader_8h.html#aa250b498270e00009806dbd9065287c2">MAXDELIM</a>; i++) {
<a name="l00176"></a>00176       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="AsymHeader_8h.html#a1018e52d75c6ad09f80957be4bc8b07d">N_SPIN_STATES</a>; j++) {
<a name="l00177"></a>00177          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="AsymHeader_8h.html#a27fcccc28ad1d4198d29f49f7e99cdf1">N_SILICON_CHANNELS</a>; k++)
<a name="l00178"></a>00178             cntr_tgt.<a class="code" href="structStructCounterTgt.html#afa97463f42b1049186ee95e2ce7945c0">reg</a>.<a class="code" href="structStructStripCounterTgt.html#a586fb69febb4f53817935609639b9cf0">NStrip</a>[i][j][k] = 0;
<a name="l00179"></a>00179       }
<a name="l00180"></a>00180    }
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="structStructCounter.html#a5d97f685f1547c389bbb7603cfbf52f3">00184</a> <a class="code" href="structStructCounter.html#a5d97f685f1547c389bbb7603cfbf52f3">StructCounter::StructCounter</a>() : good_event(0), revolution(0), tgtMotion(0),
<a name="l00185"></a>00185    reg(), alt(), phx(), str()
<a name="l00186"></a>00186 {
<a name="l00187"></a>00187    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="AsymHeader_8h.html#aa250b498270e00009806dbd9065287c2">MAXDELIM</a>; i++)
<a name="l00188"></a>00188       <a class="code" href="structStructCounter.html#ab7bb2c6aee1baee0ed4f591053cfc96c">good</a>[i] = 0;
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a><a class="code" href="structStructCounterTgt.html#af66943d80b86a6295488ddd63ea8575e">00192</a> <a class="code" href="structStructCounterTgt.html#af66943d80b86a6295488ddd63ea8575e">StructCounterTgt::StructCounterTgt</a>() : good_event(0), revolution(0),
<a name="l00193"></a>00193    tgtMotion(0), reg()
<a name="l00194"></a>00194 {
<a name="l00195"></a>00195    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="AsymHeader_8h.html#aa250b498270e00009806dbd9065287c2">MAXDELIM</a>; i++)
<a name="l00196"></a>00196       <a class="code" href="structStructCounterTgt.html#adef5bd06c38b2e64a1cc3154038539ed">good</a>[i] = 0;
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00201"></a><a class="code" href="classRunConst.html#a7c60a3d24cd524037c7fd7142f9250b4">00201</a> <a class="code" href="classRunConst.html#a7c60a3d24cd524037c7fd7142f9250b4">RunConst::RunConst</a>(<span class="keywordtype">float</span> lL, <span class="keywordtype">float</span> lCt)
<a name="l00202"></a>00202 {
<a name="l00203"></a>00203    <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>   = lL;
<a name="l00204"></a>00204    <a class="code" href="classRunConst.html#ac79ef69e5ec74d3054f263ff28334a24">Ct</a>  = lCt;
<a name="l00205"></a>00205    <a class="code" href="classRunConst.html#a905db0a91369b57f0eae19cb1034f044">E2T</a> = M_SQRT1_2 * sqrt(<a class="code" href="AsymHeader_8h.html#abea4578519a3e22ada04c12244c564c8">MASS_12C</a>) * <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a> / <a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>;
<a name="l00206"></a>00206    <a class="code" href="classRunConst.html#abedcce8a9fb0c2a692281c40bb742248">M2T</a> = <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>/2/M_SQRT2/<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>/sqrt(<a class="code" href="AsymHeader_8h.html#abea4578519a3e22ada04c12244c564c8">MASS_12C</a>);       <span class="comment">// ~ 18 [cm] / 2 / 1.4142 / 29.98 [cm/ns] / 3.3447e3 [keV^(1/2)] = 0.00006347 [ns/keV^(1/2)]</span>
<a name="l00207"></a>00207    <a class="code" href="classRunConst.html#ae17315e56f9a1d6f645ccd3821c7d8f3">T2M</a> = 2*<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>*<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>/<a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>/<a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00212"></a><a class="code" href="classRunConst.html#acc5193cf89a29f13bdc3bdbdc1c86748">00212</a> <span class="keywordtype">void</span> <a class="code" href="classRunConst.html#acc5193cf89a29f13bdc3bdbdc1c86748">RunConst::Update</a>(UShort_t ch)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214   <span class="keywordflow">if</span> (!<a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>) <span class="keywordflow">return</span>;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216    <a class="code" href="classRunConst.html#ac79ef69e5ec74d3054f263ff28334a24">Ct</a> = <a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>-&gt;data.WFDTUnit/2.; <span class="comment">// Determine the TDC count unit (ns/channel)</span>
<a name="l00217"></a>00217 
<a name="l00218"></a>00218    <span class="keywordflow">if</span> (ch &gt;= 1 &amp;&amp; ch &lt;= gConfigInfo-&gt;data.NumChannels) {
<a name="l00219"></a>00219       <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a> = <a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>-&gt;data.chan[ch-1].TOFLength; <span class="comment">// ToF Distance [cm]</span>
<a name="l00220"></a>00220    } <span class="keywordflow">else</span> {
<a name="l00221"></a>00221       <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a> = <a class="code" href="AsymCommon_8cxx.html#ad45c4e1d8efde494c0fbb8383fca9b0e">gConfigInfo</a>-&gt;data.TOFLength; <span class="comment">// ToF Distance [cm]</span>
<a name="l00222"></a>00222    }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="comment">// C_CMNS - speed of light</span>
<a name="l00225"></a>00225 
<a name="l00226"></a>00226   <span class="comment">// Re-calculate kinematic constants for the Run</span>
<a name="l00227"></a>00227   <a class="code" href="classRunConst.html#a905db0a91369b57f0eae19cb1034f044">E2T</a> = M_SQRT1_2/<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a> * sqrt(<a class="code" href="AsymHeader_8h.html#abea4578519a3e22ada04c12244c564c8">MASS_12C</a>) * <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>;
<a name="l00228"></a>00228   <a class="code" href="classRunConst.html#abedcce8a9fb0c2a692281c40bb742248">M2T</a> = L/2/M_SQRT2/<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>/sqrt(<a class="code" href="AsymHeader_8h.html#abea4578519a3e22ada04c12244c564c8">MASS_12C</a>);
<a name="l00229"></a>00229   <a class="code" href="classRunConst.html#ae17315e56f9a1d6f645ccd3821c7d8f3">T2M</a> = 2*<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>*<a class="code" href="AsymHeader_8h.html#a8603da2b4b6ef38d985dc9c729b91f86">C_CMNS</a>/L/L;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00234"></a><a class="code" href="classRunConst.html#a46daa5839c4bba038dde43423e3f1d6a">00234</a> <span class="keywordtype">void</span> <a class="code" href="classRunConst.html#a46daa5839c4bba038dde43423e3f1d6a">RunConst::Print</a>(<span class="keyword">const</span> Option_t* opt)<span class="keyword"> const</span>
<a name="l00235"></a>00235 <span class="keyword"></span>{
<a name="l00236"></a>00236   <span class="comment">//printf(&quot;\nKinematic Constants:\n&quot;);</span>
<a name="l00237"></a>00237   printf(<span class="stringliteral">&quot;\tL   = %10.3f\n&quot;</span>, <a class="code" href="classRunConst.html#af3e6d6eafa377ed5a55cd77e76cf8925">L</a>);
<a name="l00238"></a>00238   printf(<span class="stringliteral">&quot;\tCt  = %10.3f\n&quot;</span>, <a class="code" href="classRunConst.html#ac79ef69e5ec74d3054f263ff28334a24">Ct</a>);
<a name="l00239"></a>00239   printf(<span class="stringliteral">&quot;\tE2T = %10.3f\n&quot;</span>, <a class="code" href="classRunConst.html#a905db0a91369b57f0eae19cb1034f044">E2T</a>);
<a name="l00240"></a>00240   printf(<span class="stringliteral">&quot;\tM2T = %10.3g\n&quot;</span>, <a class="code" href="classRunConst.html#abedcce8a9fb0c2a692281c40bb742248">M2T</a>);
<a name="l00241"></a>00241   printf(<span class="stringliteral">&quot;\tT2M = %10.3f\n&quot;</span>, <a class="code" href="classRunConst.html#ae17315e56f9a1d6f645ccd3821c7d8f3">T2M</a>);
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00246"></a><a class="code" href="classRunConst.html#ab0c969f237dd4cba9e32eccd07262ada">00246</a> <span class="keywordtype">void</span> <a class="code" href="classRunConst.html#ab0c969f237dd4cba9e32eccd07262ada">RunConst::PrintAll</a>()
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248    printf(<span class="stringliteral">&quot;Print gRunConsts:\n&quot;</span>);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250    map&lt;UShort_t, RunConst&gt;::iterator irc = <a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>.begin();
<a name="l00251"></a>00251 
<a name="l00252"></a>00252    <span class="keywordflow">for</span> (; irc!=<a class="code" href="AsymCommon_8cxx.html#a66c1d8ae53a642adfd9a77562975ab45">gRunConsts</a>.end(); ++irc) {
<a name="l00253"></a>00253       printf(<span class="stringliteral">&quot;Channel %-2d consts: \n&quot;</span>, irc-&gt;first);
<a name="l00254"></a>00254       irc-&gt;second.Print();
<a name="l00255"></a>00255    }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257    printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="AsymCommon_8cxx.html#a973f46ee665f86114ee269151386d154">00262</a> TBuffer &amp; <a class="code" href="AsymCommon_8cxx.html#a973f46ee665f86114ee269151386d154">operator&lt;&lt;</a>(TBuffer &amp;buf, TRecordConfigRhicStruct *&amp;rec)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264    <span class="keywordflow">if</span> (!rec) <span class="keywordflow">return</span> buf;
<a name="l00265"></a>00265    <span class="comment">//printf(&quot;operator&lt;&lt;(TBuffer &amp;buf, TRecordConfigRhicStruct *rec) : \n&quot;);</span>
<a name="l00266"></a>00266    rec-&gt;Streamer(buf);
<a name="l00267"></a>00267    <span class="keywordflow">return</span> buf;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00272"></a><a class="code" href="AsymCommon_8cxx.html#a9e5c8ef46b1fcb236d8851779423171f">00272</a> TBuffer &amp; <a class="code" href="AsymCommon_8cxx.html#a9e5c8ef46b1fcb236d8851779423171f">operator&gt;&gt;</a>(TBuffer &amp;buf, TRecordConfigRhicStruct *&amp;rec)
<a name="l00273"></a>00273 {
<a name="l00274"></a>00274    <span class="comment">//printf(&quot;operator&gt;&gt;(TBuffer &amp;buf, TRecordConfigRhicStruct *rec) : \n&quot;);</span>
<a name="l00275"></a>00275    <span class="comment">//if (!rec) return buf; // of course it is 0!</span>
<a name="l00276"></a>00276    <span class="keywordtype">int</span> nChannels;
<a name="l00277"></a>00277    buf &gt;&gt; nChannels;
<a name="l00278"></a>00278    <span class="comment">//printf(&quot;nChannels: %d\n&quot;, nChannels);</span>
<a name="l00279"></a>00279    <span class="comment">// delete memory allocated by default if any</span>
<a name="l00280"></a>00280    <span class="comment">//delete rec;</span>
<a name="l00281"></a>00281    free(rec);
<a name="l00282"></a>00282    rec = (TRecordConfigRhicStruct *) realloc(rec, <span class="keyword">sizeof</span>(TRecordConfigRhicStruct) +
<a name="l00283"></a>00283    <span class="comment">//rec = (TRecordConfigRhicStruct *) malloc(sizeof(TRecordConfigRhicStruct) +</span>
<a name="l00284"></a>00284          (nChannels)*<span class="keyword">sizeof</span>(SiChanStruct));
<a name="l00285"></a>00285    rec-&gt;Streamer(buf);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287    <span class="keywordflow">return</span> buf;
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">//std::string strip(std::string const&amp; str, char const* sepSet)</span>
<a name="l00292"></a>00292 <span class="comment">//{</span>
<a name="l00293"></a>00293 <span class="comment">//   std::string::size_type const first = str.find_first_not_of(sepSet);</span>
<a name="l00294"></a>00294 <span class="comment">//   return ( first==std::string::npos ) ? std::string() : str.substr(first, str.find_last_not_of(sepSet)-first+1);</span>
<a name="l00295"></a>00295 <span class="comment">//}</span>
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">// Return Maximum from array A[N]. Ignores ASYM_DEFAULT as an exception</span>
<a name="l00299"></a><a class="code" href="AsymCommon_8h.html#ace1d58fa7e79d3db647e590cf21be209">00299</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#ace1d58fa7e79d3db647e590cf21be209">GetMax</a>(<span class="keywordtype">int</span> N, <span class="keywordtype">float</span> A[])
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301    <span class="keywordtype">float</span> max = A[0];<span class="comment">// != ASYM_DEFAULT ? A[0] : A[1];</span>
<a name="l00302"></a>00302    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;N; i++) max = (A[i] &amp;&amp; max &lt; A[i] &amp;&amp; A[i] != <a class="code" href="AsymCommon_8cxx.html#a40e0996a243504dfec91f1058c107739">ASYM_DEFAULT</a>) ? A[i] : max;
<a name="l00303"></a>00303    <span class="keywordflow">return</span> max;
<a name="l00304"></a>00304 }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="comment">// Return Miminum from array A[N]. Ignores ASYM_DEFAULT as an exception</span>
<a name="l00308"></a><a class="code" href="AsymCommon_8h.html#a5448ab5ca95964dcc59f2a05036ed19e">00308</a> <span class="keywordtype">float</span> <a class="code" href="AsymCommon_8cxx.html#a5448ab5ca95964dcc59f2a05036ed19e">GetMin</a>(<span class="keywordtype">int</span> N, <span class="keywordtype">float</span> A[])
<a name="l00309"></a>00309 {
<a name="l00310"></a>00310   <span class="keywordtype">float</span> min = A[0];<span class="comment">// != ASYM_DEFAULT ? A[0] : A[1];</span>
<a name="l00311"></a>00311   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;N; i++) min = (A[i]) &amp;&amp; (min&gt;A[i]) &amp;&amp; (A[i] != <a class="code" href="AsymCommon_8cxx.html#a40e0996a243504dfec91f1058c107739">ASYM_DEFAULT</a>) ? A[i] : min;
<a name="l00312"></a>00312   <span class="keywordflow">return</span> min;
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00322"></a><a class="code" href="AsymCommon_8h.html#ada4f906a834746a9ea57e5e50dadc7c4">00322</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#ada4f906a834746a9ea57e5e50dadc7c4" title="Return Minimum and Maximum from array A[N].">GetMinMax</a>(<span class="keywordtype">int</span> N, <span class="keywordtype">float</span> A[], <span class="keywordtype">float</span> margin, <span class="keywordtype">float</span> &amp;min, <span class="keywordtype">float</span> &amp;max)
<a name="l00323"></a>00323 {
<a name="l00324"></a>00324    min  = <a class="code" href="AsymCommon_8cxx.html#a5448ab5ca95964dcc59f2a05036ed19e">GetMin</a>(N, A);
<a name="l00325"></a>00325    max  = <a class="code" href="AsymCommon_8cxx.html#ace1d58fa7e79d3db647e590cf21be209">GetMax</a>(N, A);
<a name="l00326"></a>00326    min -= fabs(min) * margin;
<a name="l00327"></a>00327    max += fabs(max) * margin;
<a name="l00328"></a>00328 }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 <span class="comment">// Return Minimum and Maximum from array A[N]. Same as GetMinMax() function. But</span>
<a name="l00332"></a>00332 <span class="comment">// GetMinMaxOption takes prefix value which forces min, max to be prefix when the</span>
<a name="l00333"></a>00333 <span class="comment">// absolute min,max are smaller than prefix.</span>
<a name="l00334"></a><a class="code" href="AsymCommon_8h.html#a0bcce4fae6ad7267519d14b54754fc01">00334</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#a0bcce4fae6ad7267519d14b54754fc01">GetMinMaxOption</a>(<span class="keywordtype">float</span> prefix, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span> A[], <span class="keywordtype">float</span> margin, <span class="keywordtype">float</span> &amp;min, <span class="keywordtype">float</span> &amp;max)
<a name="l00335"></a>00335 {
<a name="l00336"></a>00336    <a class="code" href="AsymCommon_8cxx.html#ada4f906a834746a9ea57e5e50dadc7c4" title="Return Minimum and Maximum from array A[N].">GetMinMax</a>(N, A, margin, min, max);
<a name="l00337"></a>00337    <span class="keywordflow">if</span> ( fabs(min) &lt; prefix ) min = -prefix;
<a name="l00338"></a>00338    <span class="keywordflow">if</span> ( fabs(max) &lt; prefix ) max =  prefix;
<a name="l00339"></a>00339 }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="comment">// Description : draw text on histogram. Text alignment is (center,top) by default</span>
<a name="l00343"></a><a class="code" href="AsymCommon_8h.html#ae3891ec451ac82e547d3910ffcdc0ec4">00343</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#ae3891ec451ac82e547d3910ffcdc0ec4">DrawText</a>(TH1 *h, <span class="keywordtype">float</span> <a class="code" href="KinFunc_8cxx.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>, <span class="keywordtype">float</span> y, <span class="keywordtype">int</span> color, <span class="keywordtype">char</span> *text)
<a name="l00344"></a>00344 {
<a name="l00345"></a>00345    TLatex *t = <span class="keyword">new</span> TLatex(x, y, text);
<a name="l00346"></a>00346    t-&gt;SetTextColor(color);
<a name="l00347"></a>00347    t-&gt;SetTextAlign(21);
<a name="l00348"></a>00348    h-&gt;GetListOfFunctions()-&gt;Add(t);
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="comment">// Description : DrawLines in TH2F histogram</span>
<a name="l00353"></a>00353 <span class="comment">//             : Assumes  (x1,x2) y=y0=y1</span>
<a name="l00354"></a>00354 <span class="comment">// Input       : TH2F * h, float x0, float x1, float y, int color, int lstyle</span>
<a name="l00355"></a><a class="code" href="AsymCommon_8h.html#ac402cbf8032511c1e4974ca6eb3894ad">00355</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#ac402cbf8032511c1e4974ca6eb3894ad">DrawLine</a>(TH1 *h, <span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> y1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y2, <span class="keywordtype">int</span> color, <span class="keywordtype">int</span> lstyle, <span class="keywordtype">int</span> lwidth)
<a name="l00356"></a>00356 {
<a name="l00357"></a>00357    TLine *l = <span class="keyword">new</span> TLine(x1, y1, x2, y2);
<a name="l00358"></a>00358    l-&gt;SetLineStyle(lstyle);
<a name="l00359"></a>00359    l-&gt;SetLineColor(color);
<a name="l00360"></a>00360    l-&gt;SetLineWidth(lwidth);
<a name="l00361"></a>00361    h-&gt;GetListOfFunctions()-&gt;Add(l);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 
<a name="l00366"></a><a class="code" href="AsymCommon_8h.html#a25d937877d84ada4d46b74eaf4bc81cf">00366</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#a25d937877d84ada4d46b74eaf4bc81cf">DrawHorizLine</a>(TH1 *h, <span class="keywordtype">float</span> x1, <span class="keywordtype">float</span> x2, <span class="keywordtype">float</span> y, <span class="keywordtype">int</span> color, <span class="keywordtype">int</span> lstyle, <span class="keywordtype">int</span> lwidth)
<a name="l00367"></a>00367 {
<a name="l00368"></a>00368    <a class="code" href="AsymCommon_8cxx.html#ac402cbf8032511c1e4974ca6eb3894ad">DrawLine</a>(h, x1, y, x2, y, color, lstyle, lwidth);
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 
<a name="l00373"></a><a class="code" href="AsymCommon_8h.html#a67c2e9f3c87cfc4e203ff2755fa84b38">00373</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#a67c2e9f3c87cfc4e203ff2755fa84b38">DrawVertLine</a>(TH1 *h, <span class="keywordtype">float</span> <a class="code" href="KinFunc_8cxx.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>, <span class="keywordtype">float</span> y, <span class="keywordtype">int</span> color, <span class="keywordtype">int</span> lwidth)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375    <a class="code" href="AsymCommon_8cxx.html#ac402cbf8032511c1e4974ca6eb3894ad">DrawLine</a>(h, x, 0, x, y, color, 2, lwidth);
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">// Description : print integer in binary with zero filled from the most significant bit</span>
<a name="l00380"></a>00380 <span class="comment">//             : to zero bit, f.i. 0101 for n=5, mb=4</span>
<a name="l00381"></a>00381 <span class="comment">// Input       : int n, int mb(the most significant bit)</span>
<a name="l00382"></a>00382 <span class="comment">// Return      : writes out n in binary</span>
<a name="l00383"></a><a class="code" href="AsymCommon_8h.html#afe61426ec096822ac83b7a1a0501f646">00383</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#afe61426ec096822ac83b7a1a0501f646">binary_zero</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> mb)
<a name="l00384"></a>00384 {
<a name="l00385"></a>00385    <span class="keywordtype">int</span> X = int(pow(<span class="keywordtype">double</span>(2), <span class="keywordtype">double</span>(mb-1)));
<a name="l00386"></a>00386  
<a name="l00387"></a>00387    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;mb; i++) {
<a name="l00388"></a>00388      <span class="keywordtype">int</span> j = n &lt;&lt; i &amp; X ? 1 : 0;
<a name="l00389"></a>00389      cout &lt;&lt; j ;
<a name="l00390"></a>00390    }
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 <span class="comment">// Description : Define net TGraphErrors object asymgraph for vectors x,y,ex,ey</span>
<a name="l00395"></a>00395 <span class="comment">//             : specifies marker color based on mode</span>
<a name="l00396"></a>00396 <span class="comment">//             : positive spin : blue</span>
<a name="l00397"></a>00397 <span class="comment">//             : negative spin : red</span>
<a name="l00398"></a>00398 <span class="comment">// Input       : int Mode, int N, float x[], float y[], float ex[], float ey[]</span>
<a name="l00399"></a>00399 <span class="comment">//</span>
<a name="l00400"></a><a class="code" href="AsymCommon_8h.html#aae919c17d3eb4fb215cda1a96bf1006e">00400</a> TGraphErrors* <a class="code" href="AsymCommon_8cxx.html#aae919c17d3eb4fb215cda1a96bf1006e">AsymmetryGraph</a>(<span class="keywordtype">int</span> Mode, <span class="keywordtype">int</span> N, <span class="keywordtype">float</span>* <a class="code" href="KinFunc_8cxx.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>, <span class="keywordtype">float</span>* y, <span class="keywordtype">float</span>* ex, <span class="keywordtype">float</span>* ey)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402   <span class="keywordtype">int</span> Color = Mode == 1 ? kBlue : kRed;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404   TGraphErrors *asymgraph = <span class="keyword">new</span> TGraphErrors(N, x, y, ex, ey);
<a name="l00405"></a>00405 
<a name="l00406"></a>00406   asymgraph-&gt;SetMarkerStyle(kFullCircle);
<a name="l00407"></a>00407   asymgraph-&gt;SetMarkerSize(<a class="code" href="AsymCommon_8cxx.html#a3511e372d4a6eb725d981ec89d547eea">MSIZE</a>);
<a name="l00408"></a>00408   asymgraph-&gt;SetMarkerColor(Color);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410   <span class="keywordflow">return</span> asymgraph;
<a name="l00411"></a>00411 }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 <span class="comment">// Read the parameter file</span>
<a name="l00415"></a>00415 <span class="comment">// Ramp timing file</span>
<a name="l00416"></a><a class="code" href="AsymCommon_8h.html#a9dbd9b64eb3253b920fba4427eeeac93">00416</a> <span class="keywordtype">void</span> <a class="code" href="AsymCommon_8cxx.html#a9dbd9b64eb3253b920fba4427eeeac93">ReadRampTiming</a>(<span class="keywordtype">char</span> *filename)
<a name="l00417"></a>00417 {
<a name="l00418"></a>00418    printf(<span class="stringliteral">&quot;\nReading ramp timing file : %s \n&quot;</span>, filename);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420    ifstream rtiming;
<a name="l00421"></a>00421    rtiming.open(filename);
<a name="l00422"></a>00422 
<a name="l00423"></a>00423    <span class="keywordflow">if</span> (!rtiming) {
<a name="l00424"></a>00424       cerr &lt;&lt; <span class="stringliteral">&quot;failed to open ramp timing file&quot;</span> &lt;&lt;endl;
<a name="l00425"></a>00425       exit(1);
<a name="l00426"></a>00426    }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428    memset(<a class="code" href="AsymCommon_8cxx.html#a31c58a9fc72c8586a59c8876197b4f10">ramptshift</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="AsymCommon_8cxx.html#a31c58a9fc72c8586a59c8876197b4f10">ramptshift</a>));
<a name="l00429"></a>00429 
<a name="l00430"></a>00430    <span class="keywordtype">float</span> runt;
<a name="l00431"></a>00431    <span class="keywordtype">int</span>   index = 0;
<a name="l00432"></a>00432 
<a name="l00433"></a>00433    <span class="keywordflow">while</span> (!rtiming.eof()) {
<a name="l00434"></a>00434       rtiming &gt;&gt; runt &gt;&gt; <a class="code" href="AsymCommon_8cxx.html#a31c58a9fc72c8586a59c8876197b4f10">ramptshift</a>[index] ;
<a name="l00435"></a>00435       index++;
<a name="l00436"></a>00436    }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438    rtiming.close();
<a name="l00439"></a>00439 }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 
<a name="l00443"></a><a class="code" href="AsymCommon_8cxx.html#a8f4cb187230281dfadf7e7282da75217">00443</a> ostream&amp; <a class="code" href="AsymCommon_8cxx.html#a973f46ee665f86114ee269151386d154">operator&lt;&lt;</a>(ostream &amp;os, <span class="keyword">const</span> <a class="code" href="AsymCommon_8h.html#adb6a7f8d2cf00ded705b183a505eaddc">TgtOrient2ValErrMap</a> &amp;vep)
<a name="l00444"></a>00444 {
<a name="l00445"></a>00445    os &lt;&lt; MapAsPhpArray&lt;ETargetOrient, ValErrPair&gt;(vep);
<a name="l00446"></a>00446    <span class="keywordflow">return</span> os;
<a name="l00447"></a>00447 }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 
<a name="l00451"></a><a class="code" href="AsymCommon_8h.html#a92bcfe1182be71303cf2cefe3cc9dd97">00451</a> <span class="keywordtype">string</span> <a class="code" href="AsymCommon_8cxx.html#a2128a211ca66718b7671db0dbb2f3e66">PairAsPhpArray</a>(<span class="keyword">const</span> ValErrPair &amp;p)
<a name="l00452"></a>00452 {
<a name="l00453"></a>00453    std::stringstream sstr(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00454"></a>00454    sstr &lt;&lt; p;
<a name="l00455"></a>00455    <span class="keywordflow">return</span> sstr.str();
<a name="l00456"></a>00456 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 3 Dec 2014 for cnipol by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
